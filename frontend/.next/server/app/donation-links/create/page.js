(()=>{var e={};e.id=8372,e.ids=[8372],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},39337:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=r(7),n=r(8533),i=r(29377),o=r.n(i),a=r(29799),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let c=["",{children:["donation-links",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,43390)),"D:\\repo\\xscan\\frontend\\src\\app\\donation-links\\create\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,72776)),"D:\\repo\\xscan\\frontend\\src\\app\\donation-links\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,44161)),"D:\\repo\\xscan\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,73472,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\repo\\xscan\\frontend\\src\\app\\donation-links\\create\\page.tsx"],u="/donation-links/create/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/donation-links/create/page",pathname:"/donation-links/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},48371:(e,t,r)=>{Promise.resolve().then(r.bind(r,78144))},74868:()=>{},78144:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(54714),n=r(77580),i=r(88934),o=r(96824),a=r(31812),l=r(21102);function c(){let e=(0,i.useRouter)(),{addDonationLink:t,user:r,isAuthenticated:c}=(0,a.qr)(),{isAuthenticating:d}=(0,a.tN)(),[u,x]=(0,n.useState)(!1),[p,m]=(0,n.useState)(null);(0,n.useEffect)(()=>{console.log("\uD83D\uDD0D Auth state check:",{isAuthenticating:d,isAuthenticated:c,userRole:r?.role,user:r,token:(0,l.hV)()}),d||c&&r?.role==="streamer"?console.log("✅ Access granted to donation links create page"):(console.log("❌ Access denied, redirecting to login"),console.log("❌ Reason:",{isAuthenticating:d,isAuthenticated:c,userRole:r?.role,hasUser:!!r}),e.push("/login?redirect=/donation-links/create"))},[d,c,r?.role,e]);let h=async r=>{x(!0),m(null);try{let s=(0,l.hV)();if(!s)throw Error("Authentication required");let n=await fetch("/api/donation-links",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(r)});if(!n.ok){let e=await n.json();throw Error(e.message||"Failed to create donation link")}let i=await n.json();t(i.data),e.push("/dashboard/donation-links")}catch(e){m(e instanceof Error?e.message:"An unexpected error occurred")}finally{x(!1)}};return d?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):c&&r?.role==="streamer"?s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create Donation Link"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Set up a new donation page for your stream and start receiving support from your audience."})]}),(0,s.jsxs)("button",{onClick:()=>e.back(),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]})]})}),p&&s.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:(0,s.jsxs)("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:p})]})]})}),s.jsx("div",{className:"bg-white shadow rounded-lg",children:s.jsx("div",{className:"px-6 py-8",children:s.jsx(o.p,{onSubmit:h,isLoading:u,submitButtonText:"Create Donation Link"})})}),(0,s.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-3",children:"\uD83D\uDCA1 Tips for a Great Donation Page"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-blue-800",children:[(0,s.jsxs)("li",{children:["• ",s.jsx("strong",{children:"Clear Title:"})," Make it obvious what the donations are for"]}),(0,s.jsxs)("li",{children:["• ",s.jsx("strong",{children:"Compelling Description:"})," Explain why people should support you"]}),(0,s.jsxs)("li",{children:["• ",s.jsx("strong",{children:"Custom URL:"}),' Choose something memorable and easy to share (e.g., "my-stream", "support-me")']}),(0,s.jsxs)("li",{children:["• ",s.jsx("strong",{children:"Theme Colors:"})," Match your brand or stream aesthetic"]}),(0,s.jsxs)("li",{children:["• ",s.jsx("strong",{children:"Anonymous Donations:"})," Allow anonymous giving to increase participation"]})]})]})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"\uD83D\uDEAB"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"You need to be logged in as a streamer to create donation links."}),s.jsx("button",{onClick:()=>e.push("/login"),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Go to Login"})]})})}},43390:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});let s=(0,r(71481).createProxy)(String.raw`D:\repo\xscan\frontend\src\app\donation-links\create\page.tsx`),{__esModule:n,$$typeof:i}=s,o=s.default},72776:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(40657);function n({children:e}){return s.jsx("div",{className:"min-h-screen bg-gray-50",children:e})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[3499,9951,8098,6824],()=>r(39337));module.exports=s})();