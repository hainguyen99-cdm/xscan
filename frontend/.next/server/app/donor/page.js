(()=>{var e={};e.id=492,e.ids=[492],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},41307:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=s(7),a=s(8533),i=s(29377),n=s.n(i),o=s(29799),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["donor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,42158)),"D:\\repo\\xscan\\frontend\\src\\app\\donor\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,44161)),"D:\\repo\\xscan\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,73472,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\repo\\xscan\\frontend\\src\\app\\donor\\page.tsx"],x="/donor/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/donor/page",pathname:"/donor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},40538:(e,t,s)=>{Promise.resolve().then(s.bind(s,15873))},15873:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var r=s(54714),a=s(90368),i=s(77580),n=s(31812),o=s(42708),l=s(83446),c=s(46475),d=s(42451),x=s(58178);function m({wallet:e,monthlyStats:t}){let[s,a]=(0,i.useState)(!1),[n,o]=(0,i.useState)(!1),m=(e,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e),{trend:u,isPositive:h}=(()=>{let e=t[t.length-1],s=t[t.length-2];if(!s)return{trend:0,isPositive:!0};let r=(e.amount-s.amount)/s.amount*100;return{trend:Math.abs(r),isPositive:r>=0}})();return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(l.Zb,{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border-emerald-200 shadow-lg",children:[(0,r.jsxs)(l.Ol,{className:"pb-4",children:[(0,r.jsxs)(l.ll,{className:"flex items-center text-emerald-800",children:[r.jsx("span",{className:"mr-2",children:"\uD83D\uDCB0"}),"Wallet Overview"]}),r.jsx(l.SZ,{className:"text-emerald-600",children:"Your current balance and spending statistics"})]}),(0,r.jsxs)(l.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-emerald-800 mb-2",children:m(e.balance,e.currency)}),r.jsx("div",{className:"text-sm text-emerald-600",children:"Available Balance"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(c.z,{onClick:()=>a(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:"Add Funds"}),r.jsx(c.z,{onClick:()=>o(!0),variant:"outline",className:"border-emerald-300 text-emerald-700 hover:bg-emerald-50",children:"Withdraw"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-emerald-200",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-lg font-semibold text-emerald-800",children:m(e.totalSpent,e.currency)}),r.jsx("div",{className:"text-xs text-emerald-600",children:"Total Spent"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-lg font-semibold text-emerald-800",children:e.totalDonations}),r.jsx("div",{className:"text-xs text-emerald-600",children:"Donations"})]})]})]})]}),(0,r.jsxs)(l.Zb,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 shadow-lg",children:[(0,r.jsxs)(l.Ol,{className:"pb-4",children:[(0,r.jsxs)(l.ll,{className:"flex items-center text-blue-800",children:[r.jsx("span",{className:"mr-2",children:"\uD83D\uDCCA"}),"Monthly Spending"]}),r.jsx(l.SZ,{className:"text-blue-600",children:"Your donation activity this month"})]}),r.jsx(l.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium text-blue-700",children:"This Month"}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"font-semibold text-blue-800",children:m(t[t.length-1]?.amount||0,e.currency)}),(0,r.jsxs)("div",{className:"text-xs text-blue-600",children:[t[t.length-1]?.count||0," donations"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/50 rounded-lg border border-blue-200",children:[r.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Trend"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("span",{className:`text-sm font-semibold ${h?"text-green-600":"text-red-600"}`,children:[h?"↗":"↘"," ",u.toFixed(1),"%"]}),r.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"vs last month"})]})]}),r.jsx("div",{className:"space-y-2",children:t.slice(-4).map((s,a)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs text-blue-600",children:s.month}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-16 h-2 bg-blue-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300",style:{width:`${s.amount/Math.max(...t.map(e=>e.amount))*100}%`}})}),r.jsx("span",{className:"text-xs font-medium text-blue-800",children:m(s.amount,e.currency)})]})]},s.month))})]})})]}),(0,r.jsxs)(l.Zb,{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200 shadow-lg",children:[(0,r.jsxs)(l.Ol,{className:"pb-4",children:[(0,r.jsxs)(l.ll,{className:"flex items-center text-purple-800",children:[r.jsx("span",{className:"mr-2",children:"⭐"}),"Favorite Creators"]}),r.jsx(l.SZ,{className:"text-purple-600",children:"Creators you support regularly"})]}),r.jsx(l.aY,{children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-800 mb-2",children:e.favoriteStreamers}),r.jsx("div",{className:"text-sm text-purple-600 mb-4",children:"Favorite Streamers"}),r.jsx(c.z,{variant:"outline",className:"border-purple-300 text-purple-700 hover:bg-purple-50 w-full",onClick:()=>window.location.href="/donor/favorites",children:"View All Favorites"})]})})]}),s&&r.jsx(d.Z,{isOpen:s,onClose:()=>a(!1),onSubmit:(t,s)=>{a(!1),console.log(`Added ${t} ${e.currency} to wallet`)},currency:e.currency}),n&&r.jsx(x.Z,{isOpen:n,onClose:()=>o(!1),onSubmit:(t,s)=>{o(!1),console.log(`Withdrew ${t} ${e.currency} from wallet`)},currency:e.currency,balance:e.balance})]})}var u=s(31407),h=s(74297),p=s(55454),g=s(95622);function f({donations:e}){let[t,s]=(0,i.useState)(!1),[a,n]=(0,i.useState)(null),o=(e,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e),d=e=>{let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/36e5);return s<1?"Just now":s<24?`${s}h ago`:t.toLocaleDateString()},x=e=>{switch(e){case"wallet":return"\uD83D\uDCB0";case"stripe":default:return"\uD83D\uDCB3";case"paypal":return"\uD83D\uDD35";case"bank_transfer":return"\uD83C\uDFE6"}},m=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"failed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=async e=>{let t=(0,g.Hn)(e.streamerName,e.amount,e.currency,e.message,e.isAnonymous),s=`${t.title} ${t.description} ${t.url}`;await (0,g.vQ)(s)&&(n(e.id),setTimeout(()=>n(null),2e3))},b=t?e:e.slice(0,5);return(0,r.jsxs)(l.Zb,{className:"bg-gradient-to-br from-orange-50 to-red-50 border-orange-200 shadow-lg",children:[(0,r.jsxs)(l.Ol,{className:"pb-4",children:[(0,r.jsxs)(l.ll,{className:"flex items-center text-orange-800",children:[r.jsx("span",{className:"mr-2",children:"\uD83D\uDCDC"}),"Donation History"]}),r.jsx(l.SZ,{className:"text-orange-600",children:"Your recent donations to creators"})]}),r.jsx(l.aY,{className:"space-y-4",children:0===b.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-4xl mb-4",children:"\uD83C\uDF81"}),r.jsx("h3",{className:"text-lg font-semibold text-orange-800 mb-2",children:"No donations yet"}),r.jsx("p",{className:"text-orange-600 mb-4",children:"Start supporting your favorite creators!"}),r.jsx(c.z,{className:"bg-orange-600 hover:bg-orange-700 text-white",onClick:()=>window.location.href="/donation",children:"Make Your First Donation"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"space-y-3",children:b.map(e=>(0,r.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-4 border border-orange-200 hover:border-orange-300 transition-all duration-200 hover:shadow-md",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-400 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:e.streamerName.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-semibold text-orange-800",children:e.streamerName}),r.jsx("div",{className:"text-xs text-orange-600",children:d(e.createdAt)})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"font-bold text-orange-800 text-lg",children:o(e.amount,e.currency)}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-1 mt-1",children:[r.jsx("span",{className:"text-xs",children:x(e.paymentMethod)}),r.jsx(u.C,{variant:"outline",className:`text-xs ${m(e.status)}`,children:e.status})]})]})]}),e.message&&r.jsx("div",{className:"bg-orange-50 rounded-lg p-3 border border-orange-100",children:(0,r.jsxs)("div",{className:"text-sm text-orange-700 italic",children:['"',e.message,'"']})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-orange-100",children:[e.isAnonymous&&r.jsx(u.C,{variant:"outline",className:"text-xs bg-gray-100 text-gray-600 border-gray-200",children:"\uD83D\uDD75️ Anonymous Donation"}),r.jsx(c.z,{variant:"ghost",size:"sm",onClick:()=>f(e),className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:a===e.id?(0,r.jsxs)(r.Fragment,{children:[r.jsx(h.Z,{className:"w-4 h-4 mr-1"}),"Copied!"]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(p.Z,{className:"w-4 h-4 mr-1"}),"Share"]})})]})]},e.id))}),e.length>5&&r.jsx("div",{className:"text-center pt-4 border-t border-orange-200",children:r.jsx(c.z,{variant:"outline",className:"border-orange-300 text-orange-700 hover:bg-orange-50",onClick:()=>s(!t),children:t?"Show Less":`Show All ${e.length} Donations`})}),r.jsx("div",{className:"text-center pt-4",children:r.jsx(c.z,{className:"bg-orange-600 hover:bg-orange-700 text-white w-full",onClick:()=>window.location.href="/donor/history",children:"View Complete History"})})]})})]})}function b({streamers:e}){let[t,s]=(0,i.useState)(!1),a=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),n=e=>{let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/36e5);return s<1?"Just now":s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`},o=e=>{switch(e.toLowerCase()){case"gaming":return"\uD83C\uDFAE";case"art":return"\uD83C\uDFA8";case"music":return"\uD83C\uDFB5";case"technology":return"\uD83D\uDCBB";case"cooking":return"\uD83D\uDC68‍\uD83C\uDF73";case"fitness":return"\uD83D\uDCAA";default:return"\uD83D\uDCFA"}},d=t?e:e.slice(0,4);return(0,r.jsxs)(l.Zb,{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200 shadow-lg",children:[(0,r.jsxs)(l.Ol,{className:"pb-4",children:[(0,r.jsxs)(l.ll,{className:"flex items-center text-purple-800",children:[r.jsx("span",{className:"mr-2",children:"⭐"}),"Favorite Creators"]}),r.jsx(l.SZ,{className:"text-purple-600",children:"Creators you support regularly"})]}),r.jsx(l.aY,{className:"space-y-4",children:0===d.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-4xl mb-4",children:"\uD83C\uDF1F"}),r.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-2",children:"No favorite creators yet"}),r.jsx("p",{className:"text-purple-600 mb-4",children:"Start following creators you love!"}),r.jsx(c.z,{className:"bg-purple-600 hover:bg-purple-700 text-white",onClick:()=>window.location.href="/discover",children:"Discover Creators"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"space-y-3",children:d.map(e=>(0,r.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-4 border border-purple-200 hover:border-purple-300 transition-all duration-200 hover:shadow-md group",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:e.name.charAt(0).toUpperCase()}),e.isLive&&r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full border-2 border-white animate-pulse"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-semibold text-purple-800 group-hover:text-purple-900 transition-colors",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-xs text-purple-600",children:[o(e.category)," ",e.category]}),e.isLive&&r.jsx(u.C,{className:"bg-red-500 text-white text-xs px-2 py-0.5",children:"\uD83D\uDD34 LIVE"})]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"font-bold text-purple-800",children:a(e.totalDonated)}),(0,r.jsxs)("div",{className:"text-xs text-purple-600",children:[e.donationCount," donations"]})]})]}),(0,r.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-100",children:[r.jsx("div",{className:"text-xs text-purple-600 mb-1",children:"Last donation"}),r.jsx("div",{className:"text-sm text-purple-700 font-medium",children:n(e.lastDonation)})]}),(0,r.jsxs)("div",{className:"flex space-x-2 mt-3",children:[r.jsx(c.z,{size:"sm",className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white text-xs",onClick:()=>window.location.href=`/donation/${e.id}`,children:"\uD83D\uDC9D Donate"}),r.jsx(c.z,{size:"sm",variant:"outline",className:"border-purple-300 text-purple-700 hover:bg-purple-50 text-xs",onClick:()=>window.location.href=`/streamer/${e.id}`,children:"\uD83D\uDC41️ View"})]})]},e.id))}),e.length>4&&r.jsx("div",{className:"text-center pt-4 border-t border-purple-200",children:r.jsx(c.z,{variant:"outline",className:"border-purple-300 text-purple-700 hover:bg-purple-50",onClick:()=>s(!t),children:t?"Show Less":`Show All ${e.length} Favorites`})}),r.jsx("div",{className:"text-center pt-4",children:r.jsx(c.z,{className:"bg-purple-600 hover:bg-purple-700 text-white w-full",onClick:()=>window.location.href="/donor/favorites",children:"Manage Favorites"})}),r.jsx("div",{className:"bg-white/50 rounded-lg p-4 border border-purple-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-lg font-bold text-purple-800",children:e.filter(e=>e.isLive).length}),r.jsx("div",{className:"text-xs text-purple-600",children:"Live Now"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-lg font-bold text-purple-800",children:a(e.reduce((e,t)=>e+t.totalDonated,0))}),r.jsx("div",{className:"text-xs text-purple-600",children:"Total Spent"})]})]})})]})})]})}function v(){return(0,r.jsxs)(l.Zb,{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,r.jsxs)(l.Ol,{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 px-6 py-4",children:[(0,r.jsxs)(l.ll,{className:"text-xl font-bold text-white flex items-center",children:[r.jsx("span",{className:"mr-3",children:"⚡"}),"Quick Actions"]}),r.jsx(l.SZ,{className:"text-indigo-100",children:"Access your most common donor activities"})]}),(0,r.jsxs)(l.aY,{className:"p-6",children:[r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[{id:"donate",title:"Make a Donation",description:"Support your favorite creators",icon:"\uD83D\uDC9D",color:"from-pink-500 to-rose-500",hoverColor:"from-pink-600 to-rose-600",href:"/donate"},{id:"discover",title:"Discover Creators",description:"Find new creators to support",icon:"\uD83D\uDD0D",color:"from-blue-500 to-indigo-500",hoverColor:"from-blue-600 to-indigo-600",href:"/discover"},{id:"wallet",title:"Manage Wallet",description:"Add funds or withdraw money",icon:"\uD83D\uDCB0",color:"from-emerald-500 to-teal-500",hoverColor:"from-emerald-600 to-teal-600",href:"/wallet"},{id:"share",title:"Share Support",description:"Share your donations",icon:"\uD83D\uDCE2",color:"from-green-500 to-emerald-500",hoverColor:"from-green-600 to-emerald-600",href:"/donor/share"},{id:"notifications",title:"Notifications",description:"View your notifications",icon:"\uD83D\uDD14",color:"from-yellow-500 to-orange-500",hoverColor:"from-yellow-600 to-orange-600",href:"/donor/notifications"},{id:"favorites",title:"My Favorites",description:"View and manage favorite creators",icon:"⭐",color:"from-purple-500 to-pink-500",hoverColor:"from-purple-600 to-pink-600",href:"/donor/favorites"},{id:"history",title:"Donation History",description:"View all your past donations",icon:"\uD83D\uDCDC",color:"from-orange-500 to-red-500",hoverColor:"from-orange-600 to-red-600",href:"/donor/history"},{id:"settings",title:"Account Settings",description:"Manage your donor profile",icon:"⚙️",color:"from-gray-500 to-slate-500",hoverColor:"from-gray-600 to-slate-600",href:"/donor/settings"}].map(e=>(0,r.jsxs)(c.z,{variant:"ghost",className:`h-auto p-4 flex flex-col items-center justify-center space-y-2 bg-gradient-to-br ${e.color} hover:${e.hoverColor} text-white border-0 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-1 rounded-xl`,onClick:()=>window.location.href=e.href,children:[r.jsx("span",{className:"text-2xl",children:e.icon}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"font-semibold text-sm",children:e.title}),r.jsx("div",{className:"text-xs opacity-90",children:e.description})]})]},e.id))}),r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:"47"}),r.jsx("div",{className:"text-xs text-gray-600",children:"Total Donations"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:"$1,234"}),r.jsx("div",{className:"text-xs text-gray-600",children:"Total Spent"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"12"}),r.jsx("div",{className:"text-xs text-gray-600",children:"Favorite Creators"})]})]})})]})]})}var j=s(10137);let N=(0,s(36834).Z)("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);var y=s(17694),w=s(88387);function D({className:e=""}){let[t,s]=(0,i.useState)(!1),[a,o]=(0,i.useState)([]),[l,c]=(0,i.useState)(null),[d,x]=(0,i.useState)(0),[m,u]=(0,i.useState)(!1),{addNotification:p}=(0,n.HB)();(0,i.useEffect)(()=>{g(),f(),b()},[]);let g=async()=>{try{u(!0);let e=await fetch("/api/notifications?limit=20");if(e.ok){let t=await e.json();o(t.notifications||[])}}catch(e){console.error("Failed to fetch notifications:",e),p({type:"error",title:"Error",message:"Failed to load notifications"})}finally{u(!1)}},f=async()=>{try{let e=await fetch("/api/notifications/preferences");if(e.ok){let t=await e.json();c(t)}}catch(e){console.error("Failed to fetch notification preferences:",e)}},b=async()=>{try{let e=await fetch("/api/notifications/unread-count");if(e.ok){let t=await e.json();x(t.count||0)}}catch(e){console.error("Failed to fetch unread count:",e)}},v=async e=>{try{(await fetch(`/api/notifications/${e}/read`,{method:"PUT"})).ok&&(o(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t)),x(e=>Math.max(0,e-1)))}catch(e){console.error("Failed to mark notification as read:",e)}},D=async()=>{try{(await fetch("/api/notifications/mark-all-read",{method:"PUT"})).ok&&(o(e=>e.map(e=>({...e,isRead:!0}))),x(0))}catch(e){console.error("Failed to mark all notifications as read:",e)}},C=async e=>{try{if((await fetch(`/api/notifications/${e}`,{method:"DELETE"})).ok){o(t=>t.filter(t=>t.id!==e));let t=a.find(t=>t.id===e);t&&!t.isRead&&x(e=>Math.max(0,e-1))}}catch(e){console.error("Failed to delete notification:",e)}},S=e=>{switch(e){case"donation_confirmation":return"\uD83D\uDCB0";case"streamer_update":return"\uD83D\uDCFA";case"security_alert":return"\uD83D\uDD12";case"marketing":return"\uD83D\uDCE2";default:return"\uD83D\uDD14"}},k=e=>{let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/1e3);return s<60?"Just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:s<2592e3?`${Math.floor(s/86400)}d ago`:t.toLocaleDateString()};return(0,r.jsxs)("div",{className:`relative ${e}`,children:[(0,r.jsxs)("button",{onClick:()=>s(!t),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Notifications",children:[d>0?r.jsx(j.Z,{className:"w-6 h-6"}):r.jsx(N,{className:"w-6 h-6"}),d>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:d>99?"99+":d})]}),t&&(0,r.jsxs)("div",{className:"absolute right-0 top-12 w-96 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[d>0&&r.jsx("button",{onClick:D,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Mark all read"}),r.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(y.Z,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?r.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading notifications..."}):0===a.length?(0,r.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[r.jsx(N,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{className:"text-sm",children:"No notifications yet"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"You'll see notifications here when you receive them"})]}):r.jsx("div",{className:"divide-y divide-gray-100",children:a.map(e=>r.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${e.isRead?"":"bg-blue-50"}`,children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 text-2xl",children:S(e.type)}),r.jsx("div",{className:"flex-1 min-w-0",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm font-medium ${e.isRead?"text-gray-700":"text-gray-900"}`,children:e.title}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),r.jsx("p",{className:"text-xs text-gray-400 mt-2",children:k(e.createdAt)})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 ml-2",children:[!e.isRead&&r.jsx("button",{onClick:()=>v(e.id),className:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:"Mark as read",children:r.jsx(h.Z,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>C(e.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete notification",children:r.jsx(w.Z,{className:"w-4 h-4"})})]})]})})]})},e.id))})}),a.length>0&&r.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:[d," unread notification",1!==d?"s":""]}),r.jsx("button",{onClick:()=>{s(!1)},className:"text-blue-600 hover:text-blue-800 font-medium",children:"View all"})]})})]}),t&&r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)})]})}let C={wallet:{balance:1250.75,currency:"VND",totalSpent:3420.5,totalDonations:47,favoriteStreamers:8},recentDonations:[{id:"1",streamerName:"GamingPro123",streamerId:"streamer1",amount:25,currency:"VND",message:"Amazing stream today! Keep it up!",isAnonymous:!1,status:"completed",paymentMethod:"wallet",createdAt:new Date(Date.now()-18e5).toISOString()},{id:"2",streamerName:"ArtStreamer",streamerId:"streamer2",amount:50,currency:"VND",message:"Love your artwork!",isAnonymous:!1,status:"completed",paymentMethod:"bank_transfer",createdAt:new Date(Date.now()-72e5).toISOString()},{id:"3",streamerName:"MusicCreator",streamerId:"streamer3",amount:15,currency:"VND",message:"Your music is incredible!",isAnonymous:!0,status:"completed",paymentMethod:"bank_transfer",createdAt:new Date(Date.now()-144e5).toISOString()}],favoriteStreamers:[{id:"streamer1",name:"GamingPro123",avatar:"/api/placeholder/40/40",category:"Gaming",isLive:!0,lastDonation:new Date(Date.now()-36e5).toISOString(),totalDonated:250,donationCount:8},{id:"streamer2",name:"ArtStreamer",avatar:"/api/placeholder/40/40",category:"Art",isLive:!1,lastDonation:new Date(Date.now()-864e5).toISOString(),totalDonated:180,donationCount:5},{id:"streamer3",name:"MusicCreator",avatar:"/api/placeholder/40/40",category:"Music",isLive:!0,lastDonation:new Date(Date.now()-72e5).toISOString(),totalDonated:120,donationCount:3},{id:"streamer4",name:"TechReviewer",avatar:"/api/placeholder/40/40",category:"Technology",isLive:!1,lastDonation:new Date(Date.now()-1728e5).toISOString(),totalDonated:95,donationCount:2}],monthlyStats:[{month:"Jan",amount:320,count:8},{month:"Feb",amount:450,count:12},{month:"Mar",amount:280,count:7},{month:"Apr",amount:520,count:15},{month:"May",amount:380,count:10},{month:"Jun",amount:420,count:11}]};function S(){let{user:e,isLoading:t}=(0,n.qr)(),[s,a]=(0,i.useState)(C);return((0,i.useEffect)(()=>{},[]),e||t)?!e||t?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(o.T,{size:"lg"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:[(0,r.jsxs)("div",{className:"relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-600 via-purple-600 to-cyan-500 opacity-90"}),r.jsx("div",{className:"relative px-6 py-12 sm:px-8 sm:py-16",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[r.jsx("div",{})," ",r.jsx(D,{className:"text-white"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("h1",{className:"text-4xl sm:text-5xl font-bold text-white mb-4 tracking-tight",children:["Welcome back, ",e?.name||"Donor","! \uD83D\uDC9D"]}),(0,r.jsxs)("p",{className:"text-xl text-indigo-100 mb-6 max-w-3xl mx-auto",children:["You've supported amazing creators with"," ",(0,r.jsxs)("span",{className:"font-bold text-cyan-200",children:["$",s.wallet.totalSpent.toLocaleString()]})," ","in donations. Thank you for making a difference!"]}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-center gap-4",children:[r.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl px-6 py-3 border border-white/30",children:(0,r.jsxs)("span",{className:"text-white font-semibold",children:["\uD83D\uDCB0 $",s.wallet.balance.toLocaleString()," Available"]})}),r.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl px-6 py-3 border border-white/30",children:(0,r.jsxs)("span",{className:"text-white font-semibold",children:["\uD83C\uDFAF ",s.wallet.totalDonations," Total Donations"]})}),r.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl px-6 py-3 border border-white/30",children:(0,r.jsxs)("span",{className:"text-white font-semibold",children:["⭐ ",s.wallet.favoriteStreamers," Favorite Creators"]})})]})]})]})})]}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-6 sm:px-8 -mt-8 relative z-10",children:[r.jsx("div",{className:"mb-8",children:r.jsx(v,{})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[r.jsx("div",{className:"xl:col-span-1",children:r.jsx(m,{wallet:s.wallet,monthlyStats:s.monthlyStats})}),r.jsx("div",{className:"xl:col-span-1",children:r.jsx(f,{donations:s.recentDonations})}),r.jsx("div",{className:"xl:col-span-1",children:r.jsx(b,{streamers:s.favoriteStreamers})})]})]})]}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Welcome to XScan Donations \uD83D\uDC9D"}),r.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl",children:"Support your favorite content creators with secure, instant donations. Join thousands of donors making a difference in the creator economy."}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx("a",{href:"/auth/login",className:"bg-indigo-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-indigo-700 transition-colors",children:"Sign In"}),r.jsx("a",{href:"/auth/register",className:"bg-white text-indigo-600 px-8 py-3 rounded-lg font-semibold border-2 border-indigo-600 hover:bg-indigo-50 transition-colors",children:"Get Started"})]})]})})}function k(){return r.jsx(a.Z,{children:r.jsx(S,{})})}},42708:(e,t,s)=>{"use strict";s.d(t,{T:()=>a});var r=s(54714);function a({size:e="md",className:t=""}){return r.jsx("div",{className:`flex justify-center items-center ${t}`,children:r.jsx("div",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[e]} animate-spin rounded-full border-4 border-gray-200 border-t-blue-600`,role:"status","aria-label":"Loading"})})}},10137:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(36834).Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},88387:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(36834).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},17694:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(36834).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},42158:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(71481).createProxy)(String.raw`D:\repo\xscan\frontend\src\app\donor\page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[3499,9951,5070,1934,8098,5773,6333,7525],()=>s(41307));module.exports=r})();