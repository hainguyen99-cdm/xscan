"use strict";(()=>{var e={};e.id=7231,e.ids=[7231],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},53099:(e,a,t)=>{t.r(a),t.d(a,{headerHooks:()=>k,originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>p,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>m});var s={};t.r(s),t.d(s,{GET:()=>u});var r=t(6170),i=t(8533),n=t(54387),o=t(40064);let l="http://xscan-backend:3001";async function u(e){try{let a=e.headers.get("authorization");if(!a)return o.Z.json({success:!1,message:"Authorization header required"},{status:401});let{searchParams:t}=new URL(e.url),s=t.get("url");if(!s)return o.Z.json({success:!1,message:"URL parameter is required"},{status:400});if(!/^[a-zA-Z0-9-]+$/.test(s))return o.Z.json({success:!1,message:"Invalid URL format"},{status:400});let r=await fetch(`${l}/api/donation-links/check-url?url=${encodeURIComponent(s)}`,{headers:{Authorization:a}});if(!r.ok){let e=await fetch(`${l}/api/donation-links?limit=1000`,{headers:{Authorization:a}});if(e.ok){let a=await e.json(),t=a.data?.some(e=>e.customUrl===s||e.slug===s);return o.Z.json({success:!0,available:!t,message:t?"URL is already taken":"URL is available"})}return o.Z.json({success:!0,available:!0,message:"URL appears to be available"})}let i=await r.json();return o.Z.json({success:!0,available:i.available,message:i.message||(i.available?"URL is available":"URL is already taken")})}catch(a){console.error("Error checking URL availability:",a);try{let a=e.headers.get("authorization");if(a){let t=await fetch(`${l}/api/donation-links?limit=1000`,{headers:{Authorization:a}});if(t.ok){let a=await t.json(),s=new URL(e.url).searchParams.get("url"),r=a.data?.some(e=>e.customUrl===s||e.slug===s);return o.Z.json({success:!0,available:!r,message:r?"URL is already taken":"URL is available"})}}}catch(e){console.error("Fallback URL check failed:",e)}return o.Z.json({success:!1,message:"Failed to check URL availability"},{status:500})}}let c=new r.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/donation-links/check-url/route",pathname:"/api/donation-links/check-url",filename:"route",bundlePath:"app/api/donation-links/check-url/route"},resolvedPagePath:"D:\\repo\\xscan\\frontend\\src\\app\\api\\donation-links\\check-url\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:h,serverHooks:p,headerHooks:k,staticGenerationBailout:m}=c,g="/api/donation-links/check-url/route";function v(){return(0,n.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:h})}}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[3499,7386],()=>t(53099));module.exports=s})();