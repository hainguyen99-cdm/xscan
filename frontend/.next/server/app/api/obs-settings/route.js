"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/obs-settings/route";
exports.ids = ["app/api/obs-settings/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fobs-settings%2Froute&page=%2Fapi%2Fobs-settings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fobs-settings%2Froute.ts&appDir=D%3A%5Crepo%5Cxscan%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Crepo%5Cxscan%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fobs-settings%2Froute&page=%2Fapi%2Fobs-settings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fobs-settings%2Froute.ts&appDir=D%3A%5Crepo%5Cxscan%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Crepo%5Cxscan%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/../node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_repo_xscan_frontend_src_app_api_obs_settings_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/obs-settings/route.ts */ \"(rsc)/./src/app/api/obs-settings/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/obs-settings/route\",\n        pathname: \"/api/obs-settings\",\n        filename: \"route\",\n        bundlePath: \"app/api/obs-settings/route\"\n    },\n    resolvedPagePath: \"D:\\\\repo\\\\xscan\\\\frontend\\\\src\\\\app\\\\api\\\\obs-settings\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_repo_xscan_frontend_src_app_api_obs_settings_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/obs-settings/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyLmpzP25hbWU9YXBwJTJGYXBpJTJGb2JzLXNldHRpbmdzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZvYnMtc2V0dGluZ3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZvYnMtc2V0dGluZ3MlMkZyb3V0ZS50cyZhcHBEaXI9RCUzQSU1Q3JlcG8lNUN4c2NhbiU1Q2Zyb250ZW5kJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDcmVwbyU1Q3hzY2FuJTVDZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2dCO0FBQzdGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veHNjYW4tZnJvbnRlbmQvPzkzN2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRDpcXFxccmVwb1xcXFx4c2NhblxcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxvYnMtc2V0dGluZ3NcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9vYnMtc2V0dGluZ3Mvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9vYnMtc2V0dGluZ3NcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL29icy1zZXR0aW5ncy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXHJlcG9cXFxceHNjYW5cXFxcZnJvbnRlbmRcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcb2JzLXNldHRpbmdzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL29icy1zZXR0aW5ncy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fobs-settings%2Froute&page=%2Fapi%2Fobs-settings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fobs-settings%2Froute.ts&appDir=D%3A%5Crepo%5Cxscan%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Crepo%5Cxscan%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/obs-settings/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/obs-settings/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/../node_modules/next/dist/server/web/exports/next-response.js\");\n\nconst BACKEND_URL = \"http://localhost:3001\" || 0;\n// Custom body parser for handling large payloads\nasync function parseBody(request) {\n    try {\n        const contentType = request.headers.get(\"content-type\") || \"\";\n        // For large files, use streaming parser\n        if (contentType.includes(\"multipart/form-data\")) {\n            // Handle multipart form data (file uploads)\n            const formData = await request.formData();\n            const body = {};\n            // Convert FormData entries to array for iteration\n            const entries = Array.from(formData.entries());\n            for (const [key, value] of entries){\n                if (value instanceof File) {\n                    // For very large files, we might want to process in chunks\n                    // But for now, let's try to handle the full file\n                    try {\n                        const arrayBuffer = await value.arrayBuffer();\n                        const base64 = Buffer.from(arrayBuffer).toString(\"base64\");\n                        body[key] = {\n                            name: value.name,\n                            type: value.type,\n                            size: value.size,\n                            data: `data:${value.type};base64,${base64}`\n                        };\n                        console.log(`📁 Processed file: ${value.name}, size: ${value.size} bytes, encoded: ${base64.length} chars`);\n                    } catch (fileError) {\n                        console.error(`❌ Error processing file ${value.name}:`, fileError);\n                        throw new Error(`Failed to process file: ${value.name}`);\n                    }\n                } else {\n                    body[key] = value;\n                }\n            }\n            return body;\n        } else {\n            // Handle JSON payloads with size checking\n            const text = await request.text();\n            if (!text) return {};\n            console.log(`📝 Raw request body size: ${text.length} characters`);\n            // Check if the payload is too large\n            if (text.length > 10 * 1024 * 1024) {\n                throw new Error(\"Request payload exceeds 10MB limit\");\n            }\n            try {\n                return JSON.parse(text);\n            } catch (parseError) {\n                console.error(\"Failed to parse JSON body:\", parseError);\n                throw new Error(\"Invalid JSON payload\");\n            }\n        }\n    } catch (error) {\n        console.error(\"Error parsing request body:\", error);\n        throw error;\n    }\n}\nasync function GET(request) {\n    try {\n        // Get the authorization header\n        const authHeader = request.headers.get(\"authorization\");\n        if (!authHeader) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Authorization header required\"\n            }, {\n                status: 401\n            });\n        }\n        console.log(\"\\uD83D\\uDD0D Fetching OBS settings for user...\");\n        console.log(\"\\uD83C\\uDF10 Backend URL:\", BACKEND_URL);\n        // Test backend connectivity first\n        try {\n            const healthCheck = await fetch(`${BACKEND_URL}/api/health`, {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n            console.log(\"\\uD83C\\uDFE5 Backend health check status:\", healthCheck.status);\n        } catch (error) {\n            console.error(\"❌ Backend connectivity test failed:\", error);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Backend service is not available. Please ensure the backend server is running on port 3001.\",\n                code: \"BACKEND_UNAVAILABLE\"\n            }, {\n                status: 503\n            });\n        }\n        // First, try to get existing OBS settings\n        const settingsUrl = `${BACKEND_URL}/api/obs-settings/my-settings`;\n        console.log(\"\\uD83D\\uDCE1 Making request to:\", settingsUrl);\n        let response = await fetch(settingsUrl, {\n            headers: {\n                \"Authorization\": authHeader,\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        console.log(`📡 Backend response status: ${response.status}`);\n        console.log(`📡 Backend response statusText: ${response.statusText}`);\n        // If settings don't exist (404), create them with defaults\n        if (response.status === 404) {\n            console.log(\"⚠️ OBS settings not found, creating default settings...\");\n            // First, get the user's profile to get their id directly from backend\n            console.log(\"\\uD83D\\uDC64 Getting user profile from backend to get id...\");\n            const profileResponse = await fetch(`${BACKEND_URL}/api/auth/profile`, {\n                headers: {\n                    \"Authorization\": authHeader,\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n            if (!profileResponse.ok) {\n                const errorData = await profileResponse.json();\n                console.error(\"❌ Failed to get user profile:\", errorData);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(errorData, {\n                    status: profileResponse.status\n                });\n            }\n            const profileData = await profileResponse.json();\n            console.log(\"\\uD83D\\uDCE6 Raw profile response:\", profileData);\n            console.log(\"\\uD83D\\uDCE6 Profile response type:\", typeof profileData);\n            console.log(\"\\uD83D\\uDCE6 Profile response keys:\", Object.keys(profileData));\n            // Backend returns: { user: { id, ... } }\n            const userId = profileData?.user?.id;\n            console.log(\"\\uD83D\\uDC64 User ID for streamerId:\", userId);\n            console.log(\"\\uD83D\\uDD0D Available fields in profileData:\", Object.keys(profileData));\n            // Additional debugging to see the full structure\n            if (profileData.user) {\n                console.log(\"\\uD83D\\uDD0D Found nested user object:\", profileData.user);\n                console.log(\"\\uD83D\\uDD0D User object keys:\", Object.keys(profileData.user));\n                console.log(\"\\uD83D\\uDD0D User ID from nested object:\", profileData.user.id);\n            }\n            if (!userId) {\n                console.error(\"❌ Could not extract user ID from profile response\");\n                console.error(\"❌ Full profile response:\", JSON.stringify(profileData, null, 2));\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Could not determine user ID for OBS settings creation\",\n                    code: \"USER_ID_MISSING\"\n                }, {\n                    status: 400\n                });\n            }\n            // Create default OBS settings\n            const createResponse = await fetch(`${BACKEND_URL}/api/obs-settings`, {\n                method: \"POST\",\n                headers: {\n                    \"Authorization\": authHeader,\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    streamerId: userId,\n                    imageSettings: {\n                        enabled: true,\n                        mediaType: \"image\",\n                        width: 300,\n                        height: 200,\n                        borderRadius: 8,\n                        shadow: true,\n                        shadowColor: \"#000000\",\n                        shadowBlur: 10,\n                        shadowOffsetX: 2,\n                        shadowOffsetY: 2\n                    },\n                    soundSettings: {\n                        enabled: true,\n                        volume: 80,\n                        fadeIn: 0,\n                        fadeOut: 0,\n                        loop: false\n                    },\n                    animationSettings: {\n                        enabled: true,\n                        animationType: \"fade\",\n                        duration: 500,\n                        easing: \"ease-out\",\n                        direction: \"right\",\n                        bounceIntensity: 20,\n                        zoomScale: 1.2\n                    },\n                    styleSettings: {\n                        backgroundColor: \"#1a1a1a\",\n                        textColor: \"#ffffff\",\n                        accentColor: \"#00ff00\",\n                        borderColor: \"#333333\",\n                        borderWidth: 2,\n                        borderStyle: \"solid\",\n                        fontFamily: \"Arial, sans-serif\",\n                        fontSize: 16,\n                        fontWeight: \"normal\",\n                        fontStyle: \"normal\",\n                        textShadow: true,\n                        textShadowColor: \"#000000\",\n                        textShadowBlur: 3,\n                        textShadowOffsetX: 1,\n                        textShadowOffsetY: 1\n                    },\n                    positionSettings: {\n                        x: 100,\n                        y: 100,\n                        anchor: \"top-left\",\n                        zIndex: 1000,\n                        responsive: true,\n                        mobileScale: 0.8\n                    },\n                    displaySettings: {\n                        duration: 5000,\n                        fadeInDuration: 300,\n                        fadeOutDuration: 300,\n                        autoHide: true,\n                        showProgress: false,\n                        progressColor: \"#00ff00\",\n                        progressHeight: 3\n                    },\n                    generalSettings: {\n                        enabled: true,\n                        maxAlerts: 3,\n                        alertSpacing: 20,\n                        cooldown: 1000,\n                        priority: \"medium\"\n                    },\n                    isActive: true\n                })\n            });\n            console.log(`📝 Create settings response status: ${createResponse.status}`);\n            if (!createResponse.ok) {\n                const errorData = await createResponse.json();\n                console.error(\"❌ Failed to create OBS settings:\", errorData);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(errorData, {\n                    status: createResponse.status\n                });\n            }\n            console.log(\"✅ OBS settings created successfully, fetching settings...\");\n            // Now try to get the settings again\n            response = await fetch(settingsUrl, {\n                headers: {\n                    \"Authorization\": authHeader,\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n            console.log(`📡 Second attempt response status: ${response.status}`);\n        }\n        if (!response.ok) {\n            const errorData = await response.json();\n            console.error(\"❌ Error response from backend:\", errorData);\n            console.error(\"❌ Response status:\", response.status);\n            console.error(\"❌ Response statusText:\", response.statusText);\n            // Handle specific error cases\n            if (response.status === 403) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Access denied. OBS settings are only available for streamers and administrators.\",\n                    code: \"ACCESS_DENIED\"\n                }, {\n                    status: 403\n                });\n            }\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(errorData, {\n                status: response.status\n            });\n        }\n        const data = await response.json();\n        console.log(\"✅ Successfully retrieved OBS settings:\", data);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(data);\n    } catch (error) {\n        console.error(\"\\uD83D\\uDCA5 Unexpected error in OBS settings API:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to fetch OBS settings\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        // Get the authorization header\n        const authHeader = request.headers.get(\"authorization\");\n        if (!authHeader) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Authorization header required\"\n            }, {\n                status: 401\n            });\n        }\n        // Get the request body\n        const body = await request.json();\n        // Create OBS settings\n        const response = await fetch(`${BACKEND_URL}/api/obs-settings`, {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": authHeader,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(body)\n        });\n        if (!response.ok) {\n            const errorData = await response.json();\n            // Handle specific error cases\n            if (response.status === 403) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Access denied. OBS settings are only available for streamers and administrators.\",\n                    code: \"ACCESS_DENIED\"\n                }, {\n                    status: 403\n                });\n            }\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(errorData, {\n                status: response.status\n            });\n        }\n        const data = await response.json();\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(data, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating OBS settings:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to create OBS settings\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PATCH(request) {\n    try {\n        console.log(\"\\uD83D\\uDE80 PATCH request received for OBS settings\");\n        // Get the authorization header\n        const authHeader = request.headers.get(\"authorization\");\n        if (!authHeader) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Authorization header required\"\n            }, {\n                status: 401\n            });\n        }\n        // Log request details for debugging\n        const contentLength = request.headers.get(\"content-length\");\n        const contentType = request.headers.get(\"content-type\");\n        console.log(\"\\uD83D\\uDCDD Request content-length header:\", contentLength);\n        console.log(\"\\uD83D\\uDCDD Request content-type:\", contentType);\n        console.log(\"\\uD83D\\uDCDD Request method:\", request.method);\n        console.log(\"\\uD83D\\uDCDD Request URL:\", request.url);\n        // Use custom body parser for large payloads\n        console.log(\"\\uD83D\\uDD04 Starting to parse request body...\");\n        const body = await parseBody(request);\n        console.log(\"\\uD83D\\uDCDD Parsed request body size:\", JSON.stringify(body).length, \"characters\");\n        console.log(\"\\uD83D\\uDCDD Body keys:\", Object.keys(body));\n        // Check if body is too large for backend\n        const bodySize = JSON.stringify(body).length;\n        if (bodySize > 5 * 1024 * 1024) {\n            console.warn(\"⚠️ Body size exceeds 5MB, may cause backend issues\");\n        }\n        // Update OBS settings\n        const response = await fetch(`${BACKEND_URL}/api/obs-settings/my-settings`, {\n            method: \"PATCH\",\n            headers: {\n                \"Authorization\": authHeader,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(body)\n        });\n        if (!response.ok) {\n            const errorData = await response.json();\n            console.error(\"❌ Backend response error:\", response.status, errorData);\n            // Handle specific error cases\n            if (response.status === 403) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Access denied. OBS settings are only available for streamers and administrators.\",\n                    code: \"ACCESS_DENIED\"\n                }, {\n                    status: 403\n                });\n            }\n            if (response.status === 404) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"OBS settings not found. Please create settings first.\",\n                    code: \"SETTINGS_NOT_FOUND\"\n                }, {\n                    status: 404\n                });\n            }\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(errorData, {\n                status: response.status\n            });\n        }\n        const data = await response.json();\n        console.log(\"✅ Backend update successful\");\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(data, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Error updating OBS settings:\", error);\n        // Handle specific parsing errors\n        if (error instanceof Error && error.message.includes(\"Failed to parse request body\")) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Request payload is too large or invalid. Please ensure files are under 10MB.\",\n                code: \"PAYLOAD_TOO_LARGE\"\n            }, {\n                status: 413\n            });\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to update OBS settings\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNaLE9BQU8zQixrRkFBWUEsQ0FBQ3NDLElBQUksQ0FBQ2IsTUFBTTtZQUFFYyxRQUFRO1FBQUk7SUFDL0MsRUFBRSxPQUFPVCxPQUFPO1FBQ2RKLFFBQVFJLEtBQUssQ0FBQyxnQ0FBZ0NBO1FBRTlDLGlDQUFpQztRQUNqQyxJQUFJQSxpQkFBaUJDLFNBQVNELE1BQU04RixPQUFPLENBQUNuSCxRQUFRLENBQUMsaUNBQWlDO1lBQ3BGLE9BQU9ULGtGQUFZQSxDQUFDc0MsSUFBSSxDQUFDO2dCQUN2QlIsT0FBTztnQkFDUGEsTUFBTTtZQUNSLEdBQUc7Z0JBQUVKLFFBQVE7WUFBSTtRQUNuQjtRQUVBLE9BQU92QyxrRkFBWUEsQ0FBQ3NDLElBQUksQ0FDdEI7WUFBRVIsT0FBTztRQUFnQyxHQUN6QztZQUFFUyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3hzY2FuLWZyb250ZW5kLy4vc3JjL2FwcC9hcGkvb2JzLXNldHRpbmdzL3JvdXRlLnRzPzZjNGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcblxuY29uc3QgQkFDS0VORF9VUkwgPSBwcm9jZXNzLmVudi5CQUNLRU5EX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAxJztcblxuLy8gQ3VzdG9tIGJvZHkgcGFyc2VyIGZvciBoYW5kbGluZyBsYXJnZSBwYXlsb2Fkc1xuYXN5bmMgZnVuY3Rpb24gcGFyc2VCb2R5KHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTxhbnk+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpIHx8ICcnO1xuICAgIFxuICAgIC8vIEZvciBsYXJnZSBmaWxlcywgdXNlIHN0cmVhbWluZyBwYXJzZXJcbiAgICBpZiAoY29udGVudFR5cGUuaW5jbHVkZXMoJ211bHRpcGFydC9mb3JtLWRhdGEnKSkge1xuICAgICAgLy8gSGFuZGxlIG11bHRpcGFydCBmb3JtIGRhdGEgKGZpbGUgdXBsb2FkcylcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxdWVzdC5mb3JtRGF0YSgpO1xuICAgICAgY29uc3QgYm9keTogYW55ID0ge307XG4gICAgICBcbiAgICAgIC8vIENvbnZlcnQgRm9ybURhdGEgZW50cmllcyB0byBhcnJheSBmb3IgaXRlcmF0aW9uXG4gICAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuZnJvbShmb3JtRGF0YS5lbnRyaWVzKCkpO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEZpbGUpIHtcbiAgICAgICAgICAvLyBGb3IgdmVyeSBsYXJnZSBmaWxlcywgd2UgbWlnaHQgd2FudCB0byBwcm9jZXNzIGluIGNodW5rc1xuICAgICAgICAgIC8vIEJ1dCBmb3Igbm93LCBsZXQncyB0cnkgdG8gaGFuZGxlIHRoZSBmdWxsIGZpbGVcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCB2YWx1ZS5hcnJheUJ1ZmZlcigpO1xuICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gQnVmZmVyLmZyb20oYXJyYXlCdWZmZXIpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAgICAgICAgIGJvZHlba2V5XSA9IHtcbiAgICAgICAgICAgICAgbmFtZTogdmFsdWUubmFtZSxcbiAgICAgICAgICAgICAgdHlwZTogdmFsdWUudHlwZSxcbiAgICAgICAgICAgICAgc2l6ZTogdmFsdWUuc2l6ZSxcbiAgICAgICAgICAgICAgZGF0YTogYGRhdGE6JHt2YWx1ZS50eXBlfTtiYXNlNjQsJHtiYXNlNjR9YFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OBIFByb2Nlc3NlZCBmaWxlOiAke3ZhbHVlLm5hbWV9LCBzaXplOiAke3ZhbHVlLnNpemV9IGJ5dGVzLCBlbmNvZGVkOiAke2Jhc2U2NC5sZW5ndGh9IGNoYXJzYCk7XG4gICAgICAgICAgfSBjYXRjaCAoZmlsZUVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRXJyb3IgcHJvY2Vzc2luZyBmaWxlICR7dmFsdWUubmFtZX06YCwgZmlsZUVycm9yKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHByb2Nlc3MgZmlsZTogJHt2YWx1ZS5uYW1lfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBib2R5W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gYm9keTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSGFuZGxlIEpTT04gcGF5bG9hZHMgd2l0aCBzaXplIGNoZWNraW5nXG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgICBpZiAoIXRleHQpIHJldHVybiB7fTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYPCfk50gUmF3IHJlcXVlc3QgYm9keSBzaXplOiAke3RleHQubGVuZ3RofSBjaGFyYWN0ZXJzYCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBwYXlsb2FkIGlzIHRvbyBsYXJnZVxuICAgICAgaWYgKHRleHQubGVuZ3RoID4gMTAgKiAxMDI0ICogMTAyNCkgeyAvLyAxME1CIGxpbWl0XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWVzdCBwYXlsb2FkIGV4Y2VlZHMgMTBNQiBsaW1pdCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0ZXh0KTtcbiAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHBhcnNlIEpTT04gYm9keTonLCBwYXJzZUVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEpTT04gcGF5bG9hZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIHJlcXVlc3QgYm9keTonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIEdldCB0aGUgYXV0aG9yaXphdGlvbiBoZWFkZXJcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpO1xuICAgIFxuICAgIGlmICghYXV0aEhlYWRlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdBdXRob3JpemF0aW9uIGhlYWRlciByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn8J+UjSBGZXRjaGluZyBPQlMgc2V0dGluZ3MgZm9yIHVzZXIuLi4nKTtcbiAgICBjb25zb2xlLmxvZygn8J+MkCBCYWNrZW5kIFVSTDonLCBCQUNLRU5EX1VSTCk7XG5cbiAgICAvLyBUZXN0IGJhY2tlbmQgY29ubmVjdGl2aXR5IGZpcnN0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhlYWx0aENoZWNrID0gYXdhaXQgZmV0Y2goYCR7QkFDS0VORF9VUkx9L2FwaS9oZWFsdGhgLCB7IFxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZygn8J+PpSBCYWNrZW5kIGhlYWx0aCBjaGVjayBzdGF0dXM6JywgaGVhbHRoQ2hlY2suc3RhdHVzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEJhY2tlbmQgY29ubmVjdGl2aXR5IHRlc3QgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBlcnJvcjogJ0JhY2tlbmQgc2VydmljZSBpcyBub3QgYXZhaWxhYmxlLiBQbGVhc2UgZW5zdXJlIHRoZSBiYWNrZW5kIHNlcnZlciBpcyBydW5uaW5nIG9uIHBvcnQgMzAwMS4nLFxuICAgICAgICBjb2RlOiAnQkFDS0VORF9VTkFWQUlMQUJMRSdcbiAgICAgIH0sIHsgc3RhdHVzOiA1MDMgfSk7XG4gICAgfVxuXG4gICAgLy8gRmlyc3QsIHRyeSB0byBnZXQgZXhpc3RpbmcgT0JTIHNldHRpbmdzXG4gICAgY29uc3Qgc2V0dGluZ3NVcmwgPSBgJHtCQUNLRU5EX1VSTH0vYXBpL29icy1zZXR0aW5ncy9teS1zZXR0aW5nc2A7XG4gICAgY29uc29sZS5sb2coJ/Cfk6EgTWFraW5nIHJlcXVlc3QgdG86Jywgc2V0dGluZ3NVcmwpO1xuICAgIFxuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHNldHRpbmdzVXJsLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYXV0aEhlYWRlcixcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhg8J+ToSBCYWNrZW5kIHJlc3BvbnNlIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgY29uc29sZS5sb2coYPCfk6EgQmFja2VuZCByZXNwb25zZSBzdGF0dXNUZXh0OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG5cbiAgICAvLyBJZiBzZXR0aW5ncyBkb24ndCBleGlzdCAoNDA0KSwgY3JlYXRlIHRoZW0gd2l0aCBkZWZhdWx0c1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBPQlMgc2V0dGluZ3Mgbm90IGZvdW5kLCBjcmVhdGluZyBkZWZhdWx0IHNldHRpbmdzLi4uJyk7XG4gICAgICBcbiAgICAgIC8vIEZpcnN0LCBnZXQgdGhlIHVzZXIncyBwcm9maWxlIHRvIGdldCB0aGVpciBpZCBkaXJlY3RseSBmcm9tIGJhY2tlbmRcbiAgICAgIGNvbnNvbGUubG9nKCfwn5GkIEdldHRpbmcgdXNlciBwcm9maWxlIGZyb20gYmFja2VuZCB0byBnZXQgaWQuLi4nKTtcbiAgICAgIGNvbnN0IHByb2ZpbGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0JBQ0tFTkRfVVJMfS9hcGkvYXV0aC9wcm9maWxlYCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBhdXRoSGVhZGVyLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFwcm9maWxlUmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcHJvZmlsZVJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBnZXQgdXNlciBwcm9maWxlOicsIGVycm9yRGF0YSk7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihlcnJvckRhdGEsIHsgc3RhdHVzOiBwcm9maWxlUmVzcG9uc2Uuc3RhdHVzIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9maWxlRGF0YSA9IGF3YWl0IHByb2ZpbGVSZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zb2xlLmxvZygn8J+TpiBSYXcgcHJvZmlsZSByZXNwb25zZTonLCBwcm9maWxlRGF0YSk7XG4gICAgICBjb25zb2xlLmxvZygn8J+TpiBQcm9maWxlIHJlc3BvbnNlIHR5cGU6JywgdHlwZW9mIHByb2ZpbGVEYXRhKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OmIFByb2ZpbGUgcmVzcG9uc2Uga2V5czonLCBPYmplY3Qua2V5cyhwcm9maWxlRGF0YSkpO1xuICAgICAgXG4gICAgICAvLyBCYWNrZW5kIHJldHVybnM6IHsgdXNlcjogeyBpZCwgLi4uIH0gfVxuICAgICAgY29uc3QgdXNlcklkID0gcHJvZmlsZURhdGE/LnVzZXI/LmlkO1xuICAgICAgY29uc29sZS5sb2coJ/CfkaQgVXNlciBJRCBmb3Igc3RyZWFtZXJJZDonLCB1c2VySWQpO1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gQXZhaWxhYmxlIGZpZWxkcyBpbiBwcm9maWxlRGF0YTonLCBPYmplY3Qua2V5cyhwcm9maWxlRGF0YSkpO1xuICAgICAgXG4gICAgICAvLyBBZGRpdGlvbmFsIGRlYnVnZ2luZyB0byBzZWUgdGhlIGZ1bGwgc3RydWN0dXJlXG4gICAgICBpZiAocHJvZmlsZURhdGEudXNlcikge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBGb3VuZCBuZXN0ZWQgdXNlciBvYmplY3Q6JywgcHJvZmlsZURhdGEudXNlcik7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFVzZXIgb2JqZWN0IGtleXM6JywgT2JqZWN0LmtleXMocHJvZmlsZURhdGEudXNlcikpO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBVc2VyIElEIGZyb20gbmVzdGVkIG9iamVjdDonLCBwcm9maWxlRGF0YS51c2VyLmlkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKCF1c2VySWQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIENvdWxkIG5vdCBleHRyYWN0IHVzZXIgSUQgZnJvbSBwcm9maWxlIHJlc3BvbnNlJyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGdWxsIHByb2ZpbGUgcmVzcG9uc2U6JywgSlNPTi5zdHJpbmdpZnkocHJvZmlsZURhdGEsIG51bGwsIDIpKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgZXJyb3I6ICdDb3VsZCBub3QgZGV0ZXJtaW5lIHVzZXIgSUQgZm9yIE9CUyBzZXR0aW5ncyBjcmVhdGlvbicsXG4gICAgICAgICAgY29kZTogJ1VTRVJfSURfTUlTU0lORydcbiAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGRlZmF1bHQgT0JTIHNldHRpbmdzXG4gICAgICBjb25zdCBjcmVhdGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0JBQ0tFTkRfVVJMfS9hcGkvb2JzLXNldHRpbmdzYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYXV0aEhlYWRlcixcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgc3RyZWFtZXJJZDogdXNlcklkLCAvLyBJbmNsdWRlIHRoZSB1c2VyJ3MgX2lkIGFzIHN0cmVhbWVySWRcbiAgICAgICAgICBpbWFnZVNldHRpbmdzOiB7XG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgbWVkaWFUeXBlOiAnaW1hZ2UnLFxuICAgICAgICAgICAgd2lkdGg6IDMwMCxcbiAgICAgICAgICAgIGhlaWdodDogMjAwLFxuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiA4LFxuICAgICAgICAgICAgc2hhZG93OiB0cnVlLFxuICAgICAgICAgICAgc2hhZG93Q29sb3I6ICcjMDAwMDAwJyxcbiAgICAgICAgICAgIHNoYWRvd0JsdXI6IDEwLFxuICAgICAgICAgICAgc2hhZG93T2Zmc2V0WDogMixcbiAgICAgICAgICAgIHNoYWRvd09mZnNldFk6IDIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzb3VuZFNldHRpbmdzOiB7XG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgdm9sdW1lOiA4MCxcbiAgICAgICAgICAgIGZhZGVJbjogMCxcbiAgICAgICAgICAgIGZhZGVPdXQ6IDAsXG4gICAgICAgICAgICBsb29wOiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFuaW1hdGlvblNldHRpbmdzOiB7XG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgYW5pbWF0aW9uVHlwZTogJ2ZhZGUnLFxuICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2Utb3V0JyxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogJ3JpZ2h0JyxcbiAgICAgICAgICAgIGJvdW5jZUludGVuc2l0eTogMjAsXG4gICAgICAgICAgICB6b29tU2NhbGU6IDEuMixcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0eWxlU2V0dGluZ3M6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMxYTFhMWEnLFxuICAgICAgICAgICAgdGV4dENvbG9yOiAnI2ZmZmZmZicsXG4gICAgICAgICAgICBhY2NlbnRDb2xvcjogJyMwMGZmMDAnLFxuICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjMzMzMzMzJyxcbiAgICAgICAgICAgIGJvcmRlcldpZHRoOiAyLFxuICAgICAgICAgICAgYm9yZGVyU3R5bGU6ICdzb2xpZCcsXG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwsIHNhbnMtc2VyaWYnLFxuICAgICAgICAgICAgZm9udFNpemU6IDE2LFxuICAgICAgICAgICAgZm9udFdlaWdodDogJ25vcm1hbCcsXG4gICAgICAgICAgICBmb250U3R5bGU6ICdub3JtYWwnLFxuICAgICAgICAgICAgdGV4dFNoYWRvdzogdHJ1ZSxcbiAgICAgICAgICAgIHRleHRTaGFkb3dDb2xvcjogJyMwMDAwMDAnLFxuICAgICAgICAgICAgdGV4dFNoYWRvd0JsdXI6IDMsXG4gICAgICAgICAgICB0ZXh0U2hhZG93T2Zmc2V0WDogMSxcbiAgICAgICAgICAgIHRleHRTaGFkb3dPZmZzZXRZOiAxLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcG9zaXRpb25TZXR0aW5nczoge1xuICAgICAgICAgICAgeDogMTAwLFxuICAgICAgICAgICAgeTogMTAwLFxuICAgICAgICAgICAgYW5jaG9yOiAndG9wLWxlZnQnLFxuICAgICAgICAgICAgekluZGV4OiAxMDAwLFxuICAgICAgICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1vYmlsZVNjYWxlOiAwLjgsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNwbGF5U2V0dGluZ3M6IHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwLFxuICAgICAgICAgICAgZmFkZUluRHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgIGZhZGVPdXREdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgYXV0b0hpZGU6IHRydWUsXG4gICAgICAgICAgICBzaG93UHJvZ3Jlc3M6IGZhbHNlLFxuICAgICAgICAgICAgcHJvZ3Jlc3NDb2xvcjogJyMwMGZmMDAnLFxuICAgICAgICAgICAgcHJvZ3Jlc3NIZWlnaHQ6IDMsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZW5lcmFsU2V0dGluZ3M6IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICBtYXhBbGVydHM6IDMsXG4gICAgICAgICAgICBhbGVydFNwYWNpbmc6IDIwLFxuICAgICAgICAgICAgY29vbGRvd246IDEwMDAsXG4gICAgICAgICAgICBwcmlvcml0eTogJ21lZGl1bScsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coYPCfk50gQ3JlYXRlIHNldHRpbmdzIHJlc3BvbnNlIHN0YXR1czogJHtjcmVhdGVSZXNwb25zZS5zdGF0dXN9YCk7XG5cbiAgICAgIGlmICghY3JlYXRlUmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgY3JlYXRlUmVzcG9uc2UuanNvbigpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGNyZWF0ZSBPQlMgc2V0dGluZ3M6JywgZXJyb3JEYXRhKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGVycm9yRGF0YSwgeyBzdGF0dXM6IGNyZWF0ZVJlc3BvbnNlLnN0YXR1cyB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ+KchSBPQlMgc2V0dGluZ3MgY3JlYXRlZCBzdWNjZXNzZnVsbHksIGZldGNoaW5nIHNldHRpbmdzLi4uJyk7XG5cbiAgICAgIC8vIE5vdyB0cnkgdG8gZ2V0IHRoZSBzZXR0aW5ncyBhZ2FpblxuICAgICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzZXR0aW5nc1VybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBhdXRoSGVhZGVyLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coYPCfk6EgU2Vjb25kIGF0dGVtcHQgcmVzcG9uc2Ugc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgcmVzcG9uc2UgZnJvbSBiYWNrZW5kOicsIGVycm9yRGF0YSk7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgUmVzcG9uc2Ugc3RhdHVzOicsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgUmVzcG9uc2Ugc3RhdHVzVGV4dDonLCByZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIHNwZWNpZmljIGVycm9yIGNhc2VzXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgZXJyb3I6ICdBY2Nlc3MgZGVuaWVkLiBPQlMgc2V0dGluZ3MgYXJlIG9ubHkgYXZhaWxhYmxlIGZvciBzdHJlYW1lcnMgYW5kIGFkbWluaXN0cmF0b3JzLicsXG4gICAgICAgICAgY29kZTogJ0FDQ0VTU19ERU5JRUQnXG4gICAgICAgIH0sIHsgc3RhdHVzOiA0MDMgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihlcnJvckRhdGEsIHsgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIFN1Y2Nlc3NmdWxseSByZXRyaWV2ZWQgT0JTIHNldHRpbmdzOicsIGRhdGEpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihkYXRhKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfwn5KlIFVuZXhwZWN0ZWQgZXJyb3IgaW4gT0JTIHNldHRpbmdzIEFQSTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBPQlMgc2V0dGluZ3MnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gR2V0IHRoZSBhdXRob3JpemF0aW9uIGhlYWRlclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XG4gICAgXG4gICAgaWYgKCFhdXRoSGVhZGVyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0F1dGhvcml6YXRpb24gaGVhZGVyIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgcmVxdWVzdCBib2R5XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuXG4gICAgLy8gQ3JlYXRlIE9CUyBzZXR0aW5nc1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QkFDS0VORF9VUkx9L2FwaS9vYnMtc2V0dGluZ3NgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBhdXRoSGVhZGVyLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgc3BlY2lmaWMgZXJyb3IgY2FzZXNcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgICBlcnJvcjogJ0FjY2VzcyBkZW5pZWQuIE9CUyBzZXR0aW5ncyBhcmUgb25seSBhdmFpbGFibGUgZm9yIHN0cmVhbWVycyBhbmQgYWRtaW5pc3RyYXRvcnMuJyxcbiAgICAgICAgICBjb2RlOiAnQUNDRVNTX0RFTklFRCdcbiAgICAgICAgfSwgeyBzdGF0dXM6IDQwMyB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGVycm9yRGF0YSwgeyBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihkYXRhLCB7IHN0YXR1czogMjAxIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIE9CUyBzZXR0aW5nczonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgT0JTIHNldHRpbmdzJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSBcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBBVENIKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CfmoAgUEFUQ0ggcmVxdWVzdCByZWNlaXZlZCBmb3IgT0JTIHNldHRpbmdzJyk7XG4gICAgXG4gICAgLy8gR2V0IHRoZSBhdXRob3JpemF0aW9uIGhlYWRlclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XG4gICAgXG4gICAgaWYgKCFhdXRoSGVhZGVyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0F1dGhvcml6YXRpb24gaGVhZGVyIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIC8vIExvZyByZXF1ZXN0IGRldGFpbHMgZm9yIGRlYnVnZ2luZ1xuICAgIGNvbnN0IGNvbnRlbnRMZW5ndGggPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdjb250ZW50LWxlbmd0aCcpO1xuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XG4gICAgY29uc29sZS5sb2coJ/Cfk50gUmVxdWVzdCBjb250ZW50LWxlbmd0aCBoZWFkZXI6JywgY29udGVudExlbmd0aCk7XG4gICAgY29uc29sZS5sb2coJ/Cfk50gUmVxdWVzdCBjb250ZW50LXR5cGU6JywgY29udGVudFR5cGUpO1xuICAgIGNvbnNvbGUubG9nKCfwn5OdIFJlcXVlc3QgbWV0aG9kOicsIHJlcXVlc3QubWV0aG9kKTtcbiAgICBjb25zb2xlLmxvZygn8J+TnSBSZXF1ZXN0IFVSTDonLCByZXF1ZXN0LnVybCk7XG5cbiAgICAvLyBVc2UgY3VzdG9tIGJvZHkgcGFyc2VyIGZvciBsYXJnZSBwYXlsb2Fkc1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIFN0YXJ0aW5nIHRvIHBhcnNlIHJlcXVlc3QgYm9keS4uLicpO1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCBwYXJzZUJvZHkocmVxdWVzdCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ/Cfk50gUGFyc2VkIHJlcXVlc3QgYm9keSBzaXplOicsIEpTT04uc3RyaW5naWZ5KGJvZHkpLmxlbmd0aCwgJ2NoYXJhY3RlcnMnKTtcbiAgICBjb25zb2xlLmxvZygn8J+TnSBCb2R5IGtleXM6JywgT2JqZWN0LmtleXMoYm9keSkpO1xuXG4gICAgLy8gQ2hlY2sgaWYgYm9keSBpcyB0b28gbGFyZ2UgZm9yIGJhY2tlbmRcbiAgICBjb25zdCBib2R5U2l6ZSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpLmxlbmd0aDtcbiAgICBpZiAoYm9keVNpemUgPiA1ICogMTAyNCAqIDEwMjQpIHsgLy8gNU1CIGxpbWl0IGZvciBiYWNrZW5kXG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBCb2R5IHNpemUgZXhjZWVkcyA1TUIsIG1heSBjYXVzZSBiYWNrZW5kIGlzc3VlcycpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBPQlMgc2V0dGluZ3NcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0JBQ0tFTkRfVVJMfS9hcGkvb2JzLXNldHRpbmdzL215LXNldHRpbmdzYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGF1dGhIZWFkZXIsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgQmFja2VuZCByZXNwb25zZSBlcnJvcjonLCByZXNwb25zZS5zdGF0dXMsIGVycm9yRGF0YSk7XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBlcnJvciBjYXNlc1xuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICAgIGVycm9yOiAnQWNjZXNzIGRlbmllZC4gT0JTIHNldHRpbmdzIGFyZSBvbmx5IGF2YWlsYWJsZSBmb3Igc3RyZWFtZXJzIGFuZCBhZG1pbmlzdHJhdG9ycy4nLFxuICAgICAgICAgIGNvZGU6ICdBQ0NFU1NfREVOSUVEJ1xuICAgICAgICB9LCB7IHN0YXR1czogNDAzIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgZXJyb3I6ICdPQlMgc2V0dGluZ3Mgbm90IGZvdW5kLiBQbGVhc2UgY3JlYXRlIHNldHRpbmdzIGZpcnN0LicsXG4gICAgICAgICAgY29kZTogJ1NFVFRJTkdTX05PVF9GT1VORCdcbiAgICAgICAgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGVycm9yRGF0YSwgeyBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKCfinIUgQmFja2VuZCB1cGRhdGUgc3VjY2Vzc2Z1bCcpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihkYXRhLCB7IHN0YXR1czogMjAwIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIE9CUyBzZXR0aW5nczonLCBlcnJvcik7XG4gICAgXG4gICAgLy8gSGFuZGxlIHNwZWNpZmljIHBhcnNpbmcgZXJyb3JzXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnRmFpbGVkIHRvIHBhcnNlIHJlcXVlc3QgYm9keScpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdSZXF1ZXN0IHBheWxvYWQgaXMgdG9vIGxhcmdlIG9yIGludmFsaWQuIFBsZWFzZSBlbnN1cmUgZmlsZXMgYXJlIHVuZGVyIDEwTUIuJyxcbiAgICAgICAgY29kZTogJ1BBWUxPQURfVE9PX0xBUkdFJ1xuICAgICAgfSwgeyBzdGF0dXM6IDQxMyB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgT0JTIHNldHRpbmdzJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiQkFDS0VORF9VUkwiLCJwcm9jZXNzIiwiZW52IiwicGFyc2VCb2R5IiwicmVxdWVzdCIsImNvbnRlbnRUeXBlIiwiaGVhZGVycyIsImdldCIsImluY2x1ZGVzIiwiZm9ybURhdGEiLCJib2R5IiwiZW50cmllcyIsIkFycmF5IiwiZnJvbSIsImtleSIsInZhbHVlIiwiRmlsZSIsImFycmF5QnVmZmVyIiwiYmFzZTY0IiwiQnVmZmVyIiwidG9TdHJpbmciLCJuYW1lIiwidHlwZSIsInNpemUiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsImZpbGVFcnJvciIsImVycm9yIiwiRXJyb3IiLCJ0ZXh0IiwiSlNPTiIsInBhcnNlIiwicGFyc2VFcnJvciIsIkdFVCIsImF1dGhIZWFkZXIiLCJqc29uIiwic3RhdHVzIiwiaGVhbHRoQ2hlY2siLCJmZXRjaCIsIm1ldGhvZCIsImNvZGUiLCJzZXR0aW5nc1VybCIsInJlc3BvbnNlIiwic3RhdHVzVGV4dCIsInByb2ZpbGVSZXNwb25zZSIsIm9rIiwiZXJyb3JEYXRhIiwicHJvZmlsZURhdGEiLCJPYmplY3QiLCJrZXlzIiwidXNlcklkIiwidXNlciIsImlkIiwic3RyaW5naWZ5IiwiY3JlYXRlUmVzcG9uc2UiLCJzdHJlYW1lcklkIiwiaW1hZ2VTZXR0aW5ncyIsImVuYWJsZWQiLCJtZWRpYVR5cGUiLCJ3aWR0aCIsImhlaWdodCIsImJvcmRlclJhZGl1cyIsInNoYWRvdyIsInNoYWRvd0NvbG9yIiwic2hhZG93Qmx1ciIsInNoYWRvd09mZnNldFgiLCJzaGFkb3dPZmZzZXRZIiwic291bmRTZXR0aW5ncyIsInZvbHVtZSIsImZhZGVJbiIsImZhZGVPdXQiLCJsb29wIiwiYW5pbWF0aW9uU2V0dGluZ3MiLCJhbmltYXRpb25UeXBlIiwiZHVyYXRpb24iLCJlYXNpbmciLCJkaXJlY3Rpb24iLCJib3VuY2VJbnRlbnNpdHkiLCJ6b29tU2NhbGUiLCJzdHlsZVNldHRpbmdzIiwiYmFja2dyb3VuZENvbG9yIiwidGV4dENvbG9yIiwiYWNjZW50Q29sb3IiLCJib3JkZXJDb2xvciIsImJvcmRlcldpZHRoIiwiYm9yZGVyU3R5bGUiLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJmb250V2VpZ2h0IiwiZm9udFN0eWxlIiwidGV4dFNoYWRvdyIsInRleHRTaGFkb3dDb2xvciIsInRleHRTaGFkb3dCbHVyIiwidGV4dFNoYWRvd09mZnNldFgiLCJ0ZXh0U2hhZG93T2Zmc2V0WSIsInBvc2l0aW9uU2V0dGluZ3MiLCJ4IiwieSIsImFuY2hvciIsInpJbmRleCIsInJlc3BvbnNpdmUiLCJtb2JpbGVTY2FsZSIsImRpc3BsYXlTZXR0aW5ncyIsImZhZGVJbkR1cmF0aW9uIiwiZmFkZU91dER1cmF0aW9uIiwiYXV0b0hpZGUiLCJzaG93UHJvZ3Jlc3MiLCJwcm9ncmVzc0NvbG9yIiwicHJvZ3Jlc3NIZWlnaHQiLCJnZW5lcmFsU2V0dGluZ3MiLCJtYXhBbGVydHMiLCJhbGVydFNwYWNpbmciLCJjb29sZG93biIsInByaW9yaXR5IiwiaXNBY3RpdmUiLCJQT1NUIiwiUEFUQ0giLCJjb250ZW50TGVuZ3RoIiwidXJsIiwiYm9keVNpemUiLCJ3YXJuIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/obs-settings/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fobs-settings%2Froute&page=%2Fapi%2Fobs-settings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fobs-settings%2Froute.ts&appDir=D%3A%5Crepo%5Cxscan%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Crepo%5Cxscan%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();