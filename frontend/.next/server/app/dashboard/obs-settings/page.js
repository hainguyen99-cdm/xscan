(()=>{var e={};e.id=1668,e.ids=[1668],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},37849:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>d});var a=s(7),i=s(8533),r=s(29377),o=s.n(r),n=s(29799),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let d=["",{children:["dashboard",{children:["obs-settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,49470)),"D:\\repo\\xscan\\frontend\\src\\app\\dashboard\\obs-settings\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,44161)),"D:\\repo\\xscan\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,73472,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\repo\\xscan\\frontend\\src\\app\\dashboard\\obs-settings\\page.tsx"],u="/dashboard/obs-settings/page",m={require:s,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dashboard/obs-settings/page",pathname:"/dashboard/obs-settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19237:(e,t,s)=>{Promise.resolve().then(s.bind(s,22035))},22035:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U});var a=s(54714),i=s(77580),r=s(83446),o=s(46475),n=s(27114),l=s(31213),d=s(36834);let c=(0,d.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),u=(0,d.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var m=s(24012);let g=(0,d.Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var x=s(31999);let h=(0,d.Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),p=({isOpen:e,onClose:t,type:s,title:i,message:r,details:n,alertId:l,widgetUrl:d,connectedWidgets:p,testAlertSent:f})=>{if(!e)return null;let b=e=>{navigator.clipboard.writeText(e)};return a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity backdrop-blur-sm",onClick:t}),(0,a.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-auto border border-gray-200",onKeyDown:e=>{"Escape"===e.key&&t()},children:[a.jsx("div",{className:`${(()=>{switch(s){case"success":return"bg-gradient-to-r from-green-500 to-emerald-600";case"error":return"bg-gradient-to-r from-red-500 to-rose-600";case"warning":return"bg-gradient-to-r from-amber-500 to-orange-600";default:return"bg-gradient-to-r from-blue-500 to-indigo-600"}})()} text-white rounded-t-2xl p-6`,children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(()=>{switch(s){case"success":return a.jsx(c,{className:"w-8 h-8 text-green-500"});case"error":return a.jsx(u,{className:"w-8 h-8 text-red-500"});case"warning":return a.jsx(m.Z,{className:"w-8 h-8 text-amber-500"});default:return a.jsx(g,{className:"w-8 h-8 text-blue-500"})}})(),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:i}),a.jsx("p",{className:"text-white/90 text-sm mt-1",children:r})]})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[n&&(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-gray-50 border border-gray-200",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Details"}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:n})]}),l&&(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-blue-50 border border-blue-200",children:[(0,a.jsxs)("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[a.jsx("span",{children:"\uD83C\uDD94"}),"Alert ID"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("code",{className:"flex-1 text-sm bg-white p-2 rounded border border-blue-200 font-mono",children:l}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>b(l),className:"border-blue-200 text-blue-700 hover:bg-blue-50",children:a.jsx(x.Z,{className:"w-4 h-4"})})]})]}),d&&(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-green-50 border border-green-200",children:[(0,a.jsxs)("h4",{className:"font-semibold text-green-900 mb-2 flex items-center gap-2",children:[a.jsx("span",{children:"\uD83D\uDD17"}),"Widget URL"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("code",{className:"flex-1 text-sm bg-white p-2 rounded border border-green-200 font-mono break-all",children:d}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>b(d),className:"border-green-200 text-green-700 hover:bg-green-50",children:a.jsx(x.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>window.open(d,"_blank"),className:"border-green-200 text-green-700 hover:bg-green-50",children:a.jsx(h,{className:"w-4 h-4"})})]})]}),(void 0!==p||void 0!==f)&&(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-purple-50 border border-purple-200",children:[(0,a.jsxs)("h4",{className:"font-semibold text-purple-900 mb-2 flex items-center gap-2",children:[a.jsx("span",{children:"\uD83D\uDCCA"}),"Connection Status"]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[void 0!==p&&(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-700",children:"Connected widgets:"}),a.jsx("span",{className:"font-medium text-purple-900",children:p})]}),void 0!==f&&(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-700",children:"Test alert sent:"}),a.jsx("span",{className:`font-medium ${f?"text-green-600":"text-red-600"}`,children:f?"Yes":"No"})]})]})]}),"success"===s&&(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-amber-50 border border-amber-200",children:[(0,a.jsxs)("h4",{className:"font-semibold text-amber-900 mb-2 flex items-center gap-2",children:[a.jsx("span",{children:"\uD83D\uDCFA"}),"To see the alert:"]}),(0,a.jsxs)("ul",{className:"text-sm text-amber-800 space-y-1",children:[a.jsx("li",{children:"• Make sure you have the widget URL open in OBS Studio"}),a.jsx("li",{children:"• The widget must be visible in OBS"}),a.jsx("li",{children:"• Check your OBS Studio for the alert animation"}),a.jsx("li",{children:"• If you don't see the alert, check the OBS setup guide above"})]})]}),"error"===s&&(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-red-50 border border-red-200",children:[(0,a.jsxs)("h4",{className:"font-semibold text-red-900 mb-2 flex items-center gap-2",children:[a.jsx("span",{children:"\uD83D\uDD27"}),"Troubleshooting:"]}),(0,a.jsxs)("ul",{className:"text-sm text-red-800 space-y-1",children:[a.jsx("li",{children:"• Check if the backend is running"}),a.jsx("li",{children:"• Verify your authentication token"}),a.jsx("li",{children:"• Check browser console for more details"}),a.jsx("li",{children:"• Ensure OBS Studio is running and widget is visible"})]})]})]}),a.jsx("div",{className:"px-6 py-4 bg-gray-50 rounded-b-2xl flex justify-end",children:a.jsx(o.z,{onClick:t,className:"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:"Close"})})]})]})})},f=(0,d.Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),b=(0,d.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),y=(0,d.Z)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),v=(0,d.Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),j=(0,d.Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var S=s(21124);let N=(0,d.Z)("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);var w=s(65717);let k=(0,d.Z)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),z=({settings:e,onSave:t,onTest:s})=>{let[d,c]=(0,i.useState)({customization:{image:void 0,sound:void 0,text:{font:"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif",fontSize:16,color:"#ffffff",backgroundColor:"#1a1a1a",animation:"fade"},position:"top-right",duration:5}}),[u,m]=(0,i.useState)(!1),[g,x]=(0,i.useState)(null),[h,z]=(0,i.useState)(!1),[C,O]=(0,i.useState)(null),[D,T]=(0,i.useState)(!1),P=(0,i.useRef)(null),M=(0,i.useRef)(null),[R,A]=(0,i.useState)({isOpen:!1,type:"warning",title:"",message:""});(0,i.useEffect)(()=>{if(e){let t=e.customization||{image:e.imageSettings?.url?{url:e.imageSettings.url,type:e.imageSettings.mediaType,duration:5}:void 0,sound:e.soundSettings?.url?{url:e.soundSettings.url,volume:e.soundSettings.volume,duration:3}:void 0,text:{font:e.styleSettings?.fontFamily||"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif",fontSize:e.styleSettings?.fontSize||16,color:e.styleSettings?.textColor||"#ffffff",backgroundColor:e.styleSettings?.backgroundColor||"#1a1a1a",animation:e.animationSettings?.animationType||"fade"},position:e.positionSettings?.anchor||"top-right",duration:Math.round((e.displaySettings?.duration||5e3)/1e3)};c({customization:{...t,image:t.image||void 0,sound:t.sound||void 0,duration:Math.round((t.duration||5e3)/1e3)}})}},[e]),(0,i.useEffect)(()=>{x({donorName:"Test Donor",amount:25,currency:"VND",message:"This is a test alert message to preview your OBS configuration!",position:d.customization.position,animation:d.customization.text?.animation||"fade",image:d.customization.image,sound:d.customization.sound,duration:d.customization.duration,colors:{background:d.customization.text?.backgroundColor||"#1a1a1a",text:d.customization.text?.color||"#ffffff",accent:"#3b82f6"},fonts:{family:d.customization.text?.font||"Inter",size:d.customization.text?.fontSize||16,weight:"normal"}})},[d]);let B=(0,i.useCallback)((e,t)=>{c(s=>{let a={...s},i=e.split("."),r=a;for(let e=0;e<i.length-1;e++)r=r[i[e]];return r[i[i.length-1]]=t,a})},[]),F=(0,i.useCallback)((e,t)=>{if("image"===e){let e=new FileReader;e.onload=e=>{B("customization.image.url",e.target?.result)},e.readAsDataURL(t)}else if("sound"===e){let e=new FileReader;e.onload=e=>{B("customization.sound.url",e.target?.result)},e.readAsDataURL(t)}},[B]),L=async()=>{m(!0),O(null);try{let e={customization:{image:d.customization.image?.url?{url:d.customization.image.url,type:d.customization.image.type,duration:d.customization.image.duration}:void 0,sound:d.customization.sound?.url?{url:d.customization.sound.url,volume:d.customization.sound.volume,duration:d.customization.sound.duration}:void 0,text:d.customization.text,position:d.customization.position,duration:1e3*d.customization.duration}};await t(e),console.log("✅ OBS settings saved successfully"),O({type:"success",text:"✅ OBS settings saved successfully!"}),T(!0),setTimeout(()=>{O(null),T(!1)},5e3)}catch(t){console.error("❌ Failed to save OBS settings:",t);let e="Failed to save OBS settings. Please try again.";throw t instanceof Error&&(e=t.message.includes("413")||t.message.includes("Payload Too Large")?"File size too large. Please ensure all files are under 10MB.":t.message.includes("401")||t.message.includes("Unauthorized")?"Authentication required. Please log in again.":t.message.includes("403")||t.message.includes("Forbidden")?"Access denied. You do not have permission to save OBS settings.":t.message.includes("404")||t.message.includes("Not Found")?"OBS settings not found. Please create settings first.":t.message),O({type:"error",text:`❌ ${e}`}),T(!0),setTimeout(()=>{O(null),T(!1)},8e3),t}finally{m(!1)}},U=async()=>{if(e)try{let t={image:d.customization.image?.url?{url:d.customization.image.url,type:d.customization.image.type,duration:d.customization.image.duration}:void 0,sound:d.customization.sound?.url?{url:d.customization.sound.url,volume:d.customization.sound.volume,duration:d.customization.sound.duration}:void 0,text:d.customization.text,position:d.customization.position,duration:1e3*d.customization.duration};await s({...e,customization:t})}catch(e){console.error("Failed to test alert:",e)}},I=()=>{P.current&&d.customization.sound?.url&&(P.current.currentTime=0,P.current.play())};return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)(r.Zb,{className:"border-0 shadow-lg bg-white",children:[(0,a.jsxs)(r.Ol,{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-t-lg",children:[(0,a.jsxs)(r.ll,{className:"flex items-center gap-3 text-white",children:[a.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:a.jsx(f,{className:"w-5 h-5"})}),"Media Settings"]}),a.jsx(r.SZ,{className:"text-indigo-100",children:"Configure images, GIFs, videos, and sound for your alerts"})]}),(0,a.jsxs)(r.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Alert Media"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-6 bg-slate-50 hover:bg-slate-100 transition-colors duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:a.jsx(b,{className:"w-5 h-5 text-indigo-600"})}),a.jsx("div",{className:"flex-1",children:a.jsx(n.I,{type:"file",accept:"image/*,video/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>10485760){A({isOpen:!0,type:"warning",title:"File Too Large",message:"File size must be under 10MB.",details:"Please choose a smaller file to continue."});return}F("image",t);let e=t.type.startsWith("video/"),s="image/gif"===t.type;B("customization.image.type",e?"video":s?"gif":"image")}},className:"border-0 bg-transparent p-0 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-indigo-600 file:text-white hover:file:bg-indigo-700"})}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>B("customization.image.url",""),className:"border-slate-300 text-slate-600 hover:bg-slate-100",children:"Clear"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Maximum file size: 10MB. Supported formats: Images (JPG, PNG, GIF), Videos (MP4, WebM)"})]}),d.customization.image?.url&&(0,a.jsxs)("div",{className:"text-xs text-indigo-700 bg-indigo-50 p-3 rounded-lg border border-indigo-200",children:[a.jsx("strong",{children:"Current file:"})," ",d.customization.image.url.startsWith("data:")?`Base64 encoded (${Math.round(.75*d.customization.image.url.length/1024)}KB)`:d.customization.image.url]}),d.customization.image?.type==="video"&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{className:"text-sm font-medium text-slate-600",children:"Video Duration (seconds, max 10)"}),a.jsx(n.I,{type:"number",min:"1",max:"10",value:d.customization.image.duration||5,onChange:e=>B("customization.image.duration",parseInt(e.target.value)),className:"border-slate-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Alert Sound"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-6 bg-slate-50 hover:bg-slate-100 transition-colors duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:a.jsx(y,{className:"w-5 h-5 text-indigo-600"})}),a.jsx("div",{className:"flex-1",children:a.jsx(n.I,{type:"file",accept:"audio/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>10485760){A({isOpen:!0,type:"warning",title:"File Too Large",message:"File size must be under 10MB.",details:"Please choose a smaller file to continue."});return}F("sound",t)}},className:"border-0 bg-transparent p-0 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-indigo-600 file:text-white hover:file:bg-indigo-700"})}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:I,disabled:!d.customization.sound?.url,className:"border-indigo-300 text-indigo-600 hover:bg-indigo-50 disabled:opacity-50",children:a.jsx(v,{className:"w-4 h-4"})}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>B("customization.sound.url",""),className:"border-slate-300 text-slate-600 hover:bg-slate-100",children:"Clear"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Maximum file size: 10MB. Supported formats: MP3, WAV, OGG"})]}),d.customization.sound?.url&&(0,a.jsxs)("div",{className:"text-xs text-indigo-700 bg-indigo-50 p-3 rounded-lg border border-indigo-200",children:[a.jsx("strong",{children:"Current file:"})," ",d.customization.sound.url.startsWith("data:")?`Base64 encoded (${Math.round(.75*d.customization.sound.url.length/1024)}KB)`:d.customization.sound.url]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{className:"text-sm font-medium text-slate-600",children:"Volume"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(n.I,{type:"range",min:"0",max:"100",value:d.customization.sound?.volume||80,onChange:e=>B("customization.sound.volume",parseInt(e.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer slider"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full inline-block",children:[d.customization.sound?.volume||80,"%"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{className:"text-sm font-medium text-slate-600",children:"Duration (seconds, max 5)"}),a.jsx(n.I,{type:"number",min:"1",max:"5",value:d.customization.sound?.duration||3,onChange:e=>B("customization.sound.duration",parseInt(e.target.value)),className:"border-slate-200 focus:border-purple-300 focus:ring-2 focus:ring-purple-100"})]})]})]})]})]}),(0,a.jsxs)(r.Zb,{className:"border-0 shadow-lg bg-white",children:[(0,a.jsxs)(r.Ol,{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-t-lg",children:[(0,a.jsxs)(r.ll,{className:"flex items-center gap-3 text-white",children:[a.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:a.jsx(j,{className:"w-5 h-5"})}),"Display Settings"]}),a.jsx(r.SZ,{className:"text-emerald-100",children:"Customize how your alerts appear on screen"})]}),(0,a.jsxs)(r.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Animation Effect"}),a.jsx("select",{value:d.customization.text?.animation||"fade",onChange:e=>B("customization.text.animation",e.target.value),className:"w-full p-3 border border-slate-200 rounded-lg bg-white focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200",children:[{value:"none",label:"None"},{value:"fade",label:"Fade In/Out"},{value:"slide",label:"Slide In/Out"},{value:"bounce",label:"Bounce"}].map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Colors"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{className:"text-xs font-medium text-slate-600",children:"Background"}),a.jsx("div",{className:"relative",children:a.jsx(n.I,{type:"color",value:d.customization.text?.backgroundColor||"#1a1a1a",onChange:e=>B("customization.text.backgroundColor",e.target.value),className:"w-full h-12 border border-slate-200 rounded-lg cursor-pointer"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{className:"text-xs font-medium text-slate-600",children:"Text"}),a.jsx("div",{className:"relative",children:a.jsx(n.I,{type:"color",value:d.customization.text?.color||"#ffffff",onChange:e=>B("customization.text.color",e.target.value),className:"w-full h-12 border border-slate-200 rounded-lg cursor-pointer"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{className:"text-xs font-medium text-slate-600",children:"Accent"}),a.jsx("div",{className:"relative",children:a.jsx(n.I,{type:"color",value:d.customization.text?.color||"#ffffff",onChange:e=>B("customization.text.color",e.target.value),className:"w-full h-12 border border-slate-200 rounded-lg cursor-pointer"})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Typography"}),a.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-xs text-indigo-800",children:[a.jsx("strong",{children:"\uD83D\uDCA1 Tip:"}),' You can use any Google Font by typing its name (e.g., "Roboto", "Open Sans", "Lato"). The font will be automatically loaded from Google Fonts when used in your alerts.']})}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{className:"text-xs font-medium text-slate-600",children:"Font Family"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("select",{value:d.customization.text?.font||"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif",onChange:e=>B("customization.text.font",e.target.value),className:"w-full p-3 border border-slate-200 rounded-lg bg-white focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200 text-sm",children:["Inter","Arial","Helvetica","Verdana","Tahoma","Trebuchet MS","Arial Black","Impact","Franklin Gothic Medium","Gill Sans","Lucida Sans Unicode","Lucida Grande","Geneva","Segoe UI","Roboto","Open Sans","Lato","Source Sans Pro","Nunito","Poppins","Montserrat","Raleway","Ubuntu","PT Sans","Droid Sans","Liberation Sans","Work Sans","DM Sans","Manrope","Outfit","Plus Jakarta Sans","Figtree","Space Grotesk","Inter Tight","Sora","Epilogue","Cabinet Grotesk","Satoshi","Geist","SF Pro Display","SF Pro Text","Circular","Proxima Nova","Avenir","Futura","Gotham","Brandon Grotesque","Neue Haas Grotesk","Helvetica Neue","Times New Roman","Georgia","Times","Palatino","Book Antiqua","Garamond","Minion Pro","Baskerville","Hoefler Text","Bodoni MT","Didot","American Typewriter","Courier","Courier New","Monaco","Menlo","Consolas","Liberation Mono","PT Serif","Crimson Text","Lora","Merriweather","Playfair Display","Libre Baskerville","Source Serif Pro","Crimson Pro","Libre Baskerville","Lora","Merriweather","Playfair Display","PT Serif","Crimson Text","EB Garamond","Libre Caslon Text","Cormorant Garamond","Old Standard TT","Alegreya","Lusitana","Vollkorn","Crimson Pro","Source Serif 4","Fraunces","Recoleta","Charter","Iowan Old Style","Comic Sans MS","Papyrus","Chalkduster","Bradley Hand","Brush Script MT","Marker Felt","Trattatello","Zapfino","Snell Roundhand","Apple Chancery","Lucida Handwriting","Kalam","Caveat","Dancing Script","Pacifico","Lobster","Bebas Neue","Oswald","Anton","Fjalla One","Righteous","Fredoka One","Bebas Neue","Oswald","Anton","Fjalla One","Righteous","Fredoka One","Bungee","Bungee Shade","Creepster","Fascinate","Fascinate Inline","Faster One","Flamenco","Freckle Face","Frijole","Fruktur","Fugaz One","Gravitas One","Iceberg","Iceland","Jolly Lodger","Knewave","Lemon","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Love Ya Like A Sister","Luckiest Guy","Macondo","Macondo Swash Caps","Merienda","Merienda One","Metal","Metal Mania","Miltonian","Miltonian Tattoo","Miniver","Monofett","Monoton","Mountains of Christmas","Mouse Memoirs","Mystery Quest","Nerko One","New Rocker","Nosifer","Notable","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Orbitron","Oregano","Original Surfer","Overlock","Overlock SC","Ovo","Oxanium","Oxygen","Oxygen Mono","PT Mono","Pacifico","Padauk","Palanquin","Palanquin Dark","Pangolin","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Pattaya","Patua One","Pavanam","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Potta One","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Pridi","Princess Sofia","Prociono","Prompt","Prosto One","Proza Libre","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Rakkas","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rasa","Rationale","Ravi Prakash","Recursive","Red Hat Display","Red Hat Mono","Red Hat Text","Red Rose","Redressed","Reem Kufi","Reenie Beanie","Reggae One","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","RocknRoll One","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rowdies","Rozha One","Rubik","Rubik Beastly","Rubik Bubbles","Rubik Glitch","Rubik Microbe","Rubik Mono One","Rubik Moonrocks","Rubik Puddles","Rubik Wet Paint","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Saira","Saira Condensed","Saira Extra Condensed","Saira Semi Condensed","Saira Stencil One","Salsa","Sanchez","Sancreek","Sansita","Sansita Swashed","Sarabun","Sarala","Sarina","Sarpanch","Satisfy","Sawarabi Gothic","Sawarabi Mincho","Scada","Scheherazade New","Schoolbell","Scope One","Seaweed Script","Secular One","Sedgwick Ave","Sedgwick Ave Display","Sen","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shippori Antique","Shippori Antique B1","Shippori Mincho","Shippori Mincho B1","Shizuru","Shojumaru","Short Stack","Shrikhand","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Single Day","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smooch","Smooch Sans","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Solway","Song Myung","Sonsie One","Sora","Sorts Mill Goudy","Source Code Pro","Source Sans 3","Source Sans Pro","Source Serif 4","Source Serif Pro","Space Grotesk","Space Mono","Special Elite","Spectral","Spectral SC","Spicy Rice","Spinnaker","Spirax","Squada One","Square Peg","Sree Krushnadevaraya","Sriracha","Srisakdi","Staatliches","Stalemate","Stalinist One","Stardos Stencil","Stick","Stick No Bills","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Style Script","Stylish","Sue Ellen Francisco","Suez One","Sulphur Point","Sumana","Sunflower","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Syne","Syne Mono","Syne Tactile","Tajawal","Tangerine","Taprom","Tauri","Taviraj","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","Texturina","Thasadith","The Girl Next Door","The Nautigal","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Tomorrow","Tourney","Trade Winds","Train One","Trirong","Trispace","Trocchi","Trochut","Truculenta","Trykker","Tulpen One","Turret Road","Twinkle Star","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Uchen","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","Updock","Urbanist","VT323","Vampiro One","Varela","Varela Round","Varta","Vast Shadow","Vazirmatn","Vesper Libre","Viaoda Libre","Vibes","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Vollkorn SC","Voltaire","Vujahday Script","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Water Brush","Waterfall","Wellfleet","Wendy One","Whisper","WindSong","Wire One","Work Sans","Xanh Mono","Yaldevi","Yanone Kaffeesatz","Yantramanav","Yatra One","Yellowtail","Yeon Sung","Yeseva One","Yesteryear","Yomogi","Yrsa","Yuji Boku","Yuji Mai","Yuji Syuku","Yusei Magic","ZCOOL KuaiLe","ZCOOL QingKe HuangYou","ZCOOL XiaoWei","Zen Antique","Zen Antique Soft","Zen Dots","Zen Kaku Gothic Antique","Zen Kaku Gothic New","Zen Kurenaido","Zen Loop","Zen Maru Gothic","Zen Old Mincho","Zen Tokyo Zoo","Zeyada","Zhi Mang Xing","Zilla Slab","Zilla Slab Highlight","Courier New","Monaco","Menlo","Consolas","Liberation Mono","DejaVu Sans Mono","Bitstream Vera Sans Mono","Andale Mono","Lucida Console","Monaco","Fixed","Fira Code","JetBrains Mono","Source Code Pro","Roboto Mono","Space Mono","Ubuntu Mono","PT Mono","Inconsolata","Anonymous Pro","Cascadia Code","-apple-system","BlinkMacSystemFont","system-ui","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue","sans-serif"].map(e=>a.jsx("option",{value:e,children:e},e))}),a.jsx(n.I,{type:"text",placeholder:"Or type a custom font name (e.g., 'Roboto', 'Open Sans')",value:d.customization.text?.font||"",onChange:e=>B("customization.text.font",e.target.value),className:"text-xs border-slate-200 focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{className:"text-xs font-medium text-slate-600",children:"Size (px)"}),a.jsx(n.I,{type:"number",min:"8",max:"48",value:d.customization.text?.fontSize||16,onChange:e=>B("customization.text.fontSize",parseInt(e.target.value)),className:"border-slate-200 focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{className:"text-xs font-medium text-slate-600",children:"Weight"}),(0,a.jsxs)("select",{value:d.customization.text?.font||"Inter",onChange:e=>B("customization.text.font",e.target.value),className:"w-full p-3 border border-slate-200 rounded-lg bg-white focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200 text-sm",children:[a.jsx("option",{value:"normal",children:"Normal"}),a.jsx("option",{value:"bold",children:"Bold"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Position"}),a.jsx("select",{value:d.customization.position,onChange:e=>B("customization.position",e.target.value),className:"w-full p-3 border border-slate-200 rounded-lg bg-white focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200",children:[{value:"top-left",label:"Top Left"},{value:"top-right",label:"Top Right"},{value:"bottom-left",label:"Bottom Left"},{value:"bottom-right",label:"Bottom Right"},{value:"center",label:"Center"}].map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Display Duration (seconds)"}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(n.I,{type:"range",min:"5",max:"15",step:"1",value:d.customization.duration,onChange:e=>B("customization.duration",parseInt(e.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer slider"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-slate-600",children:[a.jsx("span",{className:"font-medium",children:"5s"}),(0,a.jsxs)("span",{className:"font-bold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full",children:[d.customization.duration," seconds"]}),a.jsx("span",{className:"font-medium",children:"15s"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[a.jsx(o.z,{onClick:L,disabled:u,className:`flex-1 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${u?"animate-pulse":""}`,children:u?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving Configuration..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(S.Z,{className:"w-4 h-4 mr-2"}),"Save Configuration"]})}),(0,a.jsxs)(o.z,{variant:"outline",onClick:U,disabled:!e,className:"flex-1 border-indigo-200 text-indigo-700 hover:bg-indigo-50 hover:border-indigo-300 transition-all duration-200",children:[a.jsx(N,{className:"w-4 h-4 mr-2"}),"Test Alert"]})]}),C&&a.jsx("div",{className:`mt-4 p-4 rounded-xl border-2 shadow-lg animate-fade-in ${"success"===C.type?"bg-gradient-to-r from-green-50 to-emerald-50 text-green-900 border-green-300":"bg-gradient-to-r from-red-50 to-rose-50 text-red-900 border-red-300"}`,children:(0,a.jsxs)("div",{className:"flex items-center",children:["success"===C.type?a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3",children:a.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}):a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3",children:a.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-sm",children:C.text}),"success"===C.type&&a.jsx("p",{className:"text-xs text-green-700 mt-1",children:"Your configuration is now active and ready to use!"}),"error"===C.type&&a.jsx("p",{className:"text-xs text-red-700 mt-1",children:"Please check your settings and try again."})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)(r.Zb,{className:"border-0 shadow-lg bg-white",children:[(0,a.jsxs)(r.Ol,{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-t-lg",children:[(0,a.jsxs)(r.ll,{className:"flex items-center gap-3 text-white",children:[a.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:a.jsx(w.Z,{className:"w-5 h-5"})}),"Live Preview"]}),a.jsx(r.SZ,{className:"text-amber-100",children:"See how your alerts will look in real-time"})]}),(0,a.jsxs)(r.aY,{children:[a.jsx("div",{className:"mb-6",children:a.jsx(o.z,{variant:"outline",onClick:()=>z(!h),className:"w-full border-indigo-200 text-indigo-700 hover:bg-indigo-50 hover:border-indigo-300 transition-all duration-200",children:h?"Hide Preview":"Show Preview"})}),h&&g&&(0,a.jsxs)("div",{className:"relative border-2 border-dashed border-amber-200 rounded-xl p-6 min-h-[300px] bg-gradient-to-br from-amber-50 to-orange-50 shadow-inner",children:[(0,a.jsxs)("div",{className:`absolute transition-all duration-500 ${"fade"===g.animation?"animate-fade-in":"slide"===g.animation?"animate-slide-in":"bounce"===g.animation?"animate-bounce":""}`,style:{left:"center"===g.position?"50%":"top-left"===g.position||"bottom-left"===g.position?"20px":void 0,top:"center"===g.position?"50%":"top-left"===g.position||"top-right"===g.position?"20px":void 0,right:"top-right"===g.position||"bottom-right"===g.position?"20px":void 0,bottom:"bottom-left"===g.position||"bottom-right"===g.position?"20px":void 0,transform:"center"===g.position?"translate(-50%, -50%)":void 0,backgroundColor:g.colors.background,color:g.colors.text,fontFamily:g.fonts.family,fontSize:`${g.fonts.size}px`,fontWeight:g.fonts.weight,maxWidth:"300px",padding:"16px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1e3},children:[g.image?.url&&a.jsx("div",{className:"mb-3",children:"video"===g.image.type?a.jsx("video",{ref:M,src:g.image.url,className:"w-full h-20 object-cover rounded",muted:!0,loop:!0}):a.jsx("img",{src:g.image.url,alt:"Alert media",className:"w-full h-20 object-cover rounded"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-semibold",children:g.donorName}),(0,a.jsxs)("span",{className:"text-lg font-bold",style:{color:g.colors.accent},children:["$",g.amount]})]}),g.message&&a.jsx("p",{className:"text-sm opacity-90",children:g.message})]})]}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-4 space-x-2",children:[g.image?.type==="video"&&(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>{M.current&&d.customization.image?.url&&"video"===d.customization.image.type&&(M.current.currentTime=0,M.current.play())},children:[a.jsx(v,{className:"w-4 h-4 mr-1"}),"Play Video"]}),g.sound?.url&&(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:I,children:[a.jsx(k,{className:"w-4 h-4 mr-1"}),"Play Sound"]})]})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-br from-amber-50 to-orange-50 rounded-xl border border-amber-200",children:[(0,a.jsxs)("h4",{className:"font-semibold text-amber-900 mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:"\uD83D\uDCCA"}),"Preview Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm text-amber-800",children:[(0,a.jsxs)("div",{className:"bg-white/50 p-2 rounded-lg",children:[a.jsx("span",{className:"font-medium",children:"Donor:"})," ",g?.donorName]}),(0,a.jsxs)("div",{className:"bg-white/50 p-2 rounded-lg",children:[a.jsx("span",{className:"font-medium",children:"Amount:"})," $",g?.amount," ",g?.currency]}),(0,a.jsxs)("div",{className:"bg-white/50 p-2 rounded-lg",children:[a.jsx("span",{className:"font-medium",children:"Animation:"})," ",d.customization.text?.animation||"fade"]}),(0,a.jsxs)("div",{className:"bg-white/50 p-2 rounded-lg",children:[a.jsx("span",{className:"font-medium",children:"Position:"})," ",d.customization.position]}),(0,a.jsxs)("div",{className:"bg-white/50 p-2 rounded-lg col-span-2",children:[a.jsx("span",{className:"font-medium",children:"Duration:"})," ",d.customization.duration,"s"]})]})]})]})]}),e&&(0,a.jsxs)(r.Zb,{className:"border-0 shadow-lg bg-white",children:[(0,a.jsxs)(r.Ol,{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-t-lg",children:[(0,a.jsxs)(r.ll,{className:"flex items-center gap-3 text-white",children:[a.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),"Widget Information"]}),a.jsx(r.SZ,{className:"text-green-100",children:"Use this URL in your OBS browser source"})]}),(0,a.jsxs)(r.aY,{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(l._,{className:"text-sm font-semibold text-green-800 mb-2 block",children:"Widget URL"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(n.I,{value:e.widgetUrl,readOnly:!0,className:"font-mono text-sm bg-white/70 border-green-200 focus:border-green-300"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>navigator.clipboard.writeText(e.widgetUrl),className:"border-indigo-200 text-indigo-700 hover:bg-indigo-50 hover:border-indigo-300 transition-all duration-200",children:"Copy"})]})]}),(0,a.jsxs)("div",{children:[a.jsx(l._,{className:"text-sm font-semibold text-green-800 mb-2 block",children:"Alert Token"}),a.jsx(n.I,{value:e.alertToken,readOnly:!0,className:"font-mono text-sm bg-white/70 border-green-200 focus:border-green-300"})]})]})]})]}),a.jsx("audio",{ref:P,src:d.customization.sound?.url}),a.jsx("video",{ref:M,src:d.customization.image?.url,muted:!0}),a.jsx(p,{isOpen:R.isOpen,onClose:()=>A(e=>({...e,isOpen:!1})),type:R.type,title:R.title,message:R.message,details:R.details}),D&&C&&a.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full transform transition-all duration-300 ease-in-out ${D?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:a.jsx("div",{className:`p-4 rounded-lg shadow-lg border-l-4 ${"success"===C.type?"bg-indigo-50 border-indigo-400 text-indigo-800":"bg-red-50 border-red-400 text-red-800"}`,children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:"success"===C.type?a.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):a.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm font-medium",children:C.text})}),a.jsx("div",{className:"ml-auto pl-3",children:a.jsx("button",{onClick:()=>{T(!1),O(null)},className:`inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 ${"success"===C.type?"text-indigo-500 hover:bg-indigo-100 focus:ring-indigo-600":"text-red-500 hover:bg-red-100 focus:ring-red-600"}`,children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})})})]})},C=({settings:e,isVisible:t,onClose:s})=>{let[n,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)({donorName:"Test Donor",amount:25,currency:"VND",message:"This is a test alert message!"});return((0,i.useEffect)(()=>{if(t){let e=setTimeout(()=>{l(!0)},500);return()=>clearTimeout(e)}},[t]),(0,i.useEffect)(()=>{if(n){let t=setTimeout(()=>{l(!1),s()},1e3*(e.customization.duration||8));return()=>clearTimeout(t)}},[n,e.customization.duration,s]),t)?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)(r.Zb,{className:"w-96 max-w-[90vw]",children:[(0,a.jsxs)(r.Ol,{children:[a.jsx(r.ll,{children:"OBS Widget Demo"}),a.jsx(r.SZ,{children:"This is how your alert will appear in OBS"})]}),(0,a.jsxs)(r.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"border-2 border-gray-300 rounded-lg p-4 bg-gray-100 min-h-[200px] relative",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"OBS Browser Source Preview"}),n&&(0,a.jsxs)("div",{className:`absolute transition-all duration-500 ${e.customization.text?.animation==="fade"?"animate-fade-in":e.customization.text?.animation==="slide"?"animate-slide-in":e.customization.text?.animation==="bounce"?"animate-bounce":""}`,style:{left:"top-left"===e.customization.position||"bottom-left"===e.customization.position?"20px":void 0,top:"top-left"===e.customization.position||"top-right"===e.customization.position?"20px":void 0,right:"top-right"===e.customization.position||"bottom-right"===e.customization.position?"20px":void 0,bottom:"bottom-left"===e.customization.position||"bottom-right"===e.customization.position?"20px":void 0,backgroundColor:e.customization.text?.backgroundColor||"#1a1a1a",color:e.customization.text?.color||"#ffffff",fontFamily:e.customization.text?.font||"Inter",fontSize:`${e.customization.text?.fontSize||16}px`,fontWeight:"normal",maxWidth:"250px",padding:"12px",borderRadius:"6px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",zIndex:1e3},children:[e.customization.image?.url&&a.jsx("div",{className:"mb-2",children:"video"===e.customization.image.type?a.jsx("video",{src:e.customization.image.url,className:"w-full h-16 object-cover rounded",muted:!0,autoPlay:!0,loop:!0}):a.jsx("img",{src:e.customization.image.url,alt:"Alert media",className:"w-full h-16 object-cover rounded"})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-semibold text-sm",children:d.donorName}),(0,a.jsxs)("span",{className:"text-base font-bold",style:{color:"#3b82f6"},children:["$",d.amount]})]}),d.message&&a.jsx("p",{className:"text-xs opacity-90",children:d.message})]})]}),!n&&a.jsx("div",{className:"text-center text-gray-500 py-8",children:"Alert will appear here..."})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(o.z,{onClick:()=>{l(!1),setTimeout(()=>l(!0),100)},className:"flex-1",children:"Replay Alert"}),a.jsx(o.z,{variant:"outline",onClick:s,className:"flex-1",children:"Close Demo"})]}),(0,a.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2 text-sm",children:"Widget Information"}),(0,a.jsxs)("div",{className:"text-xs text-blue-800 space-y-1",children:[(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"URL:"})," ",e.widgetUrl]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Token:"})," ",e.alertToken]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Duration:"})," ",e.customization.duration,"s"]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Position:"})," ",e.customization.position]})]})]})]})]})}):null};var O=s(4686);let D=(0,d.Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var T=s(21102);let P=({settings:e})=>{let[t,s]=(0,i.useState)({donorName:"Test Donor",amount:"25.00",message:"This is a test alert with custom data!",useCurrentSettings:!0}),[d,c]=(0,i.useState)(!1),[u,m]=(0,i.useState)(!1),[g,x]=(0,i.useState)({isOpen:!1,type:"info",title:"",message:""}),h=(e,t)=>{s(s=>({...s,[e]:t}))},f=async()=>{try{c(!0);let e=(0,T.hV)();if(!e){x({isOpen:!0,type:"error",title:"Authentication Required",message:"Please log in again to test alerts.",details:"Your authentication token is missing or expired."});return}console.log("\uD83E\uDDEA Triggering test alert with custom data..."),console.log("\uD83D\uDCCA Test Data:",t);let s=await fetch("/api/obs-settings/test-alert",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({donorName:t.donorName,amount:t.amount,message:t.message,useCurrentSettings:t.useCurrentSettings})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to send test alert")}let a=await s.json();console.log("✅ Test alert result:",a),a.success?x({isOpen:!0,type:"success",title:"Test Alert Sent Successfully!",message:a.message,details:`Test Data Used:
• Donor: ${t.donorName}
• Amount: $${t.amount}
• Message: ${t.message}

Your test alert has been sent and should appear in OBS Studio if properly configured.`,alertId:a.alertId,widgetUrl:a.widgetUrl}):x({isOpen:!0,type:"error",title:"Test Alert Failed",message:a.message,details:"The test alert could not be sent. Please check your configuration and try again."})}catch(e){console.error("\uD83D\uDCA5 Failed to test alert:",e),x({isOpen:!0,type:"error",title:"Test Alert Failed",message:"Failed to send test alert",details:e instanceof Error?e.message:"Unknown error occurred"})}finally{c(!1)}},b=e=>{let t={small:{donorName:"Small Supporter",amount:"5.00",message:"Thanks for the small donation! \uD83D\uDC95"},medium:{donorName:"Medium Supporter",amount:"25.00",message:"Awesome medium donation! \uD83C\uDF89"},large:{donorName:"Big Supporter",amount:"100.00",message:"WOW! Thank you for the big donation! \uD83D\uDE80"},anonymous:{donorName:"Anonymous Donor",amount:"15.00",message:"Anonymous donation received! \uD83C\uDFAD"}}[e];s(e=>({...e,...t})),setTimeout(()=>{f()},100)};return(0,a.jsxs)("div",{children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsxs)(r.ll,{className:"flex items-center gap-2",children:[a.jsx(N,{className:"w-5 h-5"}),"Test Alert with Custom Data"]}),a.jsx(r.SZ,{children:"Test your OBS alerts with custom donor information and messages"})]}),(0,a.jsxs)(r.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx(l._,{className:"text-sm font-medium mb-3 block",children:"Quick Test Presets"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>b("small"),disabled:d,className:"text-xs",children:"\uD83D\uDC95 Small ($5)"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>b("medium"),disabled:d,className:"text-xs",children:"\uD83C\uDF89 Medium ($25)"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>b("large"),disabled:d,className:"text-xs",children:"\uD83D\uDE80 Large ($100)"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>b("anonymous"),disabled:d,className:"text-xs",children:"\uD83C\uDFAD Anonymous ($15)"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(l._,{className:"text-sm font-medium",children:"Custom Test Data"}),(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>m(!u),className:"text-xs",children:[a.jsx(j,{className:"w-3 h-3 mr-1"}),u?"Hide":"Show"," Advanced"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx(l._,{htmlFor:"donorName",className:"text-sm",children:"Donor Name"}),a.jsx(n.I,{id:"donorName",value:t.donorName,onChange:e=>h("donorName",e.target.value),placeholder:"Enter donor name",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx(l._,{htmlFor:"amount",className:"text-sm",children:"Amount ($)"}),a.jsx(n.I,{id:"amount",type:"number",step:"0.01",min:"0.01",value:t.amount,onChange:e=>h("amount",e.target.value),placeholder:"25.00",className:"mt-1"})]})]}),(0,a.jsxs)("div",{children:[a.jsx(l._,{htmlFor:"message",className:"text-sm",children:"Message"}),a.jsx(O.g,{id:"message",value:t.message,onChange:e=>h("message",e.target.value),placeholder:"Enter a custom message for the test alert",rows:3,className:"mt-1"})]}),u&&(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"useCurrentSettings",checked:t.useCurrentSettings,onChange:e=>h("useCurrentSettings",e.target.checked),className:"rounded"}),a.jsx(l._,{htmlFor:"useCurrentSettings",className:"text-sm",children:"Use current OBS settings for this test"})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"When checked, the test will use your current OBS configuration. When unchecked, it will use default settings."})]})]}),(0,a.jsxs)(o.z,{onClick:f,disabled:d||!t.donorName||!t.amount,className:"w-full",size:"lg",children:[a.jsx(D,{className:"w-4 h-4 mr-2"}),d?"Sending Test Alert...":"Send Test Alert with Custom Data"]}),(0,a.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCA1 How to Use:"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsxs)("li",{children:["• ",a.jsx("strong",{children:"Quick Test:"})," Use the preset buttons for common test scenarios"]}),(0,a.jsxs)("li",{children:["• ",a.jsx("strong",{children:"Custom Data:"})," Fill in the form above to test with specific donor information"]}),(0,a.jsxs)("li",{children:["• ",a.jsx("strong",{children:"OBS Setup:"})," Make sure your OBS widget is connected and visible"]}),(0,a.jsxs)("li",{children:["• ",a.jsx("strong",{children:"Real-time:"})," The alert will appear in OBS immediately when sent"]})]})]})]})]}),a.jsx(p,{isOpen:g.isOpen,onClose:()=>x(e=>({...e,isOpen:!1})),type:g.type,title:g.title,message:g.message,details:g.details,alertId:g.alertId,widgetUrl:g.widgetUrl})]})};var M=s(19950),R=s(31812),A=s(88934),B=s(90368);let F=e=>({_id:e._id,streamerId:e.streamerId,alertToken:e.alertToken,widgetUrl:e.widgetUrl||"",imageSettings:e.imageSettings||{enabled:!0,mediaType:"image",width:300,height:200,borderRadius:8,shadow:!0,shadowColor:"#000000",shadowBlur:10,shadowOffsetX:2,shadowOffsetY:2},soundSettings:e.soundSettings||{enabled:!0,volume:80,fadeIn:0,fadeOut:0,loop:!1},animationSettings:e.animationSettings||{enabled:!0,animationType:"fade",duration:500,easing:"ease-out",direction:"right",bounceIntensity:20,zoomScale:1.2},styleSettings:e.styleSettings||{backgroundColor:"#1a1a1a",textColor:"#ffffff",accentColor:"#00ff00",borderColor:"#333333",borderWidth:2,borderStyle:"solid",fontFamily:"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif",fontSize:16,fontWeight:"normal",fontStyle:"normal",textShadow:!0,textShadowColor:"#000000",textShadowBlur:3,textShadowOffsetX:1,textShadowOffsetY:1},positionSettings:e.positionSettings||{x:100,y:100,anchor:"top-left",zIndex:1e3,responsive:!0,mobileScale:.8},displaySettings:e.displaySettings||{duration:5e3,fadeInDuration:300,fadeOutDuration:300,autoHide:!0,showProgress:!1,progressColor:"#00ff00",progressHeight:3},generalSettings:e.generalSettings||{enabled:!0,maxAlerts:3,alertSpacing:20,cooldown:1e3,priority:"medium"},isActive:e.isActive||!0,lastUsedAt:e.lastUsedAt,totalAlerts:e.totalAlerts||0,createdAt:e.createdAt,updatedAt:e.updatedAt,customization:{image:e.imageSettings?.url?{url:e.imageSettings.url,type:e.imageSettings.mediaType,duration:5}:void 0,sound:e.soundSettings?.url?{url:e.soundSettings.url,volume:e.soundSettings.volume,duration:3}:void 0,text:{font:e.styleSettings?.fontFamily||"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif",fontSize:e.styleSettings?.fontSize||16,color:e.styleSettings?.textColor||"#ffffff",backgroundColor:e.styleSettings?.backgroundColor||"#1a1a1a",animation:e.animationSettings?.animationType||"fade"},position:e.positionSettings?.anchor||"top-right",duration:Math.round((e.displaySettings?.duration||5e3)/1e3)}}),L=["streamer","admin"];function U(){let[e,t]=(0,i.useState)(null),[s,r]=(0,i.useState)(!1),[n,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)(!0),[u,m]=(0,i.useState)(!1),[g,x]=(0,i.useState)(null),[h,f]=(0,i.useState)(null),[b,y]=(0,i.useState)(!0),[v,j]=(0,i.useState)({isOpen:!1,type:"info",title:"",message:""}),{user:S,isAuthenticated:k,initializeAuth:O}=(0,R.qr)(),D=(0,A.useRouter)(),U=async()=>{try{if(S&&S.role){if(f(S.role),!L.includes(S.role)){m(!0),x(`Access denied. OBS settings are only available for streamers and administrators. Your current role is: ${S.role}.`),y(!1),c(!1);return}let e=(0,T.hV)();e?(y(!1),I(e)):(m(!0),x("Authentication token missing. Please log in again."),y(!1),c(!1));return}let e=(0,T.hV)();if(!e){m(!0),x("Authentication required. Please log in to access OBS settings."),y(!1),c(!1);return}let t=setTimeout(()=>{m(!0),x("Role verification timed out. Please try refreshing the page."),y(!1),c(!1)},1e4),s=await fetch("/api/auth/profile",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(clearTimeout(t),s.ok){let t=await s.json();if(!t.role){m(!0),x("User profile is missing role information. Please contact support."),y(!1),c(!1);return}if(f(t.role),!L.includes(t.role)){m(!0),x(`Access denied. OBS settings are only available for streamers and administrators. Your current role is: ${t.role}.`),y(!1),c(!1);return}y(!1),I(e)}else{let e=await s.json();m(!0),x(`Failed to verify user permissions: ${e.error||"Unknown error"}. Please try logging in again.`),y(!1),c(!1)}}catch(e){m(!0),x(`Error verifying user permissions: ${e instanceof Error?e.message:"Unknown error"}. Please try again.`),y(!1),c(!1)}};(0,i.useEffect)(()=>{k&&S?U():O().then(()=>{U()})},[k,S,O]);let I=async e=>{try{let s=await fetch("/api/obs-settings",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){let e=await s.json();console.log("\uD83D\uDCE6 Raw OBS settings response:",e);let a=F(e);console.log("\uD83D\uDD04 Converted settings:",a),t(a),m(!1),x(null)}else{let e=await s.json();403===s.status?(m(!0),x("Access denied. OBS settings are only available for streamers and administrators. Please contact support if you believe this is an error.")):x(`Failed to load OBS settings: ${e.error||"Unknown error"}`)}}catch(e){x("Failed to load OBS settings. Please try again.")}finally{c(!1)}},Z=async e=>{r(!0);try{let s=(0,T.hV)();if(!s)throw Error("Authentication required. Please log in again.");console.log("\uD83D\uDCBE Saving OBS settings..."),console.log("\uD83D\uDCDD Settings to save:",e);let a=await fetch("/api/obs-settings",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to save OBS settings")}let i=await a.json();console.log("✅ OBS settings saved successfully:",i),t(t=>t?{...t,customization:{...t.customization,...e.customization},updatedAt:new Date().toISOString()}:t),j({isOpen:!0,type:"success",title:"Settings Saved Successfully!",message:"Your OBS settings have been saved and are ready to use.",details:"You can now test your configuration or add it to OBS Studio."})}catch(e){throw console.error("❌ Failed to save OBS settings:",e),j({isOpen:!0,type:"error",title:"Failed to Save Settings",message:e instanceof Error?e.message:"Failed to save settings. Please try again.",details:"Please check your configuration and try again. If the problem persists, contact support."}),e}finally{r(!1)}},W=async e=>{try{let t=(0,T.hV)();if(!t){j({isOpen:!0,type:"error",title:"Authentication Required",message:"Please log in again to test alerts.",details:"Your authentication token is missing or expired."});return}console.log("\uD83E\uDDEA Triggering test alert..."),console.log("\uD83D\uDCFA OBS Settings:",e);let s=await fetch("/api/obs-settings/test-alert",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({donorName:"Test Donor",amount:"25.00",message:"This is a test alert from the OBS settings page!",useCurrentSettings:!0})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to send test alert")}let a=await s.json();console.log("✅ Test alert result:",a),a.success?j({isOpen:!0,type:"success",title:"Test Alert Sent Successfully!",message:a.message,details:"Your test alert has been sent and should appear in OBS Studio if properly configured.",alertId:a.alertId,widgetUrl:a.widgetUrl}):j({isOpen:!0,type:"error",title:"Test Alert Failed",message:a.message,details:"The test alert could not be sent. Please check your configuration and try again."})}catch(e){console.error("\uD83D\uDCA5 Failed to test alert:",e),j({isOpen:!0,type:"error",title:"Test Alert Failed",message:"Failed to send test alert",details:e instanceof Error?e.message:"Unknown error occurred"})}},q=async()=>{try{let t=(0,T.hV)();if(!t){j({isOpen:!0,type:"error",title:"Authentication Required",message:"Please log in again to test connection.",details:"Your authentication token is missing or expired."});return}console.log("\uD83D\uDD0D Testing widget connection...");let s=await fetch("/api/obs-settings/test-connection",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to test connection")}let a=await s.json();console.log("\uD83D\uDD0D Connection test result:",a),a.success?j({isOpen:!0,type:"success",title:"Widget Connection Test Successful!",message:a.message,details:"Your OBS widget is properly connected and ready to receive alerts!",connectedWidgets:a.connectedWidgets,testAlertSent:a.testAlertSent,widgetUrl:e?.widgetUrl}):j({isOpen:!0,type:"warning",title:"Widget Connection Test Failed",message:a.message,details:"To fix this:\n1. Copy the Widget URL from the configuration panel\n2. Add it as a Browser Source in OBS Studio\n3. Make sure the widget is visible in OBS\n4. Try the connection test again",connectedWidgets:a.connectedWidgets,widgetUrl:e?.widgetUrl})}catch(e){console.error("\uD83D\uDCA5 Failed to test connection:",e),j({isOpen:!0,type:"error",title:"Connection Test Failed",message:"Failed to test connection",details:e instanceof Error?e.message:"Unknown error occurred"})}};return b||d?a.jsx("div",{className:"container mx-auto px-4 py-4 py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading OBS settings..."})]})}):u?a.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto text-center",children:[a.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"\uD83D\uDEAB"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600 mb-6",children:g}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(o.z,{onClick:()=>{m(!1),x(null),y(!0),O().then(()=>{U()})},variant:"outline",size:"sm",className:"w-full",children:"Try Again"}),a.jsx(o.z,{onClick:()=>D.push("/dashboard"),variant:"outline",size:"sm",className:"w-full",children:"Back to Dashboard"})]})]})}):a.jsx(B.Z,{children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-indigo-600 to-cyan-500 rounded-xl shadow-lg",children:a.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-cyan-600 bg-clip-text text-transparent",children:"OBS Alert Settings"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Configure donation alerts for your stream"})]})]}),g&&!u&&a.jsx("div",{className:"mt-6 bg-amber-50 border border-amber-200 rounded-xl p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-amber-800 font-medium",children:g})})]})})]}),a.jsx("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)(o.z,{onClick:()=>l(!0),className:"bg-gradient-to-r from-indigo-600 to-cyan-600 hover:from-indigo-700 hover:to-cyan-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:[a.jsx(w.Z,{className:"w-4 h-4"}),"Preview Widget"]}),(0,a.jsxs)(o.z,{onClick:()=>window.open("/widget/alert/test","_blank"),variant:"outline",className:"border-indigo-200 text-indigo-700 hover:bg-indigo-50 hover:border-indigo-300 transition-all duration-200 flex items-center gap-2",children:[a.jsx(N,{className:"w-4 h-4"}),"Test Widget"]}),(0,a.jsxs)(o.z,{onClick:q,variant:"outline",className:"border-green-200 text-green-700 hover:bg-green-50 hover:border-green-300 transition-all duration-200 flex items-center gap-2",children:[a.jsx(M.Z,{className:"w-4 h-4"}),"Test Connection"]})]})}),(0,a.jsxs)("div",{className:"mb-8 bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 px-6 py-4",children:(0,a.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx("span",{className:"mr-3",children:"\uD83D\uDCFA"}),"OBS Studio Setup Guide"]})}),a.jsx("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Get Your Widget URL"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[a.jsx("li",{children:"• Widget URL is displayed in the configuration panel below"}),a.jsx("li",{children:"• This URL is unique to your account and secure"}),a.jsx("li",{children:"• Copy it to use in OBS Studio"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Add to OBS Studio"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[a.jsx("li",{children:"• In OBS, add a new Browser Source"}),a.jsx("li",{children:"• Paste your Widget URL"}),a.jsx("li",{children:"• Set width to 400px, height to 300px"}),a.jsx("li",{children:'• Check "Shutdown source when not visible"'})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-cyan-50 rounded-xl p-6 border border-indigo-100",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:"\uD83D\uDCA1"}),"Pro Tips"]}),(0,a.jsxs)("ul",{className:"text-sm text-gray-700 space-y-2",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-500 mt-1",children:"•"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Test connection first:"}),' Use "Test Connection" to verify your OBS widget is connected']})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-500 mt-1",children:"•"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Test the alert:"}),' Use the "Test Alert" button after setting up OBS']})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-500 mt-1",children:"•"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Widget must be visible:"})," The alert only works when the widget is visible in OBS"]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-500 mt-1",children:"•"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Customize appearance:"})," Use the settings below to customize your alerts"]})]})]})]})]})})]}),e?a.jsx("div",{className:"mb-8",children:a.jsx(z,{settings:e,onSave:Z,onTest:W})}):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading OBS settings..."})]}),e&&a.jsx("div",{className:"mb-8",children:a.jsx(P,{settings:e})}),e&&a.jsx(C,{settings:e,isVisible:n,onClose:()=>l(!1)}),a.jsx(p,{isOpen:v.isOpen,onClose:()=>j(e=>({...e,isOpen:!1})),type:v.type,title:v.title,message:v.message,details:v.details,alertId:v.alertId,widgetUrl:v.widgetUrl,connectedWidgets:v.connectedWidgets,testAlertSent:v.testAlertSent})]})})}},90368:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=s(54714);s(77580);var i=s(31812),r=s(95773);function o({children:e}){let{sidebarOpen:t,toggleSidebar:s}=(0,i.HB)();return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:[a.jsx(r.Header,{}),a.jsx("main",{className:"relative",children:e})]})}},46475:(e,t,s)=>{"use strict";s.d(t,{z:()=>o});var a=s(54714),i=s(77580),r=s(35178);let o=i.forwardRef(({className:e,variant:t="default",size:s="default",...i},o)=>a.jsx("button",{className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"}[t],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[s],e),ref:o,...i}));o.displayName="Button"},83446:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>n,SZ:()=>d,Zb:()=>o,aY:()=>c,ll:()=>l});var a=s(54714),i=s(77580),r=s(35178);let o=i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card";let n=i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let l=i.forwardRef(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=i.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},27114:(e,t,s)=>{"use strict";s.d(t,{I:()=>o});var a=s(54714),i=s(77580),r=s(35178);let o=i.forwardRef(({className:e,type:t,...s},i)=>a.jsx("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...s}));o.displayName="Input"},31213:(e,t,s)=>{"use strict";s.d(t,{_:()=>o});var a=s(54714),i=s(77580),r=s(35178);let o=i.forwardRef(({className:e,...t},s)=>a.jsx("label",{ref:s,className:(0,r.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));o.displayName="Label"},4686:(e,t,s)=>{"use strict";s.d(t,{g:()=>o});var a=s(54714),i=s(77580),r=s(35178);let o=i.forwardRef(({className:e,...t},s)=>a.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));o.displayName="Textarea"},35178:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r,p6:()=>n,xG:()=>o});var a=s(54690),i=s(68184);function r(...e){return(0,i.m6)((0,a.W)(e))}function o(e,t){if(null==e||isNaN(e))return"0.00";let s="string"==typeof e?parseFloat(e):e;try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}catch(e){return`${t.toUpperCase()} ${s.toFixed(2)}`}}function n(e,t={}){try{let s=new Date(e);if(isNaN(s.getTime()))return"Invalid Date";let a={year:"numeric",month:"short",day:"numeric",...t};return s.toLocaleDateString("en-US",a)}catch(e){return"Invalid Date"}}},36834:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var a=s(77580);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),o=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:r="",children:o,iconNode:c,...u},m)=>(0,a.createElement)("svg",{ref:m,...d,width:t,height:t,stroke:e,strokeWidth:i?24*Number(s)/Number(t):s,className:n("lucide",r),...!o&&!l(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(o)?o:[o]])),u=(e,t)=>{let s=(0,a.forwardRef)(({className:s,...r},l)=>(0,a.createElement)(c,{ref:l,iconNode:t,className:n(`lucide-${i(o(e))}`,`lucide-${e}`,s),...r}));return s.displayName=o(e),s}},24012:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(36834).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},31999:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(36834).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},65717:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(36834).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},21124:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(36834).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},19950:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(36834).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},49470:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>r,__esModule:()=>i,default:()=>o});let a=(0,s(71481).createProxy)(String.raw`D:\repo\xscan\frontend\src\app\dashboard\obs-settings\page.tsx`),{__esModule:i,$$typeof:r}=a,o=a.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[3499,9951,5070,1934,8098,5773],()=>s(37849));module.exports=a})();