(()=>{var e={};e.id=5566,e.ids=[5566],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},51049:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var t=s(7),a=s(8533),n=s(29377),i=s.n(n),o=s(29799),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(r,l);let d=["",{children:["dashboard",{children:["streamer-registration",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,30527)),"D:\\repo\\xscan\\frontend\\src\\app\\dashboard\\streamer-registration\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,44161)),"D:\\repo\\xscan\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,73472,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\repo\\xscan\\frontend\\src\\app\\dashboard\\streamer-registration\\page.tsx"],u="/dashboard/streamer-registration/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/streamer-registration/page",pathname:"/dashboard/streamer-registration",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},37831:(e,r,s)=>{Promise.resolve().then(s.bind(s,70244))},70244:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var t=s(54714),a=s(77580),n=s(88934),i=s(31812),o=s(21102),l=s(90368);function d(){let e=(0,n.useRouter)(),{user:r,isAuthenticated:s,refreshUser:d}=(0,i.qr)(),[c,u]=(0,a.useState)(!0),[m,x]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null),[g,y]=(0,a.useState)(null),[b,f]=(0,a.useState)({username:"",displayName:"",email:"",platform:"",channelUrl:"",description:"",monthlyViewers:0,contentCategory:"",reasonForApplying:""}),j=async()=>{try{let e=(0,o.hV)();if(!e)return;let r=await fetch("/api/streamer-applications/my-application",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(r.ok){let e=await r.json();y(e)}}catch(e){console.error("Error checking existing application:",e)}};(0,a.useEffect)(()=>{(async()=>{if(!s){e.push("/login");return}if(r?.role!=="donor"){e.push("/dashboard");return}await j(),(r?.username||r?.email||r?.name)&&f(e=>({...e,username:r.username||e.username,email:r.email||e.email,displayName:r.name||e.displayName})),u(!1)})()},[s,r,e]),(0,a.useEffect)(()=>{g?.status==="approved"&&r?.role==="donor"&&d()},[g?.status,r?.role,d]),(0,a.useEffect)(()=>{r?.role==="streamer"&&e.push("/dashboard")},[r?.role,e]);let v=e=>{let{name:r,value:s}=e.target;f(e=>({...e,[r]:s}))},N=async e=>{e.preventDefault(),x(!0),h(null);try{let e=(0,o.hV)();if(!e)throw Error("Authentication required");let r=await fetch("/api/streamer-registration",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(b)}),s=await r.json();if(!r.ok)throw Error(s.message||"Failed to submit registration");h({type:"success",text:"Registration submitted successfully! An admin will review your application and you will be notified of the decision."}),await j(),f({username:"",displayName:"",email:"",platform:"",channelUrl:"",description:"",monthlyViewers:0,contentCategory:"",reasonForApplying:""})}catch(e){h({type:"error",text:e instanceof Error?e.message:"Failed to submit registration"})}finally{x(!1)}};return c?t.jsx(l.Z,{children:t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading..."})]})})}):t.jsx(l.Z,{children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,t.jsxs)("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Register as Streamer"}),t.jsx("p",{className:"text-gray-600",children:"Apply to become a streamer and start receiving donations from your audience."})]}),p&&t.jsx("div",{className:`mb-6 p-4 rounded-lg ${"success"===p.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:p.text}),g&&(0,t.jsxs)("div",{className:"mb-6 p-6 rounded-lg border-2 border-gray-200 bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Your Streamer Application"}),t.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${(e=>{switch(e){case"pending":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"approved":return"bg-green-50 border-green-200 text-green-800";case"rejected":return"bg-red-50 border-red-200 text-red-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})(g.status)}`,children:(e=>{switch(e){case"pending":return"Pending Approval";case"approved":return"Approved";case"rejected":return"Rejected";default:return"Unknown"}})(g.status)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Username:"}),t.jsx("p",{className:"text-gray-900",children:g.username})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Platform:"}),t.jsx("p",{className:"text-gray-900 capitalize",children:g.platform})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Channel URL:"}),t.jsx("p",{className:"text-gray-900 break-all",children:g.channelUrl})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Submitted:"}),t.jsx("p",{className:"text-gray-900",children:new Date(g.createdAt).toLocaleDateString()})]})]}),"pending"===g.status&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Application Under Review"}),t.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:t.jsx("p",{children:"Your streamer application is currently being reviewed by our admin team. You will be notified once a decision has been made."})})]})]})}),"approved"===g.status&&t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Application Approved!"}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-green-700",children:[t.jsx("p",{children:'Congratulations! Your streamer application has been approved. Your role has been updated to "streamer" and you will be redirected to your dashboard shortly.'}),t.jsx("p",{className:"mt-2 font-medium",children:"You can now access your streamer dashboard and start receiving donations!"})]})]})]})}),"rejected"===g.status&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Application Rejected"}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-red-700",children:[t.jsx("p",{children:"Unfortunately, your streamer application has been rejected. You can submit a new application if you believe there has been a mistake or if your circumstances have changed."}),g.reviewNotes&&(0,t.jsxs)("div",{className:"mt-2",children:[t.jsx("p",{className:"font-medium",children:"Review Notes:"}),t.jsx("p",{className:"mt-1",children:g.reviewNotes})]})]})]})]})}),"rejected"===g.status&&t.jsx("div",{className:"mt-4",children:t.jsx("button",{onClick:()=>y(null),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Submit New Application"})})]}),!g&&(0,t.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:["Username *",t.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(Auto-filled from your account)"})]}),t.jsx("input",{type:"text",id:"username",name:"username",value:b.username,onChange:v,required:!0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700 cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your username"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:["Display Name *",t.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(Auto-filled from your account)"})]}),t.jsx("input",{type:"text",id:"displayName",name:"displayName",value:b.displayName,onChange:v,required:!0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700 cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your display name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["Email *",t.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(Auto-filled from your account)"})]}),t.jsx("input",{type:"email",id:"email",name:"email",value:b.email,onChange:v,required:!0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700 cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your email"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"platform",className:"block text-sm font-medium text-gray-700 mb-1",children:"Streaming Platform *"}),(0,t.jsxs)("select",{id:"platform",name:"platform",value:b.platform,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[t.jsx("option",{value:"",children:"Select platform"}),t.jsx("option",{value:"twitch",children:"Twitch"}),t.jsx("option",{value:"youtube",children:"YouTube"}),t.jsx("option",{value:"kick",children:"Kick"}),t.jsx("option",{value:"facebook",children:"Facebook Gaming"}),t.jsx("option",{value:"other",children:"Other"})]})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[t.jsx("label",{htmlFor:"channelUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"Channel URL *"}),t.jsx("input",{type:"url",id:"channelUrl",name:"channelUrl",value:b.channelUrl,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://twitch.tv/yourchannel"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Content Information"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Channel Description *"}),t.jsx("textarea",{id:"description",name:"description",value:b.description,onChange:v,required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe your channel and content..."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"contentCategory",className:"block text-sm font-medium text-gray-700 mb-1",children:"Content Category *"}),(0,t.jsxs)("select",{id:"contentCategory",name:"contentCategory",value:b.contentCategory,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[t.jsx("option",{value:"",children:"Select category"}),t.jsx("option",{value:"gaming",children:"Gaming"}),t.jsx("option",{value:"just-chatting",children:"Just Chatting"}),t.jsx("option",{value:"music",children:"Music"}),t.jsx("option",{value:"art",children:"Art & Creative"}),t.jsx("option",{value:"education",children:"Education"}),t.jsx("option",{value:"lifestyle",children:"Lifestyle"}),t.jsx("option",{value:"sports",children:"Sports"}),t.jsx("option",{value:"other",children:"Other"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"monthlyViewers",className:"block text-sm font-medium text-gray-700 mb-1",children:"Average Monthly Viewers *"}),t.jsx("input",{type:"number",id:"monthlyViewers",name:"monthlyViewers",value:b.monthlyViewers,onChange:e=>f(r=>({...r,monthlyViewers:parseInt(e.target.value)||0})),required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your average monthly viewers"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Application Details"}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"reasonForApplying",className:"block text-sm font-medium text-gray-700 mb-1",children:"Why do you want to become a streamer? *"}),t.jsx("textarea",{id:"reasonForApplying",name:"reasonForApplying",value:b.reasonForApplying,onChange:v,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Tell us about your goals, why you want to receive donations, and how you plan to use this platform..."})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[t.jsx("button",{type:"button",onClick:()=>e.push("/dashboard"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Submitting...":"Submit Application"})]})]})]})})}},90368:(e,r,s)=>{"use strict";s.d(r,{Z:()=>i});var t=s(54714);s(77580);var a=s(31812),n=s(95773);function i({children:e}){let{sidebarOpen:r,toggleSidebar:s}=(0,a.HB)();return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:[t.jsx(n.Header,{}),t.jsx("main",{className:"relative",children:e})]})}},30527:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let t=(0,s(71481).createProxy)(String.raw`D:\repo\xscan\frontend\src\app\dashboard\streamer-registration\page.tsx`),{__esModule:a,$$typeof:n}=t,i=t.default}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[3499,9951,5070,8098,5773],()=>s(51049));module.exports=t})();