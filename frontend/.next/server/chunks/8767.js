"use strict";exports.id=8767,exports.ids=[8767],exports.modules={98767:(e,t,s)=>{s.d(t,{J:()=>x});var a=s(54714),n=s(77580),r=s(46475),o=s(27114),i=s(31213),l=s(83446),c=s(42708),d=s(12448);let m=[1e4,2e4,5e4,1e5,2e5,5e5,1e6],u=[{id:"wallet",name:"Wallet",icon:"\uD83D\uDCB3"},{id:"bank_transfer",name:"Bank Transfer",icon:"\uD83C\uDFE6"}];function x({donationLink:e,onDonationSubmit:t}){let s=function(e){let t=function(e){let t=(0,n.useRef)(`sess_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),s=(0,n.useRef)(function(){let e="donation_visitor_id",t=localStorage.getItem(e);return t||(t=`visitor_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem(e,t)),t}()),a=(0,n.useRef)(Date.now());(0,n.useEffect)(()=>{o(e)},[e]);let r=(0,n.useCallback)(async(n,r)=>{try{let o=await fetch(`/api/donations/links/${e}/analytics/${n}`,{method:"POST",headers:{"Content-Type":"application/json","X-Session-ID":t.current,"X-Visitor-ID":s.current},body:JSON.stringify({...r,metadata:{...r.metadata,sessionId:t.current,visitorId:s.current,pageLoadTime:a.current,timeOnPage:Date.now()-a.current,url:window.location.href,referrer:document.referrer,userAgent:navigator.userAgent,screenResolution:`${screen.width}x${screen.height}`,viewport:`${window.innerWidth}x${window.innerHeight}`,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}})});o.ok||console.warn("Analytics event failed to send:",o.statusText)}catch(e){console.warn("Failed to send analytics event:",e)}},[e]),o=(0,n.useCallback)((e,t)=>{r("pageview",{eventType:"page_view",metadata:t})},[r]),i=(0,n.useCallback)((e,t)=>{r("donation-started",{eventType:"donation_started",metadata:t})},[r]),l=(0,n.useCallback)((e,t)=>{r("donation-completed",{eventType:"donation_completed",metadata:t})},[r]);return{trackPageView:o,trackDonationStarted:i,trackDonationCompleted:l,trackQRCodeScanned:(0,n.useCallback)((e,t)=>{r("qr-scanned",{eventType:"qr_code_scanned",metadata:t})},[r]),trackSocialShare:(0,n.useCallback)((e,t,s)=>{r("social-share",{eventType:"social_share",metadata:{...s,socialPlatform:t}})},[r]),trackLinkClick:(0,n.useCallback)((e,t,s)=>{r("link-clicked",{eventType:"link_clicked",metadata:{...s,linkType:t}})},[r])}}(e),s=(0,n.useCallback)((e,s)=>{let a=function(){let e=new URLSearchParams(window.location.search),t={};return["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(s=>{let a=e.get(s);a&&(t[s]=a)}),t}();t.trackPageView(e,{...s,...a})},[t]);return{...t,trackPageView:s}}(e.id),[x,h]=(0,n.useState)({amount:0,currency:"VND",message:"",isAnonymous:!1,paymentMethod:"wallet"}),[p,g]=(0,n.useState)(""),[f,b]=(0,n.useState)(!1),[y,v]=(0,n.useState)(""),[w,j]=(0,n.useState)(!1),N=t=>{h(e=>({...e,amount:t})),g(""),s.trackLinkClick(e.id,"amount_selection",{selectedAmount:t,isPreset:!0})},k=t=>{g(t);let a=parseFloat(t);!isNaN(a)&&a>0?(h(e=>({...e,amount:a})),s.trackLinkClick(e.id,"custom_amount_input",{customAmount:a})):h(e=>({...e,amount:0}))},C=async a=>{if(a.preventDefault(),x.amount<1e4){v("Please select a valid donation amount");return}s.trackDonationStarted(e.id,{amount:x.amount,currency:x.currency,paymentMethod:x.paymentMethod,isAnonymous:x.isAnonymous,hasMessage:!!x.message}),b(!0),v("");try{await t(x),j(!0),s.trackDonationCompleted(e.id,{amount:x.amount,currency:x.currency,paymentMethod:x.paymentMethod,isAnonymous:x.isAnonymous,hasMessage:!!x.message,success:!0}),(0,d.showToast)({type:"success",title:"Donation Successful!",message:`Thank you for your ${x.amount} VND donation!`,duration:5e3}),setTimeout(()=>{j(!1),h({amount:0,currency:"VND",message:"",isAnonymous:!1,paymentMethod:"wallet"}),g("")},3e3)}catch(a){let t=a instanceof Error?a.message:"Failed to process donation";v(t),s.trackDonationCompleted(e.id,{amount:x.amount,currency:x.currency,paymentMethod:x.paymentMethod,isAnonymous:x.isAnonymous,hasMessage:!!x.message,success:!1,error:t}),(0,d.showToast)({type:"error",title:"Donation Failed",message:t,duration:5e3})}finally{b(!1)}},D=t=>{let a=window.location.href,n=`Support ${e.title} on their donation page!`;s.trackSocialShare(e.id,t,{platform:t,shareText:n,shareUrl:a});let r="";switch(t){case"twitter":r=`https://twitter.com/intent/tweet?text=${encodeURIComponent(n)}&url=${encodeURIComponent(a)}`;break;case"facebook":r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}`;break;case"linkedin":r=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`;break;case"whatsapp":r=`https://wa.me/?text=${encodeURIComponent(n+" "+a)}`;break;case"telegram":r=`https://t.me/share/url?url=${encodeURIComponent(a)}&text=${encodeURIComponent(n)}`}r&&(window.open(r,"_blank","width=600,height=400"),(0,d.showToast)({type:"info",title:"Sharing...",message:`Opening ${t} to share this page`,duration:3e3}))},S=async()=>{try{await navigator.clipboard.writeText(window.location.href),s.trackLinkClick(e.id,"link_copy",{action:"copy_link",copiedUrl:window.location.href}),(0,d.showToast)({type:"success",title:"Link Copied!",message:"Donation page link copied to clipboard",duration:3e3})}catch(e){console.error("Failed to copy link:",e),(0,d.showToast)({type:"error",title:"Copy Failed",message:"Failed to copy link to clipboard",duration:3e3})}};return w?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-blue-50 p-4",children:a.jsx(l.Zb,{className:"w-full max-w-md text-center",children:(0,a.jsxs)(l.aY,{className:"pt-6",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),a.jsx("h2",{className:"text-2xl font-bold text-green-600 mb-2",children:"Thank You!"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:["Your donation of $",x.amount," has been received successfully."]}),a.jsx("p",{className:"text-sm text-gray-500",children:x.message&&`"${x.message}"`})]})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:e.title}),e.description&&a.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:e.description})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx(r.z,{variant:"outline",size:"sm",onClick:S,className:"text-sm w-full sm:w-auto",children:"\uD83D\uDCCB Copy Link"})})]})})}),a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6 sm:py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[a.jsx(l.ll,{className:"text-xl sm:text-2xl",children:"Make a Donation"}),(0,a.jsxs)(l.SZ,{children:["Choose an amount and payment method to support ",e.title]})]}),a.jsx(l.aY,{children:(0,a.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx(i._,{className:"text-base font-medium mb-3 block",children:"Select Donation Amount"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3 mb-4",children:m.map(e=>(0,a.jsxs)(r.z,{type:"button",variant:x.amount===e?"default":"outline",className:`h-10 sm:h-12 text-sm sm:text-lg font-medium ${x.amount===e?"bg-blue-600 text-white":"hover:bg-blue-50"}`,onClick:()=>N(e),children:["$",e]},e))}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(i._,{htmlFor:"customAmount",className:"text-sm text-gray-600 mb-2 block",children:"Or enter a custom amount"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),a.jsx(o.I,{id:"customAmount",type:"number",min:"10000",step:"10000",placeholder:"0.00",value:p,onChange:e=>k(e.target.value),className:"pl-8 h-10 sm:h-12 text-base sm:text-lg"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx(i._,{htmlFor:"message",className:"text-base font-medium mb-2 block",children:"Leave a message (optional)"}),a.jsx("textarea",{id:"message",rows:3,placeholder:"Share your support message...",value:x.message,onChange:e=>h(t=>({...t,message:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"anonymous",checked:x.isAnonymous,onChange:e=>h(t=>({...t,isAnonymous:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx(i._,{htmlFor:"anonymous",className:"text-sm text-gray-700",children:"Make this donation anonymous"})]}),(0,a.jsxs)("div",{children:[a.jsx(i._,{className:"text-base font-medium mb-3 block",children:"Payment Method"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:u.map(e=>(0,a.jsxs)(r.z,{type:"button",variant:x.paymentMethod===e.id?"default":"outline",className:`h-14 sm:h-16 flex flex-col items-center justify-center space-y-1 ${x.paymentMethod===e.id?"bg-blue-600 text-white":"hover:bg-blue-50"}`,onClick:()=>h(t=>({...t,paymentMethod:e.id})),children:[a.jsx("span",{className:"text-lg sm:text-xl",children:e.icon}),a.jsx("span",{className:"text-xs sm:text-sm",children:e.name})]},e.id))})]}),y&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:a.jsx("p",{className:"text-red-600 text-sm",children:y})}),a.jsx(r.z,{type:"submit",disabled:f||x.amount<1e4,className:"w-full h-12 sm:h-14 text-base sm:text-lg font-medium bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:f?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(c.T,{size:"sm"}),a.jsx("span",{children:"Processing..."})]}):`Donate $${x.amount.toFixed(2)}`})]})})]})}),(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[a.jsx(l.ll,{className:"text-lg",children:"QR Code"}),a.jsx(l.SZ,{children:"Scan to share this page"})]}),a.jsx(l.aY,{className:"text-center",children:e.qrCodeUrl?a.jsx("img",{src:e.qrCodeUrl,alt:"QR Code",className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto border border-gray-200 rounded-lg"}):a.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto bg-gray-100 border border-gray-200 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-gray-400 text-xs sm:text-sm",children:"QR Code"})})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[a.jsx(l.ll,{className:"text-lg",children:"Share This Page"}),a.jsx(l.SZ,{children:"Help spread the word"})]}),a.jsx(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx(r.z,{variant:"outline",size:"sm",onClick:()=>D("twitter"),className:"text-blue-500 hover:text-blue-600 text-xs sm:text-sm",children:"\uD83D\uDC26 Twitter"}),a.jsx(r.z,{variant:"outline",size:"sm",onClick:()=>D("facebook"),className:"text-blue-600 hover:text-blue-700 text-xs sm:text-sm",children:"\uD83D\uDCD8 Facebook"}),a.jsx(r.z,{variant:"outline",size:"sm",onClick:()=>D("linkedin"),className:"text-blue-700 hover:text-blue-800 text-xs sm:text-sm",children:"\uD83D\uDCBC LinkedIn"}),a.jsx(r.z,{variant:"outline",size:"sm",onClick:()=>D("whatsapp"),className:"text-green-600 hover:text-green-700 text-xs sm:text-sm",children:"\uD83D\uDCAC WhatsApp"}),a.jsx(r.z,{variant:"outline",size:"sm",onClick:()=>D("telegram"),className:"text-blue-500 hover:text-blue-600 text-xs sm:text-sm",children:"\uD83D\uDCF1 Telegram"})]})})]}),(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{children:a.jsx(l.ll,{className:"text-lg",children:"About This Page"})}),(0,a.jsxs)(l.aY,{className:"space-y-3 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Created:"}),a.jsx("br",{}),new Date(e.createdAt).toLocaleDateString()]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Custom URL:"}),a.jsx("br",{}),a.jsx("code",{className:"text-xs bg-gray-100 px-1 py-0.5 rounded break-all",children:e.customUrl})]}),e.allowAnonymous&&a.jsx("div",{className:"text-green-600",children:"✓ Anonymous donations allowed"})]})]})]})]})})]})}},42708:(e,t,s)=>{s.d(t,{T:()=>n});var a=s(54714);function n({size:e="md",className:t=""}){return a.jsx("div",{className:`flex justify-center items-center ${t}`,children:a.jsx("div",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[e]} animate-spin rounded-full border-4 border-gray-200 border-t-blue-600`,role:"status","aria-label":"Loading"})})}},46475:(e,t,s)=>{s.d(t,{z:()=>o});var a=s(54714),n=s(77580),r=s(35178);let o=n.forwardRef(({className:e,variant:t="default",size:s="default",...n},o)=>a.jsx("button",{className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"}[t],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[s],e),ref:o,...n}));o.displayName="Button"},83446:(e,t,s)=>{s.d(t,{Ol:()=>i,SZ:()=>c,Zb:()=>o,aY:()=>d,ll:()=>l});var a=s(54714),n=s(77580),r=s(35178);let o=n.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card";let i=n.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=n.forwardRef(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let c=n.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=n.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",n.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},27114:(e,t,s)=>{s.d(t,{I:()=>o});var a=s(54714),n=s(77580),r=s(35178);let o=n.forwardRef(({className:e,type:t,...s},n)=>a.jsx("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));o.displayName="Input"},31213:(e,t,s)=>{s.d(t,{_:()=>o});var a=s(54714),n=s(77580),r=s(35178);let o=n.forwardRef(({className:e,...t},s)=>a.jsx("label",{ref:s,className:(0,r.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));o.displayName="Label"},35178:(e,t,s)=>{s.d(t,{cn:()=>r,p6:()=>i,xG:()=>o});var a=s(54690),n=s(68184);function r(...e){return(0,n.m6)((0,a.W)(e))}function o(e,t){if(null==e||isNaN(e))return"0.00";let s="string"==typeof e?parseFloat(e):e;try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}catch(e){return`${t.toUpperCase()} ${s.toFixed(2)}`}}function i(e,t={}){try{let s=new Date(e);if(isNaN(s.getTime()))return"Invalid Date";let a={year:"numeric",month:"short",day:"numeric",...t};return s.toLocaleDateString("en-US",a)}catch(e){return"Invalid Date"}}}};