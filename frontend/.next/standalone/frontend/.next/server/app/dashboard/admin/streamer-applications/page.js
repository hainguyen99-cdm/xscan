(()=>{var e={};e.id=3414,e.ids=[3414],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},56068:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>l});var s=t(7),a=t(8533),i=t(29377),n=t.n(i),d=t(29799),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);t.d(r,o);let l=["",{children:["dashboard",{children:["admin",{children:["streamer-applications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2100)),"D:\\repo\\xscan\\frontend\\src\\app\\dashboard\\admin\\streamer-applications\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,44161)),"D:\\repo\\xscan\\frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,12873)),"D:\\repo\\xscan\\frontend\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,34392)),"D:\\repo\\xscan\\frontend\\src\\app\\not-found.tsx"]}],c=["D:\\repo\\xscan\\frontend\\src\\app\\dashboard\\admin\\streamer-applications\\page.tsx"],p="/dashboard/admin/streamer-applications/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/admin/streamer-applications/page",pathname:"/dashboard/admin/streamer-applications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},4675:(e,r,t)=>{Promise.resolve().then(t.bind(t,25498))},25498:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c,dynamic:()=>l});var s=t(54714),a=t(77580),i=t(88934),n=t(31812),d=t(21102),o=t(90368);let l="force-dynamic";function c(){let e=(0,i.useRouter)(),{user:r,isAuthenticated:t}=(0,n.qr)(),[l,c]=(0,a.useState)(!0),[p,x]=(0,a.useState)([]),[m,u]=(0,a.useState)(0),[h,g]=(0,a.useState)(1),[b,f]=(0,a.useState)(10),[j,y]=(0,a.useState)("all"),[v,N]=(0,a.useState)(""),[w,q]=(0,a.useState)(null),[P,A]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!t){e.push("/login");return}if(r?.role!=="admin"){e.push("/dashboard");return}_()},[t,r,e,h,b,j,v]);let _=async()=>{try{let e=(0,d.hV)();if(!e)throw Error("Authentication required");let r=new URLSearchParams({page:h.toString(),limit:b.toString()});"all"!==j&&r.append("status",j),v.trim()&&r.append("search",v.trim()),console.log("Fetching applications with params:",r.toString());let t=await fetch(`/api/admin/streamer-applications?${r}`,{headers:{Authorization:`Bearer ${e}`}});if(console.log("Response status:",t.status),console.log("Response headers:",Object.fromEntries(t.headers.entries())),!t.ok)throw Error("Failed to fetch applications");let s=await t.json();console.log("Received data:",s),x(s.items||[]),u(s.total||0)}catch(e){console.error("Failed to fetch applications:",e),A({type:"error",text:"Failed to load applications"})}finally{c(!1)}},S=async(e,r,t)=>{q(e),A(null);try{let s=(0,d.hV)();if(!s)throw Error("Authentication required");let a=await fetch(`/api/admin/streamer-applications/${e}/review`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({action:r,notes:t})}),i=await a.json();if(!a.ok)throw Error(i.message||"Failed to process application");A({type:"success",text:`Application ${"approve"===r?"approved":"rejected"} successfully`}),_()}catch(e){A({type:"error",text:e instanceof Error?e.message:"Failed to process application"})}finally{q(null)}},C=e=>{switch(e){case"pending":return s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:"Pending"});case"approved":return s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Approved"});case"rejected":return s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:"Rejected"});default:return s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:"Unknown"})}},R=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=Math.ceil(m/b);return l?s.jsx(o.Z,{children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading applications..."})]})})}):s.jsx(o.Z,{children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Streamer Applications"}),s.jsx("p",{className:"text-gray-600",children:"Review and manage streamer registration applications."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:m}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Applications"})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:p.filter(e=>"pending"===e.status).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Pending Review"})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.filter(e=>"approved"===e.status).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:p.filter(e=>"rejected"===e.status).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Rejected"})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",placeholder:"Search by username, display name, or email...",value:v,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("select",{value:j,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"all",children:"All Statuses"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"approved",children:"Approved"}),s.jsx("option",{value:"rejected",children:"Rejected"})]}),(0,s.jsxs)("select",{value:b,onChange:e=>f(Number(e.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:5,children:"5 per page"}),s.jsx("option",{value:10,children:"10 per page"}),s.jsx("option",{value:20,children:"20 per page"}),s.jsx("option",{value:50,children:"50 per page"})]})]})]})}),P&&s.jsx("div",{className:`mb-6 p-4 rounded-lg ${"success"===P.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:P.text}),0===p.length?(0,s.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDCDD"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No applications found"}),s.jsx("p",{className:"text-gray-600",children:v||"all"!==j?"Try adjusting your search criteria or filters.":"There are currently no streamer applications to review."})]}):s.jsx("div",{className:"space-y-6",children:p.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.displayName}),C(e.status)]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["@",e.username]})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Applied on"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:R(e.createdAt)})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Basic Information"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-medium",children:"Email:"})," ",e.email]}),(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-medium",children:"Platform:"})," ",e.platform]}),(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-medium",children:"Channel URL:"}),s.jsx("a",{href:e.channelUrl,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-700 ml-1",children:e.channelUrl})]}),(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-medium",children:"Monthly Viewers:"})," ",e.monthlyViewers.toLocaleString()]}),(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-medium",children:"Content Category:"})," ",e.contentCategory]}),e.referrer&&(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-medium",children:"Referrer:"})," ",e.referrer]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Content Details"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("p",{children:s.jsx("span",{className:"font-medium",children:"Description:"})}),s.jsx("p",{className:"text-gray-700 bg-gray-50 p-2 rounded",children:e.description})]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Reason for Applying"}),s.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded",children:e.reasonForApplying})]}),"pending"===e.status&&(0,s.jsxs)("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{onClick:()=>{let r=prompt("Add review notes (optional):");S(e._id,"approve",r||void 0)},disabled:w===e._id,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:w===e._id?"Processing...":"Approve"}),s.jsx("button",{onClick:()=>{let r=prompt("Add rejection reason (optional):");S(e._id,"reject",r||void 0)},disabled:w===e._id,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:w===e._id?"Processing...":"Reject"})]}),("approved"===e.status||"rejected"===e.status)&&s.jsx("div",{className:"pt-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-medium",children:"Reviewed on:"})," ",e.reviewedAt?R(e.reviewedAt):"Unknown"]}),e.reviewNotes&&(0,s.jsxs)("div",{className:"mt-2",children:[s.jsx("p",{children:s.jsx("span",{className:"font-medium",children:"Review Notes:"})}),s.jsx("p",{className:"text-gray-700 bg-gray-50 p-2 rounded mt-1",children:e.reviewNotes})]})]})})]},e._id))}),D>1&&s.jsx("div",{className:"mt-8 flex justify-center",children:(0,s.jsxs)("nav",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>g(Math.max(1,h-1)),disabled:1===h,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,D)},(e,r)=>{let t=Math.max(1,Math.min(D-4,h-2))+r;return s.jsx("button",{onClick:()=>g(t),className:`px-3 py-2 text-sm font-medium rounded-md ${t===h?"bg-indigo-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"}`,children:t},t)}),s.jsx("button",{onClick:()=>g(Math.min(D,h+1)),disabled:h===D,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})}),p.length>0&&(0,s.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Showing ",(h-1)*b+1," to ",Math.min(h*b,m)," of ",m," applications"]})]})})}},90368:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});var s=t(54714);t(77580);var a=t(31812),i=t(95773);function n({children:e}){let{sidebarOpen:r,toggleSidebar:t}=(0,a.HB)();return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:[s.jsx(i.Header,{}),s.jsx("main",{className:"relative",children:e})]})}},2100:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>n,__esModule:()=>i,default:()=>l,dynamic:()=>o});var s=t(71481);let a=(0,s.createProxy)(String.raw`D:\repo\xscan\frontend\src\app\dashboard\admin\streamer-applications\page.tsx`),{__esModule:i,$$typeof:n}=a,d=a.default,o=(0,s.createProxy)(String.raw`D:\repo\xscan\frontend\src\app\dashboard\admin\streamer-applications\page.tsx#dynamic`),l=d}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[3499,9003,5070,1707,5773],()=>t(56068));module.exports=s})();