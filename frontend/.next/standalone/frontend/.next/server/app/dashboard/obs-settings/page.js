(()=>{var e={};e.id=1668,e.ids=[1668],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},33090:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>g,tree:()=>d});var i=s(7),a=s(8533),n=s(29377),o=s.n(n),r=s(29799),l={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>r[e]);s.d(t,l);let d=["",{children:["dashboard",{children:["obs-settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,49470)),"D:\\repo\\xscan\\frontend\\src\\app\\dashboard\\obs-settings\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,44161)),"D:\\repo\\xscan\\frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,12873)),"D:\\repo\\xscan\\frontend\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,34392)),"D:\\repo\\xscan\\frontend\\src\\app\\not-found.tsx"]}],c=["D:\\repo\\xscan\\frontend\\src\\app\\dashboard\\obs-settings\\page.tsx"],m="/dashboard/obs-settings/page",u={require:s,loadChunk:()=>Promise.resolve()},g=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/obs-settings/page",pathname:"/dashboard/obs-settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19237:(e,t,s)=>{Promise.resolve().then(s.bind(s,11069))},11069:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>V,dynamic:()=>E});var i=s(54714),a=s(77580),n=s(83446),o=s(46475),r=s(27114),l=s(31213),d=s(36834);let c=(0,d.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),m=(0,d.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var u=s(24012);let g=(0,d.Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var x=s(31999);let h=(0,d.Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),p=({isOpen:e,onClose:t,type:s,title:a,message:n,details:r,alertId:l,widgetUrl:d,connectedWidgets:p,testAlertSent:f})=>{if(!e)return null;let v=e=>{navigator.clipboard.writeText(e)};return i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,i.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity backdrop-blur-sm",onClick:t}),(0,i.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-auto border border-gray-200",onKeyDown:e=>{"Escape"===e.key&&t()},children:[i.jsx("div",{className:`${(()=>{switch(s){case"success":return"bg-gradient-to-r from-green-500 to-emerald-600";case"error":return"bg-gradient-to-r from-red-500 to-rose-600";case"warning":return"bg-gradient-to-r from-amber-500 to-orange-600";default:return"bg-gradient-to-r from-blue-500 to-indigo-600"}})()} text-white rounded-t-2xl p-6`,children:(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(()=>{switch(s){case"success":return i.jsx(c,{className:"w-8 h-8 text-green-500"});case"error":return i.jsx(m,{className:"w-8 h-8 text-red-500"});case"warning":return i.jsx(u.Z,{className:"w-8 h-8 text-amber-500"});default:return i.jsx(g,{className:"w-8 h-8 text-blue-500"})}})(),(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-xl font-bold",children:a}),i.jsx("p",{className:"text-white/90 text-sm mt-1",children:n})]})]})}),(0,i.jsxs)("div",{className:"p-6 space-y-4",children:[r&&(0,i.jsxs)("div",{className:"p-4 rounded-xl bg-gray-50 border border-gray-200",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Details"}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:r})]}),l&&(0,i.jsxs)("div",{className:"p-4 rounded-xl bg-blue-50 border border-blue-200",children:[(0,i.jsxs)("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[i.jsx("span",{children:"\uD83C\uDD94"}),"Alert ID"]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("code",{className:"flex-1 text-sm bg-white p-2 rounded border border-blue-200 font-mono",children:l}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>v(l),className:"border-blue-200 text-blue-700 hover:bg-blue-50",children:i.jsx(x.Z,{className:"w-4 h-4"})})]})]}),d&&(0,i.jsxs)("div",{className:"p-4 rounded-xl bg-green-50 border border-green-200",children:[(0,i.jsxs)("h4",{className:"font-semibold text-green-900 mb-2 flex items-center gap-2",children:[i.jsx("span",{children:"\uD83D\uDD17"}),"Widget URL"]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("code",{className:"flex-1 text-sm bg-white p-2 rounded border border-green-200 font-mono break-all",children:d}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>v(d),className:"border-green-200 text-green-700 hover:bg-green-50",children:i.jsx(x.Z,{className:"w-4 h-4"})}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>window.open(d,"_blank"),className:"border-green-200 text-green-700 hover:bg-green-50",children:i.jsx(h,{className:"w-4 h-4"})})]})]}),(void 0!==p||void 0!==f)&&(0,i.jsxs)("div",{className:"p-4 rounded-xl bg-purple-50 border border-purple-200",children:[(0,i.jsxs)("h4",{className:"font-semibold text-purple-900 mb-2 flex items-center gap-2",children:[i.jsx("span",{children:"\uD83D\uDCCA"}),"Connection Status"]}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[void 0!==p&&(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-purple-700",children:"Connected widgets:"}),i.jsx("span",{className:"font-medium text-purple-900",children:p})]}),void 0!==f&&(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-purple-700",children:"Test alert sent:"}),i.jsx("span",{className:`font-medium ${f?"text-green-600":"text-red-600"}`,children:f?"Yes":"No"})]})]})]}),"success"===s&&(0,i.jsxs)("div",{className:"p-4 rounded-xl bg-amber-50 border border-amber-200",children:[(0,i.jsxs)("h4",{className:"font-semibold text-amber-900 mb-2 flex items-center gap-2",children:[i.jsx("span",{children:"\uD83D\uDCFA"}),"To see the alert:"]}),(0,i.jsxs)("ul",{className:"text-sm text-amber-800 space-y-1",children:[i.jsx("li",{children:"• Make sure you have the widget URL open in OBS Studio"}),i.jsx("li",{children:"• The widget must be visible in OBS"}),i.jsx("li",{children:"• Check your OBS Studio for the alert animation"}),i.jsx("li",{children:"• If you don't see the alert, check the OBS setup guide above"})]})]}),"error"===s&&(0,i.jsxs)("div",{className:"p-4 rounded-xl bg-red-50 border border-red-200",children:[(0,i.jsxs)("h4",{className:"font-semibold text-red-900 mb-2 flex items-center gap-2",children:[i.jsx("span",{children:"\uD83D\uDD27"}),"Troubleshooting:"]}),(0,i.jsxs)("ul",{className:"text-sm text-red-800 space-y-1",children:[i.jsx("li",{children:"• Check if the backend is running"}),i.jsx("li",{children:"• Verify your authentication token"}),i.jsx("li",{children:"• Check browser console for more details"}),i.jsx("li",{children:"• Ensure OBS Studio is running and widget is visible"})]})]})]}),i.jsx("div",{className:"px-6 py-4 bg-gray-50 rounded-b-2xl flex justify-end",children:i.jsx(o.z,{onClick:t,className:"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:"Close"})})]})]})})},f=(0,d.Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),v=(0,d.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),b=(0,d.Z)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),y=(0,d.Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var j=s(65717);let N=(0,d.Z)("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),S=(0,d.Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),w=(0,d.Z)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);var k=s(21124),C=s(21102);let z=({settings:e,onSave:t,onTest:s})=>{let[d,c]=(0,a.useState)({customization:{image:void 0,sound:void 0,text:{font:"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif",fontSize:16,color:"#ffffff",backgroundColor:"#1a1a1a",animation:"fade"},position:"top-right",duration:5}}),[m,u]=(0,a.useState)(!1),[g,x]=(0,a.useState)(null),[h,z]=(0,a.useState)(!1),[D,T]=(0,a.useState)(null),[O,A]=(0,a.useState)(!1),P=(0,a.useRef)(null),M=(0,a.useRef)(null),[B,L]=(0,a.useState)({isOpen:!1,type:"warning",title:"",message:""});(0,a.useEffect)(()=>{if(e){let t=e.customization||{image:e.imageSettings?.url?{url:e.imageSettings.url,type:e.imageSettings.mediaType,duration:5}:void 0,sound:e.soundSettings?.url?{url:e.soundSettings.url,volume:e.soundSettings.volume,duration:3}:void 0,text:{font:e.styleSettings?.fontFamily||"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif",fontSize:e.styleSettings?.fontSize||16,color:e.styleSettings?.textColor||"#ffffff",backgroundColor:e.styleSettings?.backgroundColor||"#1a1a1a",animation:(e.animationSettings?.animationType==="zoom"?"fade":e.animationSettings?.animationType)||"fade"},position:e.positionSettings?.anchor==="top-center"||e.positionSettings?.anchor==="middle-left"||e.positionSettings?.anchor==="middle-center"||e.positionSettings?.anchor==="middle-right"||e.positionSettings?.anchor==="bottom-center"?"center":e.positionSettings?.anchor||"top-right",duration:Math.round((e.displaySettings?.duration||5e3)/1e3)};c({customization:{...t,image:t.image||void 0,sound:t.sound||void 0,duration:Math.round((t.duration||5e3)/1e3)}})}},[e]),(0,a.useEffect)(()=>{x({donorName:"Test Donor",amount:25,currency:"VND",message:"This is a test alert message to preview your OBS configuration!",position:d.customization.position,animation:d.customization.text?.animation||"fade",image:d.customization.image,sound:d.customization.sound,duration:d.customization.duration,colors:{background:d.customization.text?.backgroundColor||"#1a1a1a",text:d.customization.text?.color||"#ffffff",accent:"#3b82f6"},fonts:{family:d.customization.text?.font||"Inter",size:d.customization.text?.fontSize||16,weight:"normal"}})},[d]);let R=(0,a.useCallback)((e,t)=>{c(s=>{let i={...s},a=e.split("."),n=i;for(let e=0;e<a.length-1;e++)n[a[e]]||(n[a[e]]={}),n=n[a[e]];return n[a[a.length-1]]=t,i})},[]),I=(0,a.useCallback)((e,t)=>{if("image"===e){let e=new FileReader;e.onload=e=>{R("customization.image.url",e.target?.result)},e.readAsDataURL(t)}else if("sound"===e){let e=new FileReader;e.onload=e=>{R("customization.sound.url",e.target?.result)},e.readAsDataURL(t)}},[R]),F=async()=>{u(!0),T(null);try{let e={customization:{image:d.customization.image?.url?{url:d.customization.image.url,type:d.customization.image.type,duration:d.customization.image.duration}:void 0,sound:d.customization.sound?.url?{url:d.customization.sound.url,volume:d.customization.sound.volume,duration:d.customization.sound.duration}:void 0,text:d.customization.text,position:d.customization.position,duration:1e3*d.customization.duration}};await t(e),console.log("✅ OBS settings saved successfully"),T({type:"success",text:"✅ OBS settings saved successfully!"}),A(!0),setTimeout(()=>{T(null),A(!1)},5e3)}catch(t){console.error("❌ Failed to save OBS settings:",t);let e="Failed to save OBS settings. Please try again.";throw t instanceof Error&&(e=t.message.includes("413")||t.message.includes("Payload Too Large")?"File size too large. Please ensure all files are under 10MB.":t.message.includes("401")||t.message.includes("Unauthorized")?"Authentication required. Please log in again.":t.message.includes("403")||t.message.includes("Forbidden")?"Access denied. You do not have permission to save OBS settings.":t.message.includes("404")||t.message.includes("Not Found")?"OBS settings not found. Please create settings first.":t.message),T({type:"error",text:`❌ ${e}`}),A(!0),setTimeout(()=>{T(null),A(!1)},8e3),t}finally{u(!1)}},U=async()=>{if(e)try{let t={image:d.customization.image?.url?{url:d.customization.image.url,type:d.customization.image.type,duration:d.customization.image.duration}:void 0,sound:d.customization.sound?.url?{url:d.customization.sound.url,volume:d.customization.sound.volume,duration:d.customization.sound.duration}:void 0,text:d.customization.text,position:d.customization.position,duration:1e3*d.customization.duration};await s({...e,customization:t})}catch(e){console.error("Failed to test alert:",e)}},_=()=>{P.current&&d.customization.sound?.url&&(P.current.currentTime=0,P.current.play())},$=e=>{try{let t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}catch{}},E=async t=>{if(e){u(!0);try{let s=(0,C.hV)();if(!s)throw Error("Authentication required. Please log in again.");let i=await fetch("/api/obs-settings/settings-behavior/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({settingsBehavior:t})});if(!i.ok)throw Error("Failed to update settings behavior");let a=await i.json();console.log("Settings behavior updated:",a),e&&(e.settingsBehavior=t),T({type:"success",text:"Settings behavior updated successfully!"}),A(!0)}catch(e){console.error("Error updating settings behavior:",e),T({type:"error",text:"Failed to update settings behavior"}),A(!0)}finally{u(!1)}}};return(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{className:"space-y-8",children:(0,i.jsxs)(n.Zb,{className:"border-0 shadow-lg bg-white",children:[(0,i.jsxs)(n.Ol,{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-t-lg",children:[(0,i.jsxs)(n.ll,{className:"flex items-center gap-3 text-white",children:[i.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:i.jsx(f,{className:"w-5 h-5"})}),"Media Settings"]}),i.jsx(n.SZ,{className:"text-indigo-100",children:"Configure images, GIFs, videos, and sound for your alerts"})]}),(0,i.jsxs)(n.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Alert Media"}),(0,i.jsxs)("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-6 bg-slate-50 hover:bg-slate-100 transition-colors duration-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(v,{className:"w-5 h-5 text-indigo-600"})}),i.jsx("div",{className:"flex-1",children:i.jsx(r.I,{type:"file",accept:"image/*,video/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>10485760){L({isOpen:!0,type:"warning",title:"File Too Large",message:"File size must be under 10MB.",details:"Please choose a smaller file to continue."});return}I("image",t);let e=t.type.startsWith("video/"),s="image/gif"===t.type;R("customization.image.type",e?"video":s?"gif":"image")}},className:"border-0 bg-transparent p-0 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-indigo-600 file:text-white hover:file:bg-indigo-700"})}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>R("customization.image.url",""),className:"border-slate-300 text-slate-600 hover:bg-slate-100",children:"Clear"})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Maximum file size: 10MB. Supported formats: Images (JPG, PNG, GIF), Videos (MP4, WebM)"})]}),d.customization.image?.url&&(0,i.jsxs)("div",{className:"text-xs text-indigo-700 bg-indigo-50 p-3 rounded-lg border border-indigo-200",children:[i.jsx("strong",{children:"Current file:"})," ",d.customization.image.url.startsWith("data:")?`Base64 encoded (${Math.round(.75*d.customization.image.url.length/1024)}KB)`:d.customization.image.url]}),d.customization.image?.type==="video"&&(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-medium text-slate-600",children:"Video Duration (seconds, max 10)"}),i.jsx(r.I,{type:"number",min:"1",max:"10",value:d.customization.image.duration||5,onChange:e=>R("customization.image.duration",parseInt(e.target.value)),className:"border-slate-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Alert Sound"}),(0,i.jsxs)("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-6 bg-slate-50 hover:bg-slate-100 transition-colors duration-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(b,{className:"w-5 h-5 text-indigo-600"})}),i.jsx("div",{className:"flex-1",children:i.jsx(r.I,{type:"file",accept:"audio/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>10485760){L({isOpen:!0,type:"warning",title:"File Too Large",message:"File size must be under 10MB.",details:"Please choose a smaller file to continue."});return}I("sound",t)}},className:"border-0 bg-transparent p-0 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-indigo-600 file:text-white hover:file:bg-indigo-700"})}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:_,disabled:!d.customization.sound?.url,className:"border-indigo-300 text-indigo-600 hover:bg-indigo-50 disabled:opacity-50",children:i.jsx(y,{className:"w-4 h-4"})}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>R("customization.sound.url",""),className:"border-slate-300 text-slate-600 hover:bg-slate-100",children:"Clear"})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Maximum file size: 10MB. Supported formats: MP3, WAV, OGG"})]}),d.customization.sound?.url&&(0,i.jsxs)("div",{className:"text-xs text-indigo-700 bg-indigo-50 p-3 rounded-lg border border-indigo-200",children:[i.jsx("strong",{children:"Current file:"})," ",d.customization.sound.url.startsWith("data:")?`Base64 encoded (${Math.round(.75*d.customization.sound.url.length/1024)}KB)`:d.customization.sound.url]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-medium text-slate-600",children:"Volume"}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(r.I,{type:"range",min:"0",max:"100",value:d.customization.sound?.volume||80,onChange:e=>R("customization.sound.volume",parseInt(e.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer slider"}),(0,i.jsxs)("span",{className:"text-sm font-medium text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full inline-block",children:[d.customization.sound?.volume||80,"%"]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-medium text-slate-600",children:"Duration (seconds, max 5)"}),i.jsx(r.I,{type:"number",min:"1",max:"5",value:d.customization.sound?.duration||3,onChange:e=>R("customization.sound.duration",parseInt(e.target.value)),className:"border-slate-200 focus:border-purple-300 focus:ring-2 focus:ring-purple-100"})]})]})]})]})]})}),(0,i.jsxs)("div",{className:"space-y-8",children:[e&&(0,i.jsxs)(n.Zb,{className:"border-0 shadow-lg bg-white",children:[(0,i.jsxs)(n.Ol,{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-t-lg",children:[(0,i.jsxs)(n.ll,{className:"flex items-center gap-3 text-white",children:[i.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,i.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),"Widget Information"]}),i.jsx(n.SZ,{className:"text-green-100",children:"Use this URL in your OBS browser source"})]}),(0,i.jsxs)(n.aY,{className:"p-6 space-y-4",children:[(0,i.jsxs)("div",{children:[i.jsx(l._,{className:"text-sm font-semibold text-green-800 mb-2 block",children:"Widget URL"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(r.I,{value:e.widgetUrl,readOnly:!0,className:"font-mono text-sm bg-white/70 border-green-200 focus:border-green-300"}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>{let t=e?.widgetUrl||"";if(t)try{"undefined"!=typeof navigator&&navigator.clipboard&&"function"==typeof navigator.clipboard.writeText?navigator.clipboard.writeText(t).catch(()=>$(t)):$(t)}catch{$(t)}},className:"border-indigo-200 text-indigo-700 hover:bg-indigo-50 hover:border-indigo-300 transition-all duration-200",children:"Copy"})]})]}),(0,i.jsxs)("div",{children:[i.jsx(l._,{className:"text-sm font-semibold text-green-800 mb-2 block",children:"Alert Token"}),i.jsx(r.I,{value:e.alertToken,readOnly:!0,className:"font-mono text-sm bg-white/70 border-green-200 focus:border-green-300"})]})]})]}),(0,i.jsxs)(n.Zb,{className:"border-0 shadow-lg bg-white",children:[(0,i.jsxs)(n.Ol,{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-t-lg",children:[(0,i.jsxs)(n.ll,{className:"flex items-center gap-3 text-white",children:[i.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),"Bank Donation Total Widget"]}),i.jsx(n.SZ,{className:"text-green-100",children:"Display total bank donations in your stream"})]}),(0,i.jsxs)(n.aY,{className:"p-6 space-y-4",children:[(0,i.jsxs)("div",{children:[i.jsx(l._,{className:"text-sm font-semibold text-green-800 mb-2 block",children:"Bank Total Widget URL"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(r.I,{value:e?.streamerId?`http://14.225.211.248:3001/api/widget-public/bank-total/${e.streamerId}`:"",readOnly:!0,className:"font-mono text-sm bg-white/70 border-green-200 focus:border-green-300"}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>{let t=e?.streamerId?`http://14.225.211.248:3001/api/widget-public/bank-total/${e.streamerId}`:"";t&&navigator.clipboard.writeText(t).catch(()=>{let e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)})},className:"border-green-200 text-green-700 hover:bg-green-50 hover:border-green-300 transition-all duration-200",children:"Copy"})]}),i.jsx("p",{className:"text-xs text-green-600 mt-2",children:"Use this URL in OBS as a Browser Source to display your total bank donations"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[i.jsx(l._,{className:"text-sm font-semibold text-green-800 mb-2 block",children:"Theme"}),(0,i.jsxs)("select",{className:"w-full p-2 border border-green-200 rounded-lg bg-white focus:border-green-300 focus:ring-2 focus:ring-green-100 text-sm",onChange:t=>{let s=process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001",i=e?.streamerId;if(i){let e=`${s}/api/widget-public/bank-total/${i}?theme=${t.target.value}`;navigator.clipboard.writeText(e).catch(()=>{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})}},children:[i.jsx("option",{value:"dark",children:"Dark"}),i.jsx("option",{value:"light",children:"Light"}),i.jsx("option",{value:"transparent",children:"Transparent"})]})]}),(0,i.jsxs)("div",{children:[i.jsx(l._,{className:"text-sm font-semibold text-green-800 mb-2 block",children:"Show Stats"}),(0,i.jsxs)("select",{className:"w-full p-2 border border-green-200 rounded-lg bg-white focus:border-green-300 focus:ring-2 focus:ring-green-100 text-sm",onChange:t=>{let s=process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001",i=e?.streamerId;if(i){let e=`${s}/api/widget-public/bank-total/${i}?showStats=${t.target.value}`;navigator.clipboard.writeText(e).catch(()=>{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})}},children:[i.jsx("option",{value:"false",children:"Basic Total"}),i.jsx("option",{value:"true",children:"Detailed Stats"})]})]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>{let t=process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001",s=e?.streamerId;if(s){let e=`${t}/api/widget-public/bank-total/${s}`;window.open(e,"_blank")}},className:"flex-1 border-green-200 text-green-700 hover:bg-green-50 hover:border-green-300 transition-all duration-200",children:[i.jsx(j.Z,{className:"w-4 h-4 mr-2"}),"Preview Widget"]}),(0,i.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>{let t=process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001",s=e?.streamerId;if(s){let e=`${t}/api/widget-public/bank-total/${s}?showStats=true`;window.open(e,"_blank")}},className:"flex-1 border-green-200 text-green-700 hover:bg-green-50 hover:border-green-300 transition-all duration-200",children:[i.jsx(N,{className:"w-4 h-4 mr-2"}),"Preview with Stats"]})]}),(0,i.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,i.jsxs)("h4",{className:"font-semibold text-green-900 mb-2 flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:"\uD83D\uDCA1"}),"Setup Instructions"]}),(0,i.jsxs)("ul",{className:"text-sm text-green-800 space-y-1",children:[i.jsx("li",{children:"• Copy the widget URL above"}),i.jsx("li",{children:"• Add as Browser Source in OBS Studio"}),i.jsx("li",{children:"• Set width to 400px, height to 200px"}),i.jsx("li",{children:'• Check "Shutdown source when not visible"'}),i.jsx("li",{children:"• Choose theme and stats options as needed"})]})]})]})]}),(0,i.jsxs)(n.Zb,{className:"border-0 shadow-lg bg-white",children:[(0,i.jsxs)(n.Ol,{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-t-lg",children:[(0,i.jsxs)(n.ll,{className:"flex items-center gap-3 text-white",children:[i.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),"Settings Behavior"]}),i.jsx(n.SZ,{className:"text-purple-100",children:"Choose how donation alerts should use your settings"})]}),i.jsx(n.aY,{className:"p-6 space-y-4",children:(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Donation Alert Behavior"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("label",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"settingsBehavior",value:"auto",checked:e?.settingsBehavior==="auto",onChange:t=>{e&&E(t.target.value)},className:"mt-1 h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Auto (Recommended)"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Use donation levels when they match the donation amount, otherwise use basic settings"})]})]}),(0,i.jsxs)("label",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"settingsBehavior",value:"basic",checked:e?.settingsBehavior==="basic",onChange:t=>{e&&E(t.target.value)},className:"mt-1 h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Always Use Basic Settings"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Always use your basic settings, ignoring donation levels completely"})]})]}),(0,i.jsxs)("label",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"settingsBehavior",value:"donation-levels",checked:e?.settingsBehavior==="donation-levels",onChange:t=>{e&&E(t.target.value)},className:"mt-1 h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Always Use Donation Levels"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Always use donation levels if available, fallback to basic settings if none configured"})]})]})]})]})})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{className:"space-y-8",children:(0,i.jsxs)(n.Zb,{className:"border-0 shadow-lg bg-white",children:[(0,i.jsxs)(n.Ol,{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-t-lg",children:[(0,i.jsxs)(n.ll,{className:"flex items-center gap-3 text-white",children:[i.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:i.jsx(S,{className:"w-5 h-5"})}),"Display Settings"]}),i.jsx(n.SZ,{className:"text-emerald-100",children:"Customize how your alerts appear on screen"})]}),(0,i.jsxs)(n.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Animation Effect"}),i.jsx("select",{value:d.customization.text?.animation||"fade",onChange:e=>R("customization.text.animation",e.target.value),className:"w-full p-3 border border-slate-200 rounded-lg bg-white focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200",children:[{value:"none",label:"None"},{value:"fade",label:"Fade In/Out"},{value:"slide",label:"Slide In/Out"},{value:"bounce",label:"Bounce"}].map(e=>i.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Colors"}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-xs font-medium text-slate-600",children:"Background"}),i.jsx("div",{className:"relative",children:i.jsx(r.I,{type:"color",value:d.customization.text?.backgroundColor||"#1a1a1a",onChange:e=>R("customization.text.backgroundColor",e.target.value),className:"w-full h-12 border border-slate-200 rounded-lg cursor-pointer"})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-xs font-medium text-slate-600",children:"Text"}),i.jsx("div",{className:"relative",children:i.jsx(r.I,{type:"color",value:d.customization.text?.color||"#ffffff",onChange:e=>R("customization.text.color",e.target.value),className:"w-full h-12 border border-slate-200 rounded-lg cursor-pointer"})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-xs font-medium text-slate-600",children:"Accent"}),i.jsx("div",{className:"relative",children:i.jsx(r.I,{type:"color",value:d.customization.text?.color||"#ffffff",onChange:e=>R("customization.text.color",e.target.value),className:"w-full h-12 border border-slate-200 rounded-lg cursor-pointer"})})]})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Typography"}),i.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:(0,i.jsxs)("p",{className:"text-xs text-indigo-800",children:[i.jsx("strong",{children:"\uD83D\uDCA1 Tip:"}),' You can use any Google Font by typing its name (e.g., "Roboto", "Open Sans", "Lato"). The font will be automatically loaded from Google Fonts when used in your alerts.']})}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-xs font-medium text-slate-600",children:"Font Family"}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx("select",{value:d.customization.text?.font||"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif",onChange:e=>R("customization.text.font",e.target.value),className:"w-full p-3 border border-slate-200 rounded-lg bg-white focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200 text-sm",children:["Inter","Arial","Helvetica","Verdana","Tahoma","Trebuchet MS","Arial Black","Impact","Franklin Gothic Medium","Gill Sans","Lucida Sans Unicode","Lucida Grande","Geneva","Segoe UI","Roboto","Open Sans","Lato","Source Sans Pro","Nunito","Poppins","Montserrat","Raleway","Ubuntu","PT Sans","Droid Sans","Liberation Sans","Work Sans","DM Sans","Manrope","Outfit","Plus Jakarta Sans","Figtree","Space Grotesk","Inter Tight","Sora","Epilogue","Cabinet Grotesk","Satoshi","Geist","SF Pro Display","SF Pro Text","Circular","Proxima Nova","Avenir","Futura","Gotham","Brandon Grotesque","Neue Haas Grotesk","Helvetica Neue","Times New Roman","Georgia","Times","Palatino","Book Antiqua","Garamond","Minion Pro","Baskerville","Hoefler Text","Bodoni MT","Didot","American Typewriter","Courier","Courier New","Monaco","Menlo","Consolas","Liberation Mono","PT Serif","Crimson Text","Lora","Merriweather","Playfair Display","Libre Baskerville","Source Serif Pro","Crimson Pro","Libre Baskerville","Lora","Merriweather","Playfair Display","PT Serif","Crimson Text","EB Garamond","Libre Caslon Text","Cormorant Garamond","Old Standard TT","Alegreya","Lusitana","Vollkorn","Crimson Pro","Source Serif 4","Fraunces","Recoleta","Charter","Iowan Old Style","Comic Sans MS","Papyrus","Chalkduster","Bradley Hand","Brush Script MT","Marker Felt","Trattatello","Zapfino","Snell Roundhand","Apple Chancery","Lucida Handwriting","Kalam","Caveat","Dancing Script","Pacifico","Lobster","Bebas Neue","Oswald","Anton","Fjalla One","Righteous","Fredoka One","Bebas Neue","Oswald","Anton","Fjalla One","Righteous","Fredoka One","Bungee","Bungee Shade","Creepster","Fascinate","Fascinate Inline","Faster One","Flamenco","Freckle Face","Frijole","Fruktur","Fugaz One","Gravitas One","Iceberg","Iceland","Jolly Lodger","Knewave","Lemon","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Love Ya Like A Sister","Luckiest Guy","Macondo","Macondo Swash Caps","Merienda","Merienda One","Metal","Metal Mania","Miltonian","Miltonian Tattoo","Miniver","Monofett","Monoton","Mountains of Christmas","Mouse Memoirs","Mystery Quest","Nerko One","New Rocker","Nosifer","Notable","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Orbitron","Oregano","Original Surfer","Overlock","Overlock SC","Ovo","Oxanium","Oxygen","Oxygen Mono","PT Mono","Pacifico","Padauk","Palanquin","Palanquin Dark","Pangolin","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Pattaya","Patua One","Pavanam","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Potta One","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Pridi","Princess Sofia","Prociono","Prompt","Prosto One","Proza Libre","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Rakkas","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rasa","Rationale","Ravi Prakash","Recursive","Red Hat Display","Red Hat Mono","Red Hat Text","Red Rose","Redressed","Reem Kufi","Reenie Beanie","Reggae One","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","RocknRoll One","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rowdies","Rozha One","Rubik","Rubik Beastly","Rubik Bubbles","Rubik Glitch","Rubik Microbe","Rubik Mono One","Rubik Moonrocks","Rubik Puddles","Rubik Wet Paint","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Saira","Saira Condensed","Saira Extra Condensed","Saira Semi Condensed","Saira Stencil One","Salsa","Sanchez","Sancreek","Sansita","Sansita Swashed","Sarabun","Sarala","Sarina","Sarpanch","Satisfy","Sawarabi Gothic","Sawarabi Mincho","Scada","Scheherazade New","Schoolbell","Scope One","Seaweed Script","Secular One","Sedgwick Ave","Sedgwick Ave Display","Sen","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shippori Antique","Shippori Antique B1","Shippori Mincho","Shippori Mincho B1","Shizuru","Shojumaru","Short Stack","Shrikhand","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Single Day","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smooch","Smooch Sans","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Solway","Song Myung","Sonsie One","Sora","Sorts Mill Goudy","Source Code Pro","Source Sans 3","Source Sans Pro","Source Serif 4","Source Serif Pro","Space Grotesk","Space Mono","Special Elite","Spectral","Spectral SC","Spicy Rice","Spinnaker","Spirax","Squada One","Square Peg","Sree Krushnadevaraya","Sriracha","Srisakdi","Staatliches","Stalemate","Stalinist One","Stardos Stencil","Stick","Stick No Bills","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Style Script","Stylish","Sue Ellen Francisco","Suez One","Sulphur Point","Sumana","Sunflower","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Syne","Syne Mono","Syne Tactile","Tajawal","Tangerine","Taprom","Tauri","Taviraj","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","Texturina","Thasadith","The Girl Next Door","The Nautigal","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Tomorrow","Tourney","Trade Winds","Train One","Trirong","Trispace","Trocchi","Trochut","Truculenta","Trykker","Tulpen One","Turret Road","Twinkle Star","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Uchen","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","Updock","Urbanist","VT323","Vampiro One","Varela","Varela Round","Varta","Vast Shadow","Vazirmatn","Vesper Libre","Viaoda Libre","Vibes","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Vollkorn SC","Voltaire","Vujahday Script","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Water Brush","Waterfall","Wellfleet","Wendy One","Whisper","WindSong","Wire One","Work Sans","Xanh Mono","Yaldevi","Yanone Kaffeesatz","Yantramanav","Yatra One","Yellowtail","Yeon Sung","Yeseva One","Yesteryear","Yomogi","Yrsa","Yuji Boku","Yuji Mai","Yuji Syuku","Yusei Magic","ZCOOL KuaiLe","ZCOOL QingKe HuangYou","ZCOOL XiaoWei","Zen Antique","Zen Antique Soft","Zen Dots","Zen Kaku Gothic Antique","Zen Kaku Gothic New","Zen Kurenaido","Zen Loop","Zen Maru Gothic","Zen Old Mincho","Zen Tokyo Zoo","Zeyada","Zhi Mang Xing","Zilla Slab","Zilla Slab Highlight","Courier New","Monaco","Menlo","Consolas","Liberation Mono","DejaVu Sans Mono","Bitstream Vera Sans Mono","Andale Mono","Lucida Console","Monaco","Fixed","Fira Code","JetBrains Mono","Source Code Pro","Roboto Mono","Space Mono","Ubuntu Mono","PT Mono","Inconsolata","Anonymous Pro","Cascadia Code","-apple-system","BlinkMacSystemFont","system-ui","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue","sans-serif"].map(e=>i.jsx("option",{value:e,children:e},e))}),i.jsx(r.I,{type:"text",placeholder:"Or type a custom font name (e.g., 'Roboto', 'Open Sans')",value:d.customization.text?.font||"",onChange:e=>R("customization.text.font",e.target.value),className:"text-xs border-slate-200 focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-xs font-medium text-slate-600",children:"Size (px)"}),i.jsx(r.I,{type:"number",min:"8",max:"48",value:d.customization.text?.fontSize||16,onChange:e=>R("customization.text.fontSize",parseInt(e.target.value)),className:"border-slate-200 focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-xs font-medium text-slate-600",children:"Weight"}),(0,i.jsxs)("select",{value:d.customization.text?.font||"Inter",onChange:e=>R("customization.text.font",e.target.value),className:"w-full p-3 border border-slate-200 rounded-lg bg-white focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200 text-sm",children:[i.jsx("option",{value:"normal",children:"Normal"}),i.jsx("option",{value:"bold",children:"Bold"})]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Position"}),i.jsx("select",{value:d.customization.position,onChange:e=>R("customization.position",e.target.value),className:"w-full p-3 border border-slate-200 rounded-lg bg-white focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200",children:[{value:"top-left",label:"Top Left"},{value:"top-right",label:"Top Right"},{value:"bottom-left",label:"Bottom Left"},{value:"bottom-right",label:"Bottom Right"},{value:"center",label:"Center"}].map(e=>i.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(l._,{className:"text-sm font-semibold text-slate-700",children:"Display Duration (seconds)"}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(r.I,{type:"range",min:"5",max:"15",step:"1",value:d.customization.duration,onChange:e=>R("customization.duration",parseInt(e.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer slider"}),(0,i.jsxs)("div",{className:"flex justify-between text-sm text-slate-600",children:[i.jsx("span",{className:"font-medium",children:"5s"}),(0,i.jsxs)("span",{className:"font-bold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full",children:[d.customization.duration," seconds"]}),i.jsx("span",{className:"font-medium",children:"15s"})]})]})]})]})]})}),i.jsx("div",{className:"space-y-8",children:(0,i.jsxs)(n.Zb,{className:"border-0 shadow-lg bg-white",children:[(0,i.jsxs)(n.Ol,{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-t-lg",children:[(0,i.jsxs)(n.ll,{className:"flex items-center gap-3 text-white",children:[i.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:i.jsx(j.Z,{className:"w-5 h-5"})}),"Live Preview"]}),i.jsx(n.SZ,{className:"text-amber-100",children:"See how your alerts will look in real-time"})]}),(0,i.jsxs)(n.aY,{children:[i.jsx("div",{className:"mb-6",children:i.jsx(o.z,{variant:"outline",onClick:()=>z(!h),className:"w-full border-indigo-200 text-indigo-700 hover:bg-indigo-50 hover:border-indigo-300 transition-all duration-200",children:h?"Hide Preview":"Show Preview"})}),h&&g&&(0,i.jsxs)("div",{className:"relative border-2 border-dashed border-amber-200 rounded-xl p-6 min-h-[300px] bg-gradient-to-br from-amber-50 to-orange-50 shadow-inner",children:[(0,i.jsxs)("div",{className:`absolute transition-all duration-500 ${"fade"===g.animation?"animate-fade-in":"slide"===g.animation?"animate-slide-in":"bounce"===g.animation?"animate-bounce":""}`,style:{left:"center"===g.position?"50%":"top-left"===g.position||"bottom-left"===g.position?"20px":void 0,top:"center"===g.position?"50%":"top-left"===g.position||"top-right"===g.position?"20px":void 0,right:"top-right"===g.position||"bottom-right"===g.position?"20px":void 0,bottom:"bottom-left"===g.position||"bottom-right"===g.position?"20px":void 0,transform:"center"===g.position?"translate(-50%, -50%)":void 0,backgroundColor:g.colors.background,color:g.colors.text,fontFamily:g.fonts.family,fontSize:`${g.fonts.size}px`,fontWeight:g.fonts.weight,maxWidth:"300px",padding:"16px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1e3},children:[g.image?.url&&i.jsx("div",{className:"mb-3",children:"video"===g.image.type?i.jsx("video",{ref:M,src:g.image.url,className:"w-full h-20 object-cover rounded",muted:!0,loop:!0}):i.jsx("img",{src:g.image.url,alt:"Alert media",className:"w-full h-20 object-cover rounded"})}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("span",{className:"font-semibold",children:`${g.donorName} donate ${"VND"===g.currency?Math.round(1e3*Number(g.amount)).toLocaleString("vi-VN"):Number(g.amount).toLocaleString()} ${g.currency}`})}),g.message&&i.jsx("p",{className:"text-sm opacity-90",children:g.message})]})]}),(0,i.jsxs)("div",{className:"absolute bottom-4 left-4 space-x-2",children:[g.image?.type==="video"&&(0,i.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>{M.current&&d.customization.image?.url&&"video"===d.customization.image.type&&(M.current.currentTime=0,M.current.play())},children:[i.jsx(y,{className:"w-4 h-4 mr-1"}),"Play Video"]}),g.sound?.url&&(0,i.jsxs)(o.z,{variant:"outline",size:"sm",onClick:_,children:[i.jsx(w,{className:"w-4 h-4 mr-1"}),"Play Sound"]})]})]}),(0,i.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-br from-amber-50 to-orange-50 rounded-xl border border-amber-200",children:[(0,i.jsxs)("h4",{className:"font-semibold text-amber-900 mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:"\uD83D\uDCCA"}),"Preview Information"]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm text-amber-800",children:[(0,i.jsxs)("div",{className:"bg-white/50 p-2 rounded-lg",children:[i.jsx("span",{className:"font-medium",children:"Donor:"})," ",g?.donorName]}),(0,i.jsxs)("div",{className:"bg-white/50 p-2 rounded-lg",children:[i.jsx("span",{className:"font-medium",children:"Amount:"})," ","$",g?.amount," ",g?.currency]}),(0,i.jsxs)("div",{className:"bg-white/50 p-2 rounded-lg",children:[i.jsx("span",{className:"font-medium",children:"Animation:"})," ",d.customization.text?.animation||"fade"]}),(0,i.jsxs)("div",{className:"bg-white/50 p-2 rounded-lg",children:[i.jsx("span",{className:"font-medium",children:"Position:"})," ",d.customization.position]}),(0,i.jsxs)("div",{className:"bg-white/50 p-2 rounded-lg col-span-2",children:[i.jsx("span",{className:"font-medium",children:"Duration:"})," ",d.customization.duration,"s"]})]})]})]})]})})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[i.jsx(o.z,{onClick:F,disabled:m,className:`flex-1 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${m?"animate-pulse":""}`,children:m?(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving Configuration..."]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx(k.Z,{className:"w-4 h-4 mr-2"}),"Save Configuration"]})}),(0,i.jsxs)(o.z,{variant:"outline",onClick:U,disabled:!e,className:"flex-1 border-indigo-200 text-indigo-700 hover:bg-indigo-50 hover:border-indigo-300 transition-all duration-200",children:[i.jsx(N,{className:"w-4 h-4 mr-2"}),"Test Alert"]})]}),D&&i.jsx("div",{className:`mt-4 p-4 rounded-xl border-2 shadow-lg animate-fade-in ${"success"===D.type?"bg-gradient-to-r from-green-50 to-emerald-50 text-green-900 border-green-300":"bg-gradient-to-r from-red-50 to-rose-50 text-red-900 border-red-300"}`,children:(0,i.jsxs)("div",{className:"flex items-center",children:["success"===D.type?i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3",children:i.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}):i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3",children:i.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-sm",children:D.text}),"success"===D.type&&i.jsx("p",{className:"text-xs text-green-700 mt-1",children:"Your configuration is now active and ready to use!"}),"error"===D.type&&i.jsx("p",{className:"text-xs text-red-700 mt-1",children:"Please check your settings and try again."})]})]})}),i.jsx("audio",{ref:P,src:d.customization.sound?.url}),i.jsx("video",{ref:M,src:d.customization.image?.url,muted:!0}),i.jsx(p,{isOpen:B.isOpen,onClose:()=>L(e=>({...e,isOpen:!1})),type:B.type,title:B.title,message:B.message,details:B.details}),O&&D&&i.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full transform transition-all duration-300 ease-in-out ${O?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:i.jsx("div",{className:`p-4 rounded-lg shadow-lg border-l-4 ${"success"===D.type?"bg-indigo-50 border-indigo-400 text-indigo-800":"bg-red-50 border-red-400 text-red-800"}`,children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:"success"===D.type?i.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):i.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm font-medium",children:D.text})}),i.jsx("div",{className:"ml-auto pl-3",children:i.jsx("button",{onClick:()=>{A(!1),T(null)},className:`inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 ${"success"===D.type?"text-indigo-500 hover:bg-indigo-100 focus:ring-indigo-600":"text-red-500 hover:bg-red-100 focus:ring-red-600"}`,children:i.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})})})]})},D=({settings:e,isVisible:t,onClose:s})=>{let[r,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)({donorName:"Test Donor",amount:25,currency:"VND",message:"This is a test alert message!"});return((0,a.useEffect)(()=>{if(t){let e=setTimeout(()=>{l(!0)},500);return()=>clearTimeout(e)}},[t]),(0,a.useEffect)(()=>{if(r){let t=setTimeout(()=>{l(!1),s()},1e3*(e.customization?.duration||8));return()=>clearTimeout(t)}},[r,e.customization?.duration,s]),t)?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)(n.Zb,{className:"w-96 max-w-[90vw]",children:[(0,i.jsxs)(n.Ol,{children:[i.jsx(n.ll,{children:"OBS Widget Demo"}),i.jsx(n.SZ,{children:"This is how your alert will appear in OBS"})]}),(0,i.jsxs)(n.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"border-2 border-gray-300 rounded-lg p-4 bg-gray-100 min-h-[200px] relative",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"OBS Browser Source Preview"}),r&&(0,i.jsxs)("div",{className:`absolute transition-all duration-500 ${e.customization?.text?.animation==="fade"?"animate-fade-in":e.customization?.text?.animation==="slide"?"animate-slide-in":e.customization?.text?.animation==="bounce"?"animate-bounce":""}`,style:{left:e.customization?.position==="top-left"||e.customization?.position==="bottom-left"?"20px":void 0,top:e.customization?.position==="top-left"||e.customization?.position==="top-right"?"20px":void 0,right:e.customization?.position==="top-right"||e.customization?.position==="bottom-right"?"20px":void 0,bottom:e.customization?.position==="bottom-left"||e.customization?.position==="bottom-right"?"20px":void 0,backgroundColor:e.customization?.text?.backgroundColor||"#1a1a1a",color:e.customization?.text?.color||"#ffffff",fontFamily:e.customization?.text?.font||"Inter",fontSize:`${e.customization?.text?.fontSize||16}px`,fontWeight:"normal",maxWidth:"250px",padding:"12px",borderRadius:"6px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",zIndex:1e3},children:[e.customization?.image?.url&&i.jsx("div",{className:"mb-2",children:"video"===e.customization.image.type?i.jsx("video",{src:e.customization.image.url,className:"w-full h-16 object-cover rounded",muted:!0,autoPlay:!0,loop:!0}):i.jsx("img",{src:e.customization.image.url,alt:"Alert media",className:"w-full h-16 object-cover rounded"})}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold text-sm",children:d.donorName}),(0,i.jsxs)("span",{className:"text-base font-bold",style:{color:"#3b82f6"},children:["$",d.amount]})]}),d.message&&i.jsx("p",{className:"text-xs opacity-90",children:d.message})]})]}),!r&&i.jsx("div",{className:"text-center text-gray-500 py-8",children:"Alert will appear here..."})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[i.jsx(o.z,{onClick:()=>{l(!1),setTimeout(()=>l(!0),100)},className:"flex-1",children:"Replay Alert"}),i.jsx(o.z,{variant:"outline",onClick:s,className:"flex-1",children:"Close Demo"})]}),(0,i.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-blue-900 mb-2 text-sm",children:"Widget Information"}),(0,i.jsxs)("div",{className:"text-xs text-blue-800 space-y-1",children:[(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"URL:"})," ",e.widgetUrl]}),(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Token:"})," ",e.alertToken]}),(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Duration:"})," ",e.customization?.duration||8,"s"]}),(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Position:"})," ",e.customization?.position||"top-right"]})]})]})]})]})}):null},T=(0,d.Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),O=(0,d.Z)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var A=s(88387);let P=(0,d.Z)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),M=(0,d.Z)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),B=({settings:e,onSave:t,onTest:s})=>{let[d,c]=(0,a.useState)([]),[m,u]=(0,a.useState)(null),[x,h]=(0,a.useState)(!1),[f,z]=(0,a.useState)(null),[D,B]=(0,a.useState)(!1),[L,R]=(0,a.useState)(!1),[I,F]=(0,a.useState)(null),[U,_]=(0,a.useState)(!1),[$,E]=(0,a.useState)(!1),[W,Z]=(0,a.useState)(null),V=(0,a.useRef)({}),q=(0,a.useRef)(null),G=(0,a.useRef)(null),Y=(0,a.useRef)(null),[H,J]=(0,a.useState)({isOpen:!1,type:"warning",title:"",message:""});(0,a.useEffect)(()=>{console.log("\uD83D\uDD04 DonationLevelConfig: Settings changed:",e),console.log("\uD83D\uDCDD DonationLevelConfig: Donation levels in settings:",e?.donationLevels),e?.donationLevels?(console.log("✅ DonationLevelConfig: Setting donation levels:",e.donationLevels),c(e.donationLevels)):console.log("❌ DonationLevelConfig: No donation levels found in settings")},[e]);let K=()=>`level_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,X=(e,t,s=null)=>{if(!e?.configuration||e.configuration.removed)return s;let i=t.split("."),a=e.configuration;for(let e of i){if(!a||"object"!=typeof a||!(e in a))return s;a=a[e]}return void 0!==a?a:s},Q=(e,t,s=0)=>!e||void 0===e[t]||null===e[t]||isNaN(e[t])?s:e[t],ee=(e,t="VND")=>e&&e.currency?e.currency:t,et=(e,t)=>{let s={levelId:e.levelId,updatedAt:new Date};if(t&&e.levelName===t.levelName||(s.levelName=e.levelName),t&&e.minAmount===t.minAmount||(s.minAmount=e.minAmount),t&&e.maxAmount===t.maxAmount||(s.maxAmount=e.maxAmount),t&&e.currency===t.currency||(s.currency=e.currency),t&&e.isEnabled===t.isEnabled||(s.isEnabled=e.isEnabled),e.configuration){let i={},a=!1;for(let s of["imageSettings","soundSettings","animationSettings","styleSettings","positionSettings","displaySettings","generalSettings"]){let n=e.configuration[s],o=t?.configuration?.[s];n&&(!o||JSON.stringify(n)!==JSON.stringify(o))&&(i[s]=n,a=!0)}a&&(s.configuration=i)}let i=e.customization;if(i){let e=t?.customization;e&&JSON.stringify(i)===JSON.stringify(e)||(s.customization=i)}return console.log(`📊 Differential update created:`,{fields:Object.keys(s),size:JSON.stringify(s).length,originalSize:t?JSON.stringify(t).length:0,reduction:t?`${((1-JSON.stringify(s).length/JSON.stringify(t).length)*100).toFixed(1)}%`:"N/A"}),s},es=()=>({levelId:K(),levelName:"",minAmount:0,maxAmount:1e5,currency:"VND",isEnabled:!0,configuration:{imageSettings:{enabled:!0,mediaType:"image",width:300,height:200,borderRadius:8,shadow:!0,shadowColor:"#000000",shadowBlur:10,shadowOffsetX:2,shadowOffsetY:2},soundSettings:{enabled:!0,volume:80,fadeIn:0,fadeOut:0,loop:!1},animationSettings:{enabled:!0,animationType:"fade",duration:500,easing:"ease-out",direction:"right",bounceIntensity:20,zoomScale:1.2},styleSettings:{backgroundColor:"#1a1a1a",textColor:"#ffffff",accentColor:"#00ff00",borderColor:"#333333",borderWidth:2,borderStyle:"solid",fontFamily:"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif",fontSize:16,fontWeight:"normal",fontStyle:"normal",textShadow:!0,textShadowColor:"#000000",textShadowBlur:3,textShadowOffsetX:1,textShadowOffsetY:1},positionSettings:{x:100,y:100,anchor:"top-left",zIndex:1e3,responsive:!0,mobileScale:.8},displaySettings:{duration:5e3,fadeInDuration:300,fadeOutDuration:300,autoHide:!0,showProgress:!1,progressColor:"#00ff00",progressHeight:3},generalSettings:{enabled:!0,maxAlerts:3,alertSpacing:20,cooldown:1e3,priority:"medium"}},createdAt:new Date,updatedAt:new Date}),ei=()=>{let e=es();u(e),E(!0),q.current=e.levelId,requestAnimationFrame(()=>{let e=document.getElementById("new-level-editor");e&&"function"==typeof e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"start"})})},ea=e=>{u({...e,minAmount:e.minAmount??0,maxAmount:e.maxAmount??1e5,currency:e.currency??"VND",isEnabled:e.isEnabled??!0,levelName:e.levelName??""}),E(!1),q.current=e.levelId,requestAnimationFrame(()=>{let t=V.current[e.levelId];t&&"function"==typeof t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"start"})})},en=async e=>{try{let t=(0,C.hV)();if(!t){z({type:"error",text:"Authentication required. Please log in again."}),B(!0);return}let s=await fetch(`/api/obs-settings/donation-levels/${encodeURIComponent(e)}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||"Failed to delete donation level")}c(t=>t.filter(t=>t.levelId!==e)),m?.levelId===e&&u(null),z({type:"success",text:"Donation level deleted successfully"}),B(!0)}catch(e){console.error("Error deleting level:",e),z({type:"error",text:e?.message||"Failed to delete donation level"}),B(!0)}},eo=async()=>{if(m){if(!m.levelName.trim()){z({type:"error",text:"Level name is required"}),B(!0);return}if(m.minAmount>=m.maxAmount){z({type:"error",text:"Max amount must be greater than min amount"}),B(!0);return}try{Z(0);let e=d.findIndex(e=>e.levelId===m.levelId),s=et(m,e>=0?d[e]:null),i={...m,updatedAt:new Date},a=e>=0?d.map((t,s)=>s===e?i:t):[...d,i],n=JSON.stringify(s).length;if(console.log(`📊 Differential update size: ${(n/1048576).toFixed(2)}MB`),e>=0){let t=d[e],s=JSON.stringify(t).length,i=((1-n/s)*100).toFixed(1);console.log(`📊 Size reduction: ${i}% (${(s/1048576).toFixed(2)}MB → ${(n/1048576).toFixed(2)}MB)`)}if(n>1048576&&(Z(25),await new Promise(e=>setTimeout(e,100)),Z(50),await new Promise(e=>setTimeout(e,100)),Z(75)),e>=0)await t([s]);else{let e={...i,levelId:i.levelId};await t([e])}Z(100),c(a);let o=i.optimizationApplied;z({type:"success",text:o?"Level saved successfully! Some large media files were automatically optimized to fit database limits.":"Level saved successfully!"}),B(!0),u(null),E(!1),Z(null);let r=q.current;r&&requestAnimationFrame(()=>{setTimeout(()=>{let e=V.current[r];e&&"function"==typeof e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"start"})},200)})}catch(t){console.error("Failed to save level:",t);let e="Failed to save level. Please try again.";t instanceof Error&&(t.message.includes("413")||t.message.includes("too large")||t.message.includes("PAYLOAD_TOO_LARGE")?e="File size too large. Please use smaller images or audio files (under 50MB each).":t.message.includes("BSON")||t.message.includes("16MB")||t.message.includes("MongoDB")?e="Files are too large for storage. Large media files have been automatically optimized. Please try saving again.":t.message.includes("optimized")||t.message.includes("removed due to size")?e="Your donation level has been automatically optimized to fit database limits. Some large media files may have been removed. Please try saving again.":t.message.includes("401")||t.message.includes("unauthorized")?e="Authentication required. Please log in again.":t.message.includes("403")||t.message.includes("forbidden")?e="Access denied. You do not have permission to save levels.":(t.message.includes("network")||t.message.includes("fetch"))&&(e="Network error. Please check your connection and try again.")),z({type:"error",text:e}),B(!0),Z(null)}}},er=()=>{m&&d.some(e=>e.levelId===m.levelId),u(null),E(!1);let e=q.current;requestAnimationFrame(()=>{setTimeout(()=>{let t=e?V.current[e]:null;t&&"function"==typeof t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"start"})},200)})},el=async()=>{try{h(!0);let e=localStorage.getItem("token");if(!e)throw Error("Authentication required. Please log in again.");let t=await fetch("/api/obs-settings/restore-optimized-levels",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"Failed to restore optimized levels")}z({type:"success",text:"Optimized levels restored successfully! The configuration structure has been fixed."}),B(!0),setTimeout(()=>{window.location.reload()},2e3)}catch(e){console.error("Error restoring optimized levels:",e),z({type:"error",text:e instanceof Error?e.message:"Failed to restore optimized levels"}),B(!0)}finally{h(!1)}},ed=async()=>{h(!0),z(null);try{await t(d),z({type:"success",text:"Donation levels saved successfully!"}),B(!0),setTimeout(()=>{z(null),B(!1)},5e3)}catch(e){console.error("Failed to save donation levels:",e),z({type:"error",text:"Failed to save donation levels. Please try again."}),B(!0),setTimeout(()=>{z(null),B(!1)},8e3)}finally{h(!1)}},ec=async e=>{try{await s(e)}catch(e){console.error("Failed to test level:",e)}},em=e=>{F(e),R(!0)},eu=t=>e?.widgetUrl?`${e.widgetUrl}?level=${t.levelId}`:"",eg=t=>e?.alertToken?`${e.alertToken}_${t.levelId}`:"",ex=e=>{G.current&&(G.current.src=e,G.current.currentTime=0,G.current.play())},eh=(e,t)=>null==e||isNaN(e)?`0 ${t}`:"VND"===t?`${e.toLocaleString("vi-VN")} VND`:`${e.toLocaleString()} ${t}`,ep=!!(m&&d.some(e=>e.levelId===m.levelId));return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Donation Level Configuration"}),d.some(e=>e.optimizationApplied)&&(0,i.jsxs)(o.z,{onClick:el,disabled:x,className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:[i.jsx(S,{className:"w-4 h-4 mr-2"}),x?"Restoring...":"Restore Optimized Levels"]})]}),i.jsx("div",{children:i.jsx("p",{className:"text-gray-600",children:"Configure different alert settings for different donation amounts"})}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsxs)(o.z,{variant:"outline",onClick:()=>{_(!0)},className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[i.jsx(g,{className:"w-4 h-4 mr-2"}),"Widget Info"]}),(0,i.jsxs)(o.z,{onClick:ei,className:"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white",children:[i.jsx(T,{className:"w-4 h-4 mr-2"}),"Add Level"]})]})]}),(0,i.jsxs)("div",{className:"grid gap-4",children:[d.map(e=>(0,i.jsxs)("div",{ref:t=>{V.current[e.levelId]=t},id:`level-${e.levelId}`,children:[(0,i.jsxs)(n.Zb,{className:"border border-gray-200 shadow-sm",children:[i.jsx(n.Ol,{className:"pb-3",children:(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(n.ll,{className:"text-lg flex items-center gap-2",children:[e.levelName,e&&"optimizationApplied"in e&&e.optimizationApplied&&i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Optimized"})]}),(0,i.jsxs)(n.SZ,{children:[eh(Q(e,"minAmount"),ee(e))," - ",eh(Q(e,"maxAmount"),ee(e))]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>em(e),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[i.jsx(j.Z,{className:"w-4 h-4 mr-1"}),"Preview"]}),(0,i.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>ec(e),className:"text-indigo-600 border-indigo-200 hover:bg-indigo-50",children:[i.jsx(N,{className:"w-4 h-4 mr-1"}),"Test"]}),(0,i.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>ea(e),className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[i.jsx(O,{className:"w-4 h-4 mr-1"}),"Edit"]}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>en(e.levelId),className:"text-red-600 border-red-200 hover:bg-red-50",children:i.jsx(A.Z,{className:"w-4 h-4"})})]})]})}),i.jsx(n.aY,{className:"pt-0",children:(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"font-medium text-gray-600",children:"Status:"}),i.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${e.isEnabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.isEnabled?"Enabled":"Disabled"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"font-medium text-gray-600",children:"Animation:"}),i.jsx("span",{className:"ml-2",children:X(e,"animationSettings.animationType","fade")})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"font-medium text-gray-600",children:"Duration:"}),(0,i.jsxs)("span",{className:"ml-2",children:[Math.round(X(e,"displaySettings.duration",5e3)/1e3),"s"]})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"font-medium text-gray-600",children:"Position:"}),i.jsx("span",{className:"ml-2",children:X(e,"positionSettings.anchor","top-left")})]})]})})]}),m&&m.levelId===e.levelId&&(0,i.jsxs)(n.Zb,{className:"border-2 border-indigo-200 shadow-lg mt-2",children:[(0,i.jsxs)(n.Ol,{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-t-lg",children:[(0,i.jsxs)(n.ll,{className:"flex items-center gap-3 text-white",children:[i.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:i.jsx(S,{className:"w-5 h-5"})}),m.levelId.startsWith("level_")?"Add New Level":"Edit Level"]}),i.jsx(n.SZ,{className:"text-indigo-100",children:"Configure alert settings for this donation range"})]}),(0,i.jsxs)(n.aY,{className:"space-y-6 p-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Level Name"}),i.jsx(r.I,{value:m.levelName,onChange:e=>u(t=>t?{...t,levelName:e.target.value}:null),placeholder:"e.g., Small Donation, Big Donation",className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Currency"}),(0,i.jsxs)("select",{value:m.currency,onChange:e=>u(t=>t?{...t,currency:e.target.value}:null),className:"w-full p-3 border border-gray-200 rounded-lg bg-white focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",children:[i.jsx("option",{value:"VND",children:"VND"}),i.jsx("option",{value:"USD",children:"USD"}),i.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Minimum Amount"}),i.jsx(r.I,{type:"number",min:"0",value:m.minAmount,onChange:e=>u(t=>t?{...t,minAmount:parseFloat(e.target.value)||0}:null),className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Maximum Amount"}),i.jsx(r.I,{type:"number",min:"0",value:m.maxAmount,onChange:e=>u(t=>t?{...t,maxAmount:parseFloat(e.target.value)||0}:null),className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Media Settings"}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Alert Media"}),(0,i.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 bg-gray-50 hover:bg-gray-100 transition-colors duration-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(v,{className:"w-5 h-5 text-indigo-600"})}),i.jsx("div",{className:"flex-1",children:i.jsx(r.I,{type:"file",accept:"image/*,video/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>52428800){J({isOpen:!0,type:"warning",title:"File Too Large",message:"File size must be under 50MB.",details:`Your file is ${(t.size/1048576).toFixed(1)}MB. Please choose a smaller file to continue.`});return}if(!["image/jpeg","image/png","image/gif","video/mp4","video/webm"].includes(t.type)){J({isOpen:!0,type:"warning",title:"Unsupported File Type",message:"Please choose a supported file type.",details:"Supported formats: JPG, PNG, GIF, MP4, WebM"});return}let e=new FileReader;e.onload=e=>{u(s=>s?{...s,configuration:{...s.configuration,imageSettings:{...s.configuration.imageSettings,url:e.target?.result,mediaType:t.type.startsWith("video/")?"video":"image/gif"===t.type?"gif":"image"}}}:null)},e.readAsDataURL(t)}},className:"border-0 bg-transparent p-0 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-indigo-600 file:text-white hover:file:bg-indigo-700"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum file size: 50MB. Supported formats: Images (JPG, PNG, GIF), Videos (MP4, WebM)"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Alert Sound"}),(0,i.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 bg-gray-50 hover:bg-gray-100 transition-colors duration-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(b,{className:"w-5 h-5 text-indigo-600"})}),i.jsx("div",{className:"flex-1",children:i.jsx(r.I,{type:"file",accept:"audio/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>52428800){J({isOpen:!0,type:"warning",title:"File Too Large",message:"File size must be under 50MB.",details:`Your file is ${(t.size/1048576).toFixed(1)}MB. Please choose a smaller file to continue.`});return}if(!["audio/mpeg","audio/wav","audio/ogg","audio/mp3"].includes(t.type)){J({isOpen:!0,type:"warning",title:"Unsupported File Type",message:"Please choose a supported audio file type.",details:"Supported formats: MP3, WAV, OGG"});return}let e=new FileReader;e.onload=e=>{u(t=>t?{...t,configuration:{...t.configuration,soundSettings:{...t.configuration.soundSettings,url:e.target?.result}}}:null)},e.readAsDataURL(t)}},className:"border-0 bg-transparent p-0 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-indigo-600 file:text-white hover:file:bg-indigo-700"})}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>ex(X(m,"soundSettings.url","")||""),disabled:!X(m,"soundSettings.url"),className:"border-indigo-300 text-indigo-600 hover:bg-indigo-50 disabled:opacity-50",children:i.jsx(y,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum file size: 50MB. Supported formats: MP3, WAV, OGG"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Display Settings"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Duration (milliseconds)"}),i.jsx(r.I,{type:"number",min:"1000",max:"30000",value:X(m,"displaySettings.duration",5e3),onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,displaySettings:{...t.configuration.displaySettings,duration:parseInt(e.target.value)||5e3}}}:null),className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Animation Type"}),(0,i.jsxs)("select",{value:X(m,"animationSettings.animationType","fade"),onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,animationSettings:{...t.configuration.animationSettings,animationType:e.target.value}}}:null),className:"w-full px-3 py-2 border border-gray-200 rounded-md focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",children:[i.jsx("option",{value:"fade",children:"Fade"}),i.jsx("option",{value:"slide",children:"Slide"}),i.jsx("option",{value:"bounce",children:"Bounce"}),i.jsx("option",{value:"zoom",children:"Zoom"}),i.jsx("option",{value:"none",children:"None"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Position"}),(0,i.jsxs)("select",{value:X(m,"positionSettings.anchor","top-right"),onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,positionSettings:{...t.configuration.positionSettings,anchor:e.target.value}}}:null),className:"w-full px-3 py-2 border border-gray-200 rounded-md focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",children:[i.jsx("option",{value:"top-left",children:"Top Left"}),i.jsx("option",{value:"top-center",children:"Top Center"}),i.jsx("option",{value:"top-right",children:"Top Right"}),i.jsx("option",{value:"middle-left",children:"Middle Left"}),i.jsx("option",{value:"middle-center",children:"Middle Center"}),i.jsx("option",{value:"middle-right",children:"Middle Right"}),i.jsx("option",{value:"bottom-left",children:"Bottom Left"}),i.jsx("option",{value:"bottom-center",children:"Bottom Center"}),i.jsx("option",{value:"bottom-right",children:"Bottom Right"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Auto Hide"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:m.configuration?.displaySettings?.autoHide!==!1,onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,displaySettings:{...t.configuration.displaySettings,autoHide:e.target.checked}}}:null),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Automatically hide after duration"})]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Style Settings"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Background Color"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"color",value:m.configuration?.styleSettings?.backgroundColor||"#1a1a1a",onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,styleSettings:{...t.configuration.styleSettings,backgroundColor:e.target.value}}}:null),className:"w-12 h-10 border border-gray-200 rounded cursor-pointer"}),i.jsx(r.I,{value:m.configuration?.styleSettings?.backgroundColor||"#1a1a1a",onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,styleSettings:{...t.configuration.styleSettings,backgroundColor:e.target.value}}}:null),className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Text Color"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"color",value:m.configuration?.styleSettings?.textColor||"#ffffff",onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,styleSettings:{...t.configuration.styleSettings,textColor:e.target.value}}}:null),className:"w-12 h-10 border border-gray-200 rounded cursor-pointer"}),i.jsx(r.I,{value:m.configuration?.styleSettings?.textColor||"#ffffff",onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,styleSettings:{...t.configuration.styleSettings,textColor:e.target.value}}}:null),className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Font Family"}),(0,i.jsxs)("select",{value:m.configuration?.styleSettings?.fontFamily||"Inter",onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,styleSettings:{...t.configuration.styleSettings,fontFamily:e.target.value}}}:null),className:"w-full px-3 py-2 border border-gray-200 rounded-md focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",children:[i.jsx("option",{value:"Inter",children:"Inter"}),i.jsx("option",{value:"Arial",children:"Arial"}),i.jsx("option",{value:"Helvetica",children:"Helvetica"}),i.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),i.jsx("option",{value:"Georgia",children:"Georgia"}),i.jsx("option",{value:"Verdana",children:"Verdana"}),i.jsx("option",{value:"Courier New",children:"Courier New"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Font Size (px)"}),i.jsx(r.I,{type:"number",min:"8",max:"72",value:m.configuration?.styleSettings?.fontSize||16,onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,styleSettings:{...t.configuration.styleSettings,fontSize:parseInt(e.target.value)||16}}}:null),className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Live Preview"}),(0,i.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg min-h-[200px] relative overflow-hidden",children:[i.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Preview of how your alert will appear:"}),i.jsx("div",{className:"relative",children:(0,i.jsxs)("div",{className:`absolute transition-all duration-500 ${m.configuration?.animationSettings?.animationType==="fade"?"animate-fade-in":m.configuration?.animationSettings?.animationType==="slide"?"animate-slide-in":m.configuration?.animationSettings?.animationType==="bounce"?"animate-bounce":""}`,style:{left:m.configuration?.positionSettings?.anchor==="top-left"||m.configuration?.positionSettings?.anchor==="bottom-left"?"20px":void 0,top:m.configuration?.positionSettings?.anchor==="top-left"||m.configuration?.positionSettings?.anchor==="top-right"?"20px":void 0,right:m.configuration?.positionSettings?.anchor==="top-right"||m.configuration?.positionSettings?.anchor==="bottom-right"?"20px":void 0,bottom:m.configuration?.positionSettings?.anchor==="bottom-left"||m.configuration?.positionSettings?.anchor==="bottom-right"?"20px":void 0,backgroundColor:m.configuration?.styleSettings?.backgroundColor||"#1a1a1a",color:m.configuration?.styleSettings?.textColor||"#ffffff",fontFamily:m.configuration?.styleSettings?.fontFamily||"Inter",fontSize:`${m.configuration?.styleSettings?.fontSize||16}px`,fontWeight:"normal",maxWidth:"250px",padding:"12px",borderRadius:"6px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",zIndex:1e3},children:[X(m,"imageSettings.url")&&i.jsx("div",{className:"mb-2",children:"video"===X(m,"imageSettings.mediaType")?i.jsx("video",{src:X(m,"imageSettings.url"),className:"w-full h-16 object-cover rounded",muted:!0,autoPlay:!0,loop:!0}):i.jsx("img",{src:X(m,"imageSettings.url"),alt:"Alert media",className:"w-full h-16 object-cover rounded"})}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold text-sm",children:"John Doe"}),i.jsx("span",{className:"text-xs opacity-75",children:eh(Q(m,"minAmount"),ee(m))})]}),i.jsx("p",{className:"text-xs opacity-90",children:"Thank you for the stream!"})]})]})})]})]}),null!==W&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[i.jsx("span",{children:"Saving level..."}),(0,i.jsxs)("span",{children:[W,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${W}%`}})})]}),(0,i.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-gray-200",children:[(0,i.jsxs)(o.z,{onClick:eo,disabled:null!==W,className:"flex-1 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white disabled:opacity-50",children:[i.jsx(k.Z,{className:"w-4 h-4 mr-2"}),null!==W?"Saving...":"Save Level"]}),i.jsx(o.z,{variant:"outline",onClick:er,className:"flex-1",children:"Cancel"})]})]})]})]},e.levelId)),0===d.length&&i.jsx(n.Zb,{className:"border-2 border-dashed border-gray-300",children:(0,i.jsxs)(n.aY,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx("div",{className:"text-gray-400 mb-4",children:i.jsx(S,{className:"w-12 h-12 mx-auto"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No donation levels configured"}),i.jsx("p",{className:"text-gray-600 text-center mb-4",children:"Create different alert configurations for different donation amounts"}),(0,i.jsxs)(o.z,{onClick:ei,className:"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white",children:[i.jsx(T,{className:"w-4 h-4 mr-2"}),"Add First Level"]})]})})]}),m&&!ep&&(0,i.jsxs)(n.Zb,{id:"new-level-editor",className:"border-2 border-indigo-200 shadow-lg",children:[(0,i.jsxs)(n.Ol,{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-t-lg",children:[(0,i.jsxs)(n.ll,{className:"flex items-center gap-3 text-white",children:[i.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:i.jsx(S,{className:"w-5 h-5"})}),m.levelId.startsWith("level_")?"Add New Level":"Edit Level"]}),i.jsx(n.SZ,{className:"text-indigo-100",children:"Configure alert settings for this donation range"})]}),(0,i.jsxs)(n.aY,{className:"space-y-6 p-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Level Name"}),i.jsx(r.I,{value:m.levelName,onChange:e=>u(t=>t?{...t,levelName:e.target.value}:null),placeholder:"e.g., Small Donation, Big Donation",className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Currency"}),(0,i.jsxs)("select",{value:m.currency,onChange:e=>u(t=>t?{...t,currency:e.target.value}:null),className:"w-full p-3 border border-gray-200 rounded-lg bg-white focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",children:[i.jsx("option",{value:"VND",children:"VND"}),i.jsx("option",{value:"USD",children:"USD"}),i.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Minimum Amount"}),i.jsx(r.I,{type:"number",min:"0",value:m.minAmount,onChange:e=>u(t=>t?{...t,minAmount:parseFloat(e.target.value)||0}:null),className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Maximum Amount"}),i.jsx(r.I,{type:"number",min:"0",value:m.maxAmount,onChange:e=>u(t=>t?{...t,maxAmount:parseFloat(e.target.value)||0}:null),className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Media Settings"}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Alert Media"}),(0,i.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 bg-gray-50 hover:bg-gray-100 transition-colors duration-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(v,{className:"w-5 h-5 text-indigo-600"})}),i.jsx("div",{className:"flex-1",children:i.jsx(r.I,{type:"file",accept:"image/*,video/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>10485760){J({isOpen:!0,type:"warning",title:"File Too Large",message:"File size must be under 10MB.",details:`Your file is ${(t.size/1048576).toFixed(1)}MB. Please choose a smaller file to continue.`});return}if(!["image/jpeg","image/png","image/gif","video/mp4","video/webm"].includes(t.type)){J({isOpen:!0,type:"warning",title:"Unsupported File Type",message:"Please choose a supported file type.",details:"Supported formats: JPG, PNG, GIF, MP4, WebM"});return}let e=new FileReader;e.onload=e=>{u(s=>s?{...s,configuration:{...s.configuration,imageSettings:{...s.configuration.imageSettings,url:e.target?.result,mediaType:t.type.startsWith("video/")?"video":"image/gif"===t.type?"gif":"image"}}}:null)},e.readAsDataURL(t)}},className:"border-0 bg-transparent p-0 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-indigo-600 file:text-white hover:file:bg-indigo-700"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum file size: 10MB. Supported formats: Images (JPG, PNG, GIF), Videos (MP4, WebM)"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Alert Sound"}),(0,i.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 bg-gray-50 hover:bg-gray-100 transition-colors duration-200",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(b,{className:"w-5 h-5 text-indigo-600"})}),i.jsx("div",{className:"flex-1",children:i.jsx(r.I,{type:"file",accept:"audio/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>10485760){J({isOpen:!0,type:"warning",title:"File Too Large",message:"File size must be under 10MB.",details:`Your file is ${(t.size/1048576).toFixed(1)}MB. Please choose a smaller file to continue.`});return}if(!["audio/mpeg","audio/wav","audio/ogg","audio/mp3"].includes(t.type)){J({isOpen:!0,type:"warning",title:"Unsupported File Type",message:"Please choose a supported audio file type.",details:"Supported formats: MP3, WAV, OGG"});return}let e=new FileReader;e.onload=e=>{u(t=>t?{...t,configuration:{...t.configuration,soundSettings:{...t.configuration.soundSettings,url:e.target?.result}}}:null)},e.readAsDataURL(t)}},className:"border-0 bg-transparent p-0 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-indigo-600 file:text-white hover:file:bg-indigo-700"})}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>ex(X(m,"soundSettings.url","")||""),disabled:!X(m,"soundSettings.url"),className:"border-indigo-300 text-indigo-600 hover:bg-indigo-50 disabled:opacity-50",children:i.jsx(y,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum file size: 50MB. Supported formats: MP3, WAV, OGG"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Display Settings"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Duration (milliseconds)"}),i.jsx(r.I,{type:"number",min:"1000",max:"30000",value:m.configuration?.displaySettings?.duration||5e3,onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,displaySettings:{...t.configuration.displaySettings,duration:parseInt(e.target.value)||5e3}}}:null),className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Animation Type"}),(0,i.jsxs)("select",{value:m.configuration?.animationSettings?.animationType||"fade",onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,animationSettings:{...t.configuration.animationSettings,animationType:e.target.value}}}:null),className:"w-full px-3 py-2 border border-gray-200 rounded-md focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",children:[i.jsx("option",{value:"fade",children:"Fade"}),i.jsx("option",{value:"slide",children:"Slide"}),i.jsx("option",{value:"bounce",children:"Bounce"}),i.jsx("option",{value:"zoom",children:"Zoom"}),i.jsx("option",{value:"none",children:"None"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Position"}),(0,i.jsxs)("select",{value:m.configuration?.positionSettings?.anchor||"top-right",onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,positionSettings:{...t.configuration.positionSettings,anchor:e.target.value}}}:null),className:"w-full px-3 py-2 border border-gray-200 rounded-md focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",children:[i.jsx("option",{value:"top-left",children:"Top Left"}),i.jsx("option",{value:"top-center",children:"Top Center"}),i.jsx("option",{value:"top-right",children:"Top Right"}),i.jsx("option",{value:"middle-left",children:"Middle Left"}),i.jsx("option",{value:"middle-center",children:"Middle Center"}),i.jsx("option",{value:"middle-right",children:"Middle Right"}),i.jsx("option",{value:"bottom-left",children:"Bottom Left"}),i.jsx("option",{value:"bottom-center",children:"Bottom Center"}),i.jsx("option",{value:"bottom-right",children:"Bottom Right"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Auto Hide"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:m.configuration?.displaySettings?.autoHide!==!1,onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,displaySettings:{...t.configuration.displaySettings,autoHide:e.target.checked}}}:null),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Automatically hide after duration"})]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Style Settings"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Background Color"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"color",value:m.configuration?.styleSettings?.backgroundColor||"#1a1a1a",onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,styleSettings:{...t.configuration.styleSettings,backgroundColor:e.target.value}}}:null),className:"w-12 h-10 border border-gray-200 rounded cursor-pointer"}),i.jsx(r.I,{value:m.configuration?.styleSettings?.backgroundColor||"#1a1a1a",onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,styleSettings:{...t.configuration.styleSettings,backgroundColor:e.target.value}}}:null),className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Text Color"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"color",value:m.configuration?.styleSettings?.textColor||"#ffffff",onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,styleSettings:{...t.configuration.styleSettings,textColor:e.target.value}}}:null),className:"w-12 h-10 border border-gray-200 rounded cursor-pointer"}),i.jsx(r.I,{value:m.configuration?.styleSettings?.textColor||"#ffffff",onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,styleSettings:{...t.configuration.styleSettings,textColor:e.target.value}}}:null),className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Font Family"}),(0,i.jsxs)("select",{value:m.configuration?.styleSettings?.fontFamily||"Inter",onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,styleSettings:{...t.configuration.styleSettings,fontFamily:e.target.value}}}:null),className:"w-full px-3 py-2 border border-gray-200 rounded-md focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",children:[i.jsx("option",{value:"Inter",children:"Inter"}),i.jsx("option",{value:"Arial",children:"Arial"}),i.jsx("option",{value:"Helvetica",children:"Helvetica"}),i.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),i.jsx("option",{value:"Georgia",children:"Georgia"}),i.jsx("option",{value:"Verdana",children:"Verdana"}),i.jsx("option",{value:"Courier New",children:"Courier New"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(l._,{className:"text-sm font-semibold text-gray-700",children:"Font Size (px)"}),i.jsx(r.I,{type:"number",min:"8",max:"72",value:m.configuration?.styleSettings?.fontSize||16,onChange:e=>u(t=>t?{...t,configuration:{...t.configuration,styleSettings:{...t.configuration.styleSettings,fontSize:parseInt(e.target.value)||16}}}:null),className:"border-gray-200 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Live Preview"}),(0,i.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg min-h-[200px] relative overflow-hidden",children:[i.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Preview of how your alert will appear:"}),i.jsx("div",{className:"relative",children:(0,i.jsxs)("div",{className:`absolute transition-all duration-500 ${m.configuration?.animationSettings?.animationType==="fade"?"animate-fade-in":m.configuration?.animationSettings?.animationType==="slide"?"animate-slide-in":m.configuration?.animationSettings?.animationType==="bounce"?"animate-bounce":""}`,style:{left:m.configuration?.positionSettings?.anchor==="top-left"||m.configuration?.positionSettings?.anchor==="bottom-left"?"20px":void 0,top:m.configuration?.positionSettings?.anchor==="top-left"||m.configuration?.positionSettings?.anchor==="top-right"?"20px":void 0,right:m.configuration?.positionSettings?.anchor==="top-right"||m.configuration?.positionSettings?.anchor==="bottom-right"?"20px":void 0,bottom:m.configuration?.positionSettings?.anchor==="bottom-left"||m.configuration?.positionSettings?.anchor==="bottom-right"?"20px":void 0,backgroundColor:m.configuration?.styleSettings?.backgroundColor||"#1a1a1a",color:m.configuration?.styleSettings?.textColor||"#ffffff",fontFamily:m.configuration?.styleSettings?.fontFamily||"Inter",fontSize:`${m.configuration?.styleSettings?.fontSize||16}px`,fontWeight:"normal",maxWidth:"250px",padding:"12px",borderRadius:"6px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",zIndex:1e3},children:[X(m,"imageSettings.url")&&i.jsx("div",{className:"mb-2",children:"video"===X(m,"imageSettings.mediaType")?i.jsx("video",{src:X(m,"imageSettings.url"),className:"w-full h-16 object-cover rounded",muted:!0,autoPlay:!0,loop:!0}):i.jsx("img",{src:X(m,"imageSettings.url"),alt:"Alert media",className:"w-full h-16 object-cover rounded"})}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold text-sm",children:"John Doe"}),i.jsx("span",{className:"text-xs opacity-75",children:eh(Q(m,"minAmount"),ee(m))})]}),i.jsx("p",{className:"text-xs opacity-90",children:"Thank you for the stream!"})]})]})})]})]}),null!==W&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[i.jsx("span",{children:"Saving level..."}),(0,i.jsxs)("span",{children:[W,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${W}%`}})})]}),(0,i.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-gray-200",children:[(0,i.jsxs)(o.z,{onClick:eo,disabled:null!==W,className:"flex-1 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white disabled:opacity-50",children:[i.jsx(k.Z,{className:"w-4 h-4 mr-2"}),null!==W?"Saving...":"Save Level"]}),i.jsx(o.z,{variant:"outline",onClick:er,className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"})]})]})]}),d.length>0&&i.jsx("div",{className:"flex justify-end",children:i.jsx(o.z,{onClick:ed,disabled:x,className:`bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${x?"animate-pulse":""}`,children:x?(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving Levels..."]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx(k.Z,{className:"w-4 h-4 mr-2"}),"Save All Levels"]})})}),f&&i.jsx("div",{className:`mt-4 p-4 rounded-xl border-2 shadow-lg animate-fade-in ${"success"===f.type?"bg-gradient-to-r from-green-50 to-emerald-50 text-green-900 border-green-300":"bg-gradient-to-r from-red-50 to-rose-50 text-red-900 border-red-300"}`,children:(0,i.jsxs)("div",{className:"flex items-center",children:["success"===f.type?i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:i.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}):i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3",children:i.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),i.jsx("div",{className:"flex-1",children:i.jsx("p",{className:"font-semibold text-sm",children:f.text})})]})}),i.jsx("audio",{ref:G}),i.jsx("video",{ref:Y,muted:!0}),i.jsx(p,{isOpen:H.isOpen,onClose:()=>J(e=>({...e,isOpen:!1})),type:H.type,title:H.title,message:H.message,details:H.details}),D&&f&&i.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full transform transition-all duration-300 ease-in-out ${D?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:i.jsx("div",{className:`p-4 rounded-lg shadow-lg border-l-4 ${"success"===f.type?"bg-green-50 border-green-400 text-green-800":"bg-red-50 border-red-400 text-red-800"}`,children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:"success"===f.type?i.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):i.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm font-medium",children:f.text})}),i.jsx("div",{className:"ml-auto pl-3",children:i.jsx("button",{onClick:()=>{B(!1),z(null)},className:`inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 ${"success"===f.type?"text-green-500 hover:bg-green-100 focus:ring-green-600":"text-red-500 hover:bg-red-100 focus:ring-red-600"}`,children:i.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})})}),L&&I&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsxs)("h3",{className:"text-xl font-semibold",children:["Preview: ",I.levelName]}),i.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Level Information"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Range:"}),(0,i.jsxs)("span",{className:"ml-2 font-medium",children:[eh(Q(I,"minAmount"),ee(I))," - ",eh(Q(I,"maxAmount"),ee(I))]})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Status:"}),i.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${I.isEnabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.isEnabled?"Enabled":"Disabled"})]})]})]}),I.configuration?.imageSettings?.url&&(0,i.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Image Preview"}),i.jsx("div",{className:"flex justify-center",children:i.jsx("img",{src:I.configuration.imageSettings.url,alt:"Level preview",className:"max-w-full h-32 object-cover rounded-lg"})})]}),I.configuration?.soundSettings?.url&&(0,i.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Sound Preview"}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>ex(I.configuration.soundSettings.url),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[i.jsx(w,{className:"w-4 h-4 mr-1"}),"Play"]}),(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:["Volume: ",I.configuration.soundSettings.volume||80,"%"]})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Display Settings"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Duration:"}),(0,i.jsxs)("span",{className:"ml-2 font-medium",children:[I.configuration?.displaySettings?.duration||5e3,"ms"]})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Animation:"}),i.jsx("span",{className:"ml-2 font-medium",children:I.configuration?.animationSettings?.animationType||"fade"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Position:"}),i.jsx("span",{className:"ml-2 font-medium",children:I.configuration?.positionSettings?.anchor||"top-right"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Auto Hide:"}),i.jsx("span",{className:"ml-2 font-medium",children:I.configuration?.displaySettings?.autoHide?"Yes":"No"})]})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Style Settings"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Background:"}),i.jsx("span",{className:"ml-2 font-medium",children:I.configuration?.styleSettings?.backgroundColor||"#1a1a1a"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Text Color:"}),i.jsx("span",{className:"ml-2 font-medium",children:I.configuration?.styleSettings?.textColor||"#ffffff"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Font:"}),i.jsx("span",{className:"ml-2 font-medium",children:I.configuration?.styleSettings?.fontFamily||"Inter"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Font Size:"}),(0,i.jsxs)("span",{className:"ml-2 font-medium",children:[I.configuration?.styleSettings?.fontSize||16,"px"]})]})]})]})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[i.jsx(o.z,{variant:"outline",onClick:()=>R(!1),children:"Close"}),(0,i.jsxs)(o.z,{onClick:()=>{R(!1),ec(I)},className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[i.jsx(N,{className:"w-4 h-4 mr-2"}),"Test This Level"]})]})]})}),U&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-semibold",children:"Widget Information"}),i.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,i.jsxs)("h4",{className:"font-medium text-blue-900 mb-3 flex items-center",children:[i.jsx(P,{className:"w-5 h-5 mr-2"}),"General Widget Information"]}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-blue-800 font-medium",children:"Base Widget URL:"}),i.jsx("div",{className:"mt-1 p-2 bg-white rounded border font-mono text-xs break-all",children:e?.widgetUrl||"Not configured"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-blue-800 font-medium",children:"Base Alert Token:"}),i.jsx("div",{className:"mt-1 p-2 bg-white rounded border font-mono text-xs break-all",children:e?.alertToken||"Not configured"})]})]})]}),d.length>0&&(0,i.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,i.jsxs)("h4",{className:"font-medium text-green-900 mb-3 flex items-center",children:[i.jsx(M,{className:"w-5 h-5 mr-2"}),"Level-Specific Widget URLs"]}),i.jsx("div",{className:"space-y-4",children:d.map(e=>(0,i.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h5",{className:"font-medium text-gray-900",children:e.levelName}),(0,i.jsxs)("span",{className:"text-xs text-gray-500",children:[eh(Q(e,"minAmount"),ee(e))," - ",eh(Q(e,"maxAmount"),ee(e))]})]}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Widget URL:"}),i.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded border font-mono text-xs break-all",children:eu(e)})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Alert Token:"}),i.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded border font-mono text-xs break-all",children:eg(e)})]})]})]},e.levelId))})]}),(0,i.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-yellow-900 mb-3",children:"OBS Setup Instructions"}),(0,i.jsxs)("div",{className:"text-sm text-yellow-800 space-y-2",children:[i.jsx("p",{children:'1. In OBS Studio, add a new "Browser Source"'}),i.jsx("p",{children:"2. Set the URL to one of the level-specific widget URLs above"}),i.jsx("p",{children:"3. Set the width to 1920 and height to 1080 (or your stream resolution)"}),i.jsx("p",{children:'4. Check "Shutdown source when not visible" and "Refresh browser when scene becomes active"'}),i.jsx("p",{children:"5. The widget will automatically show alerts based on donation amounts"})]})]}),(0,i.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-purple-900 mb-3",children:"API Integration"}),(0,i.jsxs)("div",{className:"text-sm text-purple-800 space-y-2",children:[i.jsx("p",{children:"To trigger alerts programmatically, send a POST request to:"}),i.jsx("div",{className:"mt-2 p-2 bg-white rounded border font-mono text-xs",children:"POST /api/donations/trigger-alert"}),i.jsx("p",{className:"mt-2",children:"With the following payload:"}),i.jsx("div",{className:"mt-2 p-2 bg-white rounded border font-mono text-xs",children:`{
  "donorName": "John Doe",
  "amount": "50000",
  "currency": "VND",
  "message": "Thank you for the stream!",
  "levelId": "level_1" // Optional: specify level ID
}`})]})]})]}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx(o.z,{variant:"outline",onClick:()=>_(!1),children:"Close"})})]})})]})};var L=s(4686);let R=(0,d.Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),I=({settings:e})=>{let[t,s]=(0,a.useState)({donorName:"Test Donor",amount:"25.00",message:"This is a test alert with custom data!",useCurrentSettings:!0}),[d,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)(!1),[g,x]=(0,a.useState)({isOpen:!1,type:"info",title:"",message:""}),h=(e,t)=>{s(s=>({...s,[e]:t}))},f=async()=>{try{c(!0);let e=(0,C.hV)();if(!e){x({isOpen:!0,type:"error",title:"Authentication Required",message:"Please log in again to test alerts.",details:"Your authentication token is missing or expired."});return}console.log("\uD83E\uDDEA Triggering test alert with custom data..."),console.log("\uD83D\uDCCA Test Data:",t);let s=await fetch("/api/obs-settings/test-alert",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({donorName:t.donorName,amount:t.amount,message:t.message,useCurrentSettings:t.useCurrentSettings})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to send test alert")}let i=await s.json();console.log("✅ Test alert result:",i),i.success?x({isOpen:!0,type:"success",title:"Test Alert Sent Successfully!",message:i.message,details:`Test Data Used:
• Donor: ${t.donorName}
• Amount: $${t.amount}
• Message: ${t.message}

Your test alert has been sent and should appear in OBS Studio if properly configured.`,alertId:i.alertId,widgetUrl:i.widgetUrl}):x({isOpen:!0,type:"error",title:"Test Alert Failed",message:i.message,details:"The test alert could not be sent. Please check your configuration and try again."})}catch(e){console.error("\uD83D\uDCA5 Failed to test alert:",e),x({isOpen:!0,type:"error",title:"Test Alert Failed",message:"Failed to send test alert",details:e instanceof Error?e.message:"Unknown error occurred"})}finally{c(!1)}},v=e=>{let t={small:{donorName:"Small Supporter",amount:"5.00",message:"Thanks for the small donation! \uD83D\uDC95"},medium:{donorName:"Medium Supporter",amount:"25.00",message:"Awesome medium donation! \uD83C\uDF89"},large:{donorName:"Big Supporter",amount:"100.00",message:"WOW! Thank you for the big donation! \uD83D\uDE80"},anonymous:{donorName:"Anonymous Donor",amount:"15.00",message:"Anonymous donation received! \uD83C\uDFAD"}}[e];s(e=>({...e,...t})),setTimeout(()=>{f()},100)};return(0,i.jsxs)("div",{children:[(0,i.jsxs)(n.Zb,{children:[(0,i.jsxs)(n.Ol,{children:[(0,i.jsxs)(n.ll,{className:"flex items-center gap-2",children:[i.jsx(N,{className:"w-5 h-5"}),"Test Alert with Custom Data"]}),i.jsx(n.SZ,{children:"Test your OBS alerts with custom donor information and messages"})]}),(0,i.jsxs)(n.aY,{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[i.jsx(l._,{className:"text-sm font-medium mb-3 block",children:"Quick Test Presets"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>v("small"),disabled:d,className:"text-xs",children:"\uD83D\uDC95 Small ($5)"}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>v("medium"),disabled:d,className:"text-xs",children:"\uD83C\uDF89 Medium ($25)"}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>v("large"),disabled:d,className:"text-xs",children:"\uD83D\uDE80 Large ($100)"}),i.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>v("anonymous"),disabled:d,className:"text-xs",children:"\uD83C\uDFAD Anonymous ($15)"})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx(l._,{className:"text-sm font-medium",children:"Custom Test Data"}),(0,i.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>u(!m),className:"text-xs",children:[i.jsx(S,{className:"w-3 h-3 mr-1"}),m?"Hide":"Show"," Advanced"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[i.jsx(l._,{htmlFor:"donorName",className:"text-sm",children:"Donor Name"}),i.jsx(r.I,{id:"donorName",value:t.donorName,onChange:e=>h("donorName",e.target.value),placeholder:"Enter donor name",className:"mt-1"})]}),(0,i.jsxs)("div",{children:[i.jsx(l._,{htmlFor:"amount",className:"text-sm",children:"Amount ($)"}),i.jsx(r.I,{id:"amount",type:"number",step:"0.01",min:"0.01",value:t.amount,onChange:e=>h("amount",e.target.value),placeholder:"25.00",className:"mt-1"})]})]}),(0,i.jsxs)("div",{children:[i.jsx(l._,{htmlFor:"message",className:"text-sm",children:"Message"}),i.jsx(L.g,{id:"message",value:t.message,onChange:e=>h("message",e.target.value),placeholder:"Enter a custom message for the test alert",rows:3,className:"mt-1"})]}),m&&(0,i.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"useCurrentSettings",checked:t.useCurrentSettings,onChange:e=>h("useCurrentSettings",e.target.checked),className:"rounded"}),i.jsx(l._,{htmlFor:"useCurrentSettings",className:"text-sm",children:"Use current OBS settings for this test"})]}),i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"When checked, the test will use your current OBS configuration. When unchecked, it will use default settings."})]})]}),(0,i.jsxs)(o.z,{onClick:f,disabled:d||!t.donorName||!t.amount,className:"w-full",size:"lg",children:[i.jsx(R,{className:"w-4 h-4 mr-2"}),d?"Sending Test Alert...":"Send Test Alert with Custom Data"]}),(0,i.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCA1 How to Use:"}),(0,i.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,i.jsxs)("li",{children:["• ",i.jsx("strong",{children:"Quick Test:"})," Use the preset buttons for common test scenarios"]}),(0,i.jsxs)("li",{children:["• ",i.jsx("strong",{children:"Custom Data:"})," Fill in the form above to test with specific donor information"]}),(0,i.jsxs)("li",{children:["• ",i.jsx("strong",{children:"OBS Setup:"})," Make sure your OBS widget is connected and visible"]}),(0,i.jsxs)("li",{children:["• ",i.jsx("strong",{children:"Real-time:"})," The alert will appear in OBS immediately when sent"]})]})]})]})]}),i.jsx(p,{isOpen:g.isOpen,onClose:()=>x(e=>({...e,isOpen:!1})),type:g.type,title:g.title,message:g.message,details:g.details,alertId:g.alertId,widgetUrl:g.widgetUrl})]})};var F=s(19950),U=s(31812),_=s(88934),$=s(90368);let E="force-dynamic",W=e=>({_id:e._id,streamerId:e.streamerId,alertToken:e.alertToken,widgetUrl:e.widgetUrl||"",imageSettings:e.imageSettings||{enabled:!0,mediaType:"image",width:300,height:200,borderRadius:8,shadow:!0,shadowColor:"#000000",shadowBlur:10,shadowOffsetX:2,shadowOffsetY:2},soundSettings:e.soundSettings||{enabled:!0,volume:80,fadeIn:0,fadeOut:0,loop:!1},animationSettings:e.animationSettings||{enabled:!0,animationType:"fade",duration:500,easing:"ease-out",direction:"right",bounceIntensity:20,zoomScale:1.2},styleSettings:e.styleSettings||{backgroundColor:"#1a1a1a",textColor:"#ffffff",accentColor:"#00ff00",borderColor:"#333333",borderWidth:2,borderStyle:"solid",fontFamily:"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif",fontSize:16,fontWeight:"normal",fontStyle:"normal",textShadow:!0,textShadowColor:"#000000",textShadowBlur:3,textShadowOffsetX:1,textShadowOffsetY:1},positionSettings:e.positionSettings||{x:100,y:100,anchor:"top-left",zIndex:1e3,responsive:!0,mobileScale:.8},displaySettings:e.displaySettings||{duration:5e3,fadeInDuration:300,fadeOutDuration:300,autoHide:!0,showProgress:!1,progressColor:"#00ff00",progressHeight:3},generalSettings:e.generalSettings||{enabled:!0,maxAlerts:3,alertSpacing:20,cooldown:1e3,priority:"medium"},isActive:e.isActive||!0,settingsBehavior:e.settingsBehavior||"auto",lastUsedAt:e.lastUsedAt,totalAlerts:e.totalAlerts||0,donationLevels:e.donationLevels||[],createdAt:e.createdAt,updatedAt:e.updatedAt,customization:{image:e.imageSettings?.url?{url:e.imageSettings.url,type:e.imageSettings.mediaType,duration:5}:void 0,sound:e.soundSettings?.url?{url:e.soundSettings.url,volume:e.soundSettings.volume,duration:3}:void 0,text:{font:e.styleSettings?.fontFamily||"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif",fontSize:e.styleSettings?.fontSize||16,color:e.styleSettings?.textColor||"#ffffff",backgroundColor:e.styleSettings?.backgroundColor||"#1a1a1a",animation:e.animationSettings?.animationType||"fade"},position:e.positionSettings?.anchor||"top-right",duration:Math.round((e.displaySettings?.duration||5e3)/1e3)}}),Z=["streamer","admin"];function V(){let[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(!1),[r,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!0),[m,u]=(0,a.useState)(!1),[g,x]=(0,a.useState)(null),[h,f]=(0,a.useState)(null),[v,b]=(0,a.useState)(!0),[y,S]=(0,a.useState)("basic"),[w,k]=(0,a.useState)([]),[T,O]=(0,a.useState)({isOpen:!1,type:"info",title:"",message:""}),{user:A,isAuthenticated:P,initializeAuth:M}=(0,U.qr)(),L=(0,_.useRouter)(),R=async()=>{try{if(A&&A.role){if(f(A.role),!Z.includes(A.role)){u(!0),x(`Access denied. OBS settings are only available for streamers and administrators. Your current role is: ${A.role}.`),b(!1),c(!1);return}let e=(0,C.hV)();e?(b(!1),q(e)):(u(!0),x("Authentication token missing. Please log in again."),b(!1),c(!1));return}let e=(0,C.hV)();if(!e){u(!0),x("Authentication required. Please log in to access OBS settings."),b(!1),c(!1);return}let t=setTimeout(()=>{u(!0),x("Role verification timed out. Please try refreshing the page."),b(!1),c(!1)},1e4),s=await fetch("/api/auth/profile",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(clearTimeout(t),s.ok){let t=await s.json();if(!t.role){u(!0),x("User profile is missing role information. Please contact support."),b(!1),c(!1);return}if(f(t.role),!Z.includes(t.role)){u(!0),x(`Access denied. OBS settings are only available for streamers and administrators. Your current role is: ${t.role}.`),b(!1),c(!1);return}b(!1),q(e)}else{let e=await s.json();u(!0),x(`Failed to verify user permissions: ${e.error||"Unknown error"}. Please try logging in again.`),b(!1),c(!1)}}catch(e){u(!0),x(`Error verifying user permissions: ${e instanceof Error?e.message:"Unknown error"}. Please try again.`),b(!1),c(!1)}},E=async s=>{n(!0);try{let i=(0,C.hV)();if(!i)throw Error("Authentication required. Please log in again.");for(let e of(console.log("\uD83D\uDCBE Saving donation levels (per-level PUT)..."),console.log("\uD83D\uDCDD Levels to save:",JSON.stringify(s,null,2)),s)){let t=await fetch(`/api/obs-settings/donation-levels/${encodeURIComponent(e.levelId)}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(e)});if(console.log("\uD83D\uDCE1 Level update status:",e.levelId,t.status),!t.ok){let s=await t.json().catch(()=>({}));throw Error(s.error||`Failed to save donation level ${e.levelName||e.levelId}`)}}console.log("✅ All donation levels saved"),k(s),e&&t({...e,donationLevels:s}),await q(i)}catch(t){console.error("❌ Failed to save donation levels:",t);let e="Failed to save donation levels";throw t instanceof Error&&(e=t.message.includes("413")||t.message.includes("too large")||t.message.includes("PAYLOAD_TOO_LARGE")?"File size too large. Please use smaller images or audio files (under 50MB each).":t.message.includes("BSON")||t.message.includes("16MB")||t.message.includes("MongoDB")?"Files are too large for storage. Large media files have been automatically optimized. Please try saving again.":t.message.includes("optimized")||t.message.includes("removed due to size")?"Your donation level has been automatically optimized to fit database limits. Some large media files may have been removed. Please try saving again.":t.message.includes("401")||t.message.includes("unauthorized")?"Authentication required. Please log in again.":t.message.includes("403")||t.message.includes("forbidden")?"Access denied. You do not have permission to save levels.":t.message.includes("network")||t.message.includes("fetch")?"Network error. Please check your connection and try again.":t.message),Error(e)}finally{n(!1)}},V=async t=>{try{let s=(0,C.hV)();if(!s){O({isOpen:!0,type:"error",title:"Authentication Required",message:"Please log in again to test alerts.",details:"Your authentication token is missing or expired."});return}console.log("\uD83E\uDDEA Testing donation level:",t);let i=await fetch("/api/obs-settings/test-donation-level",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({levelId:t.levelId,donorName:"Test Donor",amount:t.minAmount.toString(),currency:t.currency,message:`Test alert for ${t.levelName} level!`})});if(!i.ok){let e=await i.json();throw Error(e.error||"Failed to test donation level")}let a=await i.json();console.log("✅ Donation level test result:",a),O({isOpen:!0,type:"success",title:"Donation Level Test Successful!",message:`Test alert sent for ${t.levelName} level`,details:"Check your OBS widget to see the test alert with the level-specific configuration.",alertId:a.alertId,widgetUrl:e?.widgetUrl})}catch(e){console.error("\uD83D\uDCA5 Failed to test donation level:",e),O({isOpen:!0,type:"error",title:"Donation Level Test Failed",message:"Failed to test donation level",details:e instanceof Error?e.message:"Unknown error occurred"})}};(0,a.useEffect)(()=>{P&&A?R():M().then(()=>{R()})},[P,A,M]);let q=async e=>{try{let s=await fetch("/api/obs-settings",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){let e=await s.json();console.log("\uD83D\uDCE6 Raw OBS settings response:",e);let i=W(e);console.log("\uD83D\uDD04 Converted settings:",i),t(i),k(i.donationLevels||[]),u(!1),x(null)}else{let e=await s.json();403===s.status?(u(!0),x("Access denied. OBS settings are only available for streamers and administrators. Please contact support if you believe this is an error.")):x(`Failed to load OBS settings: ${e.error||"Unknown error"}`)}}catch(e){x("Failed to load OBS settings. Please try again.")}finally{c(!1)}},G=async e=>{n(!0);try{let s=(0,C.hV)();if(!s)throw Error("Authentication required. Please log in again.");console.log("\uD83D\uDCBE Saving OBS settings..."),console.log("\uD83D\uDCDD Settings to save:",e);let i=await fetch("/api/obs-settings",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(e)});if(!i.ok){let e=await i.json();throw Error(e.error||"Failed to save OBS settings")}let a=await i.json();console.log("✅ OBS settings saved successfully:",a),t(t=>t?{...t,customization:{...t.customization,...e.customization},updatedAt:new Date().toISOString()}:t),O({isOpen:!0,type:"success",title:"Settings Saved Successfully!",message:"Your OBS settings have been saved and are ready to use.",details:"You can now test your configuration or add it to OBS Studio."})}catch(e){throw console.error("❌ Failed to save OBS settings:",e),O({isOpen:!0,type:"error",title:"Failed to Save Settings",message:e instanceof Error?e.message:"Failed to save settings. Please try again.",details:"Please check your configuration and try again. If the problem persists, contact support."}),e}finally{n(!1)}},Y=async e=>{try{let t=(0,C.hV)();if(!t){O({isOpen:!0,type:"error",title:"Authentication Required",message:"Please log in again to test alerts.",details:"Your authentication token is missing or expired."});return}console.log("\uD83E\uDDEA Triggering test alert..."),console.log("\uD83D\uDCFA OBS Settings:",e);let s=await fetch("/api/obs-settings/test-alert",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({donorName:"Test Donor",amount:"25.00",message:"This is a test alert from the OBS settings page!",useCurrentSettings:!0})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to send test alert")}let i=await s.json();console.log("✅ Test alert result:",i),i.success?O({isOpen:!0,type:"success",title:"Test Alert Sent Successfully!",message:i.message,details:"Your test alert has been sent and should appear in OBS Studio if properly configured.",alertId:i.alertId,widgetUrl:i.widgetUrl}):O({isOpen:!0,type:"error",title:"Test Alert Failed",message:i.message,details:"The test alert could not be sent. Please check your configuration and try again."})}catch(e){console.error("\uD83D\uDCA5 Failed to test alert:",e),O({isOpen:!0,type:"error",title:"Test Alert Failed",message:"Failed to send test alert",details:e instanceof Error?e.message:"Unknown error occurred"})}},H=async()=>{try{let t=(0,C.hV)();if(!t){O({isOpen:!0,type:"error",title:"Authentication Required",message:"Please log in again to test connection.",details:"Your authentication token is missing or expired."});return}console.log("\uD83D\uDD0D Testing widget connection...");let s=await fetch("/api/obs-settings/test-connection",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to test connection")}let i=await s.json();console.log("\uD83D\uDD0D Connection test result:",i),i.success?O({isOpen:!0,type:"success",title:"Widget Connection Test Successful!",message:i.message,details:"Your OBS widget is properly connected and ready to receive alerts!",connectedWidgets:i.connectedWidgets,testAlertSent:i.testAlertSent,widgetUrl:e?.widgetUrl}):O({isOpen:!0,type:"warning",title:"Widget Connection Test Failed",message:i.message,details:"To fix this:\n1. Copy the Widget URL from the configuration panel\n2. Add it as a Browser Source in OBS Studio\n3. Make sure the widget is visible in OBS\n4. Try the connection test again",connectedWidgets:i.connectedWidgets,widgetUrl:e?.widgetUrl})}catch(e){console.error("\uD83D\uDCA5 Failed to test connection:",e),O({isOpen:!0,type:"error",title:"Connection Test Failed",message:"Failed to test connection",details:e instanceof Error?e.message:"Unknown error occurred"})}};return v||d?i.jsx("div",{className:"container mx-auto px-4 py-4 py-8",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading OBS settings..."})]})}):m?i.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,i.jsxs)("div",{className:"max-w-md mx-auto text-center",children:[i.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"\uD83D\uDEAB"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),i.jsx("p",{className:"text-gray-600 mb-6",children:g}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(o.z,{onClick:()=>{u(!1),x(null),b(!0),M().then(()=>{R()})},variant:"outline",size:"sm",className:"w-full",children:"Try Again"}),i.jsx(o.z,{onClick:()=>L.push("/dashboard"),variant:"outline",size:"sm",className:"w-full",children:"Back to Dashboard"})]})]})}):i.jsx($.Z,{children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-gradient-to-r from-indigo-600 to-cyan-500 rounded-xl shadow-lg",children:i.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-cyan-600 bg-clip-text text-transparent",children:"OBS Alert Settings"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Configure donation alerts for your stream"})]})]}),g&&!m&&i.jsx("div",{className:"mt-6 bg-amber-50 border border-amber-200 rounded-xl p-4 shadow-sm",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"h-5 w-5 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm text-amber-800 font-medium",children:g})})]})})]}),i.jsx("div",{className:"mb-8",children:(0,i.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,i.jsxs)(o.z,{onClick:()=>l(!0),className:"bg-gradient-to-r from-indigo-600 to-cyan-600 hover:from-indigo-700 hover:to-cyan-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:[i.jsx(j.Z,{className:"w-4 h-4"}),"Preview Widget"]}),(0,i.jsxs)(o.z,{onClick:()=>window.open("/widget/alert/test","_blank"),variant:"outline",className:"border-indigo-200 text-indigo-700 hover:bg-indigo-50 hover:border-indigo-300 transition-all duration-200 flex items-center gap-2",children:[i.jsx(N,{className:"w-4 h-4"}),"Test Widget"]}),(0,i.jsxs)(o.z,{onClick:H,variant:"outline",className:"border-green-200 text-green-700 hover:bg-green-50 hover:border-green-300 transition-all duration-200 flex items-center gap-2",children:[i.jsx(F.Z,{className:"w-4 h-4"}),"Test Connection"]}),(0,i.jsxs)(o.z,{onClick:()=>{let t=process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001",s=e?.streamerId;if(s){let e=`${t}/api/widget-public/bank-total/${s}`;window.open(e,"_blank")}},variant:"outline",className:"border-emerald-200 text-emerald-700 hover:bg-emerald-50 hover:border-emerald-300 transition-all duration-200 flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Bank Total Widget"]})]})}),(0,i.jsxs)("div",{className:"mb-8 bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-cyan-600 px-6 py-4",children:(0,i.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center",children:[i.jsx("span",{className:"mr-3",children:"\uD83D\uDCFA"}),"OBS Studio Setup Guide"]})}),i.jsx("div",{className:"p-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Get Your Widget URLs"}),(0,i.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[i.jsx("li",{children:"• Alert Widget URL is displayed in the configuration panel below"}),i.jsx("li",{children:"• Bank Donation Total Widget URL is also available"}),i.jsx("li",{children:"• These URLs are unique to your account and secure"}),i.jsx("li",{children:"• Copy them to use in OBS Studio"})]})]})]}),(0,i.jsxs)("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-indigo-600 to-cyan-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Add to OBS Studio"}),(0,i.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[i.jsx("li",{children:"• In OBS, add a new Browser Source"}),i.jsx("li",{children:"• Paste your Widget URL"}),i.jsx("li",{children:"• Set width to 400px, height to 300px"}),i.jsx("li",{children:'• Check "Shutdown source when not visible"'})]})]})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-cyan-50 rounded-xl p-6 border border-indigo-100",children:[(0,i.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:"\uD83D\uDCA1"}),"Pro Tips"]}),(0,i.jsxs)("ul",{className:"text-sm text-gray-700 space-y-2",children:[(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-indigo-500 mt-1",children:"•"}),(0,i.jsxs)("span",{children:[i.jsx("strong",{children:"Test connection first:"}),' Use "Test Connection" to verify your OBS widget is connected']})]}),(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-indigo-500 mt-1",children:"•"}),(0,i.jsxs)("span",{children:[i.jsx("strong",{children:"Test the alert:"}),' Use the "Test Alert" button after setting up OBS']})]}),(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-indigo-500 mt-1",children:"•"}),(0,i.jsxs)("span",{children:[i.jsx("strong",{children:"Bank Total Widget:"}),' Use the "Bank Total Widget" button to preview your donation totals']})]}),(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-indigo-500 mt-1",children:"•"}),(0,i.jsxs)("span",{children:[i.jsx("strong",{children:"Widget must be visible:"})," The alert only works when the widget is visible in OBS"]})]}),(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-indigo-500 mt-1",children:"•"}),(0,i.jsxs)("span",{children:[i.jsx("strong",{children:"Customize appearance:"})," Use the settings below to customize your alerts"]})]})]})]})]})})]}),e?(0,i.jsxs)("div",{className:"mb-8",children:[i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"border-b border-gray-200",children:(0,i.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[i.jsx("button",{onClick:()=>S("basic"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"basic"===y?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Basic Settings"}),i.jsx("button",{onClick:()=>S("levels"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"levels"===y?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Donation Levels"})]})})}),"basic"===y&&i.jsx(z,{settings:e,onSave:G,onTest:Y}),"levels"===y&&i.jsx(B,{settings:e,onSave:E,onTest:V})]}):(0,i.jsxs)("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading OBS settings..."})]}),e&&i.jsx("div",{className:"mb-8",children:i.jsx(I,{settings:e})}),e&&i.jsx(D,{settings:e,isVisible:r,onClose:()=>l(!1)}),i.jsx(p,{isOpen:T.isOpen,onClose:()=>O(e=>({...e,isOpen:!1})),type:T.type,title:T.title,message:T.message,details:T.details,alertId:T.alertId,widgetUrl:T.widgetUrl,connectedWidgets:T.connectedWidgets,testAlertSent:T.testAlertSent})]})})}},90368:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var i=s(54714);s(77580);var a=s(31812),n=s(95773);function o({children:e}){let{sidebarOpen:t,toggleSidebar:s}=(0,a.HB)();return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:[i.jsx(n.Header,{}),i.jsx("main",{className:"relative",children:e})]})}},46475:(e,t,s)=>{"use strict";s.d(t,{z:()=>o});var i=s(54714),a=s(77580),n=s(35178);let o=a.forwardRef(({className:e,variant:t="default",size:s="default",...a},o)=>i.jsx("button",{className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"}[t],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[s],e),ref:o,...a}));o.displayName="Button"},83446:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>r,SZ:()=>d,Zb:()=>o,aY:()=>c,ll:()=>l});var i=s(54714),a=s(77580),n=s(35178);let o=a.forwardRef(({className:e,...t},s)=>i.jsx("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card";let r=a.forwardRef(({className:e,...t},s)=>i.jsx("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));r.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},s)=>i.jsx("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},s)=>i.jsx("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>i.jsx("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>i.jsx("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},27114:(e,t,s)=>{"use strict";s.d(t,{I:()=>o});var i=s(54714),a=s(77580),n=s(35178);let o=a.forwardRef(({className:e,type:t,...s},a)=>i.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));o.displayName="Input"},31213:(e,t,s)=>{"use strict";s.d(t,{_:()=>o});var i=s(54714),a=s(77580),n=s(35178);let o=a.forwardRef(({className:e,...t},s)=>i.jsx("label",{ref:s,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));o.displayName="Label"},4686:(e,t,s)=>{"use strict";s.d(t,{g:()=>o});var i=s(54714),a=s(77580),n=s(35178);let o=a.forwardRef(({className:e,...t},s)=>i.jsx("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));o.displayName="Textarea"},35178:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n,p6:()=>r,xG:()=>o});var i=s(54690),a=s(68184);function n(...e){return(0,a.m6)((0,i.W)(e))}function o(e,t){if(null==e||isNaN(e))return"0.00";let s="string"==typeof e?parseFloat(e):e;try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}catch(e){return`${t.toUpperCase()} ${s.toFixed(2)}`}}function r(e,t={}){try{let s=new Date(e);if(isNaN(s.getTime()))return"Invalid Date";let i={year:"numeric",month:"short",day:"numeric",...t};return s.toLocaleDateString("en-US",i)}catch(e){return"Invalid Date"}}},36834:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var i=s(77580);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),o=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},r=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,i.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:n="",children:o,iconNode:c,...m},u)=>(0,i.createElement)("svg",{ref:u,...d,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:r("lucide",n),...!o&&!l(m)&&{"aria-hidden":"true"},...m},[...c.map(([e,t])=>(0,i.createElement)(e,t)),...Array.isArray(o)?o:[o]])),m=(e,t)=>{let s=(0,i.forwardRef)(({className:s,...n},l)=>(0,i.createElement)(c,{ref:l,iconNode:t,className:r(`lucide-${a(o(e))}`,`lucide-${e}`,s),...n}));return s.displayName=o(e),s}},24012:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});let i=(0,s(36834).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},31999:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});let i=(0,s(36834).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},65717:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});let i=(0,s(36834).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},21124:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});let i=(0,s(36834).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},19950:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});let i=(0,s(36834).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},88387:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});let i=(0,s(36834).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},49470:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>o,__esModule:()=>n,default:()=>d,dynamic:()=>l});var i=s(71481);let a=(0,i.createProxy)(String.raw`D:\repo\xscan\frontend\src\app\dashboard\obs-settings\page.tsx`),{__esModule:n,$$typeof:o}=a,r=a.default,l=(0,i.createProxy)(String.raw`D:\repo\xscan\frontend\src\app\dashboard\obs-settings\page.tsx#dynamic`),d=r}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[3499,9003,5070,1934,1707,5773],()=>s(33090));module.exports=i})();