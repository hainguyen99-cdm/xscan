"use strict";(()=>{var e={};e.id=1495,e.ids=[1495],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47319:(e,o,t)=>{t.r(o),t.d(o,{headerHooks:()=>h,originalPathname:()=>g,patchFetch:()=>k,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>D,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>f});var r={};t.r(r),t.d(r,{GET:()=>i});var a=t(6170),s=t(8533),n=t(54387),u=t(40064);let l=(()=>{process.env.NEXT_PUBLIC_BACKEND_URL;let e="http://xscan-backend:3001";return e.includes("localhost:3000")&&(e=e.replace("localhost:3000","localhost:3001")),e})();async function i(e){try{let o=e.headers.get("authorization");if(console.log("\uD83D\uDD0D Auth profile API called"),console.log("\uD83D\uDCE1 Backend URL:",l),console.log("\uD83D\uDD11 Auth header present:",!!o),console.log("\uD83D\uDD11 Auth header value:",o?o.substring(0,20)+"...":"None"),!o)return console.log("❌ No authorization header, returning 401"),u.Z.json({error:"Authorization header required"},{status:401});console.log("\uD83D\uDD0D Fetching user profile...");let t=await fetch(`${l}/api/auth/profile`,{headers:{Authorization:o,"Content-Type":"application/json"}});if(console.log(`📡 Backend profile response status: ${t.status}`),!t.ok){let e=await t.json();return console.error("❌ Failed to fetch user profile:",e),u.Z.json(e,{status:t.status})}let r=await t.json();console.log("\uD83D\uDCE6 Raw backend response:",r),console.log("\uD83D\uDCE6 Response data type:",typeof r),console.log("\uD83D\uDCE6 Response data keys:",Object.keys(r));let a=r.user;if(console.log("\uD83D\uDC64 Extracted userData:",a),console.log("\uD83D\uDC64 UserData type:",typeof a),console.log("\uD83D\uDC64 UserData keys:",a?Object.keys(a):"null/undefined"),!a)return console.error("❌ Invalid user data structure from backend:",r),console.error("❌ Full response data:",JSON.stringify(r,null,2)),u.Z.json({error:"Invalid user data structure from backend"},{status:500});return console.log("✅ Successfully retrieved user profile:",{id:a.id,email:a.email,role:a.role}),console.log("✅ User ID for OBS settings:",a.id),u.Z.json({user:a})}catch(e){return console.error("\uD83D\uDCA5 Unexpected error in auth profile API:",e),u.Z.json({error:"Failed to fetch profile"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/profile/route",pathname:"/api/auth/profile",filename:"route",bundlePath:"app/api/auth/profile/route"},resolvedPagePath:"D:\\repo\\xscan\\frontend\\src\\app\\api\\auth\\profile\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:D,headerHooks:h,staticGenerationBailout:f}=c,g="/api/auth/profile/route";function k(){return(0,n.patchFetch)({serverHooks:D,staticGenerationAsyncStorage:d})}}};var o=require("../../../../webpack-runtime.js");o.C(e);var t=e=>o(o.s=e),r=o.X(0,[3499,7386],()=>t(47319));module.exports=r})();