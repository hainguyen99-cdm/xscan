(()=>{var e={};e.id=3597,e.ids=[3597],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},97465:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>c});var r=s(7),a=s(8533),n=s(29377),l=s.n(n),i=s(29799),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["wallet",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23371)),"D:\\repo\\xscan\\frontend\\src\\app\\wallet\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,44161)),"D:\\repo\\xscan\\frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,12873)),"D:\\repo\\xscan\\frontend\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,34392)),"D:\\repo\\xscan\\frontend\\src\\app\\not-found.tsx"]}],d=["D:\\repo\\xscan\\frontend\\src\\app\\wallet\\page.tsx"],x="/wallet/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/wallet/page",pathname:"/wallet",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},22781:(e,t,s)=>{Promise.resolve().then(s.bind(s,46671))},46671:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g,dynamic:()=>h});var r=s(54714),a=s(77580),n=s(21102),l=s(35178);function i({wallet:e,onDeposit:t,onWithdraw:s,onTransfer:a,onViewHistory:n}){var i,o;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Wallet Balance"}),r.jsx("div",{className:"text-4xl font-bold text-green-600",children:(i=e.balance,o=e.currency,(0,l.xG)(i,o))}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Available for transactions"})]}),(0,r.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,r.jsxs)("button",{onClick:t,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors duration-200 flex items-center justify-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Funds"]}),(0,r.jsxs)("button",{onClick:s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})}),"Withdraw Funds"]}),(0,r.jsxs)("button",{onClick:a,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Transfer Funds"]})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Wallet ID:"}),r.jsx("p",{className:"font-mono text-gray-900 truncate",children:e.id})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Currency:"}),r.jsx("p",{className:"font-semibold text-gray-900",children:e.currency})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Status:"}),r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Active":"Inactive"})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Created:"}),r.jsx("p",{className:"text-gray-900",children:new Date(e.createdAt).toLocaleDateString()})]})]}),e.totalDeposits>0||e.totalWithdrawals>0||e.totalFees>0&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("span",{className:"text-gray-600 block",children:"Total Deposits"}),r.jsx("span",{className:"font-semibold text-green-600",children:(0,l.xG)(e.totalDeposits,e.currency)})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("span",{className:"text-gray-600 block",children:"Total Withdrawals"}),r.jsx("span",{className:"font-semibold text-blue-600",children:(0,l.xG)(e.totalWithdrawals,e.currency)})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("span",{className:"text-gray-600 block",children:"Total Fees"}),r.jsx("span",{className:"font-semibold text-red-600",children:(0,l.xG)(e.totalFees,e.currency)})]})]})})]})]})}function o({transactions:e,walletId:t,onRefresh:s}){let[n,i]=(0,a.useState)(e),[o,c]=(0,a.useState)("all"),[d,x]=(0,a.useState)("");(0,a.useEffect)(()=>{let t=e;if("credit"===o?t=t.filter(e=>"deposit"===e.type||"refund"===e.type):"debit"===o&&(t=t.filter(e=>"withdrawal"===e.type||"fee"===e.type||"transfer"===e.type)),d){let e=d.toLowerCase();t=t.filter(t=>t.description.toLowerCase().includes(e)||t.id.toLowerCase().includes(e)||t.reference&&t.reference.toLowerCase().includes(e)||t.type.toLowerCase().includes(e))}i(t)},[e,o,d]);let u=e=>{switch(e){case"deposit":return r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})});case"withdrawal":return r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})});case"transfer":return r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})});case"fee":return r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})});case"refund":return r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})});default:return r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},m=e=>{switch(e){case"deposit":case"refund":return"text-green-600 bg-green-100";case"withdrawal":case"fee":return"text-red-600 bg-red-100";case"transfer":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},h=e=>{switch(e){case"completed":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"failed":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},p=(e,t)=>(0,l.xG)(e,t),g=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["All transactions for wallet ",t]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[r.jsx("button",{onClick:()=>c("all"),className:`px-3 py-1 text-sm rounded-md transition-colors duration-200 ${"all"===o?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All"}),r.jsx("button",{onClick:()=>c("credit"),className:`px-3 py-1 text-sm rounded-md transition-colors duration-200 ${"credit"===o?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Credits"}),r.jsx("button",{onClick:()=>c("debit"),className:`px-3 py-1 text-sm rounded-md transition-colors duration-200 ${"debit"===o?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Debits"})]}),r.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200",title:"Refresh transactions",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),r.jsx("div",{className:"mt-4",children:r.jsx("input",{type:"text",placeholder:"Search transactions...",value:d,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})]}),0===n.length?(0,r.jsxs)("div",{className:"p-8 text-center",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No transactions found"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:d||"all"!==o?"Try adjusting your search or filter criteria.":"Get started by adding funds to your wallet."})]}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:`p-2 rounded-full ${m(e.type)}`,children:u(e.type)}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 capitalize",children:e.type}),r.jsx("div",{className:"text-sm text-gray-500",children:e.description}),e.relatedWalletId&&(0,r.jsxs)("div",{className:"text-xs text-gray-400",children:["To: ",e.relatedWalletId]})]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:p(e.amount,e.currency)}),e.fee&&e.fee>0&&(0,r.jsxs)("div",{className:"text-xs text-red-600",children:["Fee: ",p(e.fee,e.currency)]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h(e.status)}`,children:e.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(e.createdAt)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.reference?r.jsx("span",{className:"font-mono text-xs bg-gray-100 px-2 py-1 rounded",children:e.reference}):r.jsx("span",{className:"text-gray-400",children:"-"})})]},e.id))})]})}),r.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",n.length," of ",e.length," transactions"]})})]})}var c=s(42451),d=s(58178);function x({isOpen:e,onClose:t,onSubmit:s,currency:n,balance:l,isProcessing:i=!1}){let[o,c]=(0,a.useState)(""),[d,x]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),h=async e=>{if(e.preventDefault(),!o.trim()||!d||0>=parseFloat(d))return;let t=parseFloat(d);if(t>l){alert("Insufficient funds");return}try{await s(o.trim(),t,u||void 0),p()}catch(e){console.error("Error transferring funds:",e)}},p=()=>{c(""),x(""),m(""),t()};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Transfer Funds"}),r.jsx("button",{onClick:p,disabled:i,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 disabled:opacity-50",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:h,className:"px-6 py-4",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"mb-2 text-sm text-gray-600",children:["Available Balance: ",(0,r.jsxs)("span",{className:"font-semibold",children:["USD"===n?"$":"",l.toFixed(2)," ",n]})]}),r.jsx("label",{htmlFor:"toUserId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination User ID"}),r.jsx("input",{type:"text",id:"toUserId",value:o,onChange:e=>c(e.target.value),placeholder:"Enter user ID to transfer to",disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:bg-gray-100",required:!0})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"USD"===n?"$":""})}),r.jsx("input",{type:"number",id:"amount",value:d,onChange:e=>x(e.target.value),placeholder:"0.00",min:"0.01",max:l,step:"0.01",disabled:i,className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:bg-gray-100",required:!0})]}),parseFloat(d)>l&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Amount exceeds available balance"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),r.jsx("textarea",{id:"description",value:u,onChange:e=>m(e.target.value),placeholder:"Enter transfer description",rows:3,disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none disabled:opacity-50 disabled:bg-gray-100"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx("button",{type:"button",onClick:p,disabled:i,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:i||!o.trim()||!d||parseFloat(d)>l,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200 flex items-center justify-center",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Transfer Funds"})]})]})]})}):null}var u=s(90368),m=s(12448);let h="force-dynamic",p=async()=>{let{validateAuthToken:e}=await Promise.resolve().then(s.bind(s,21102)),{isValid:t,user:r}=await e();if(!t||!r)throw Error("User not authenticated. Please log in to access your wallet.");return r.id};function g(){let[e,t]=(0,a.useState)(null),[s,l]=(0,a.useState)([]),[h,g]=(0,a.useState)(!0),[y,f]=(0,a.useState)(null),[b,j]=(0,a.useState)(!1),[w,v]=(0,a.useState)(!1),[N,k]=(0,a.useState)(!1),[C,F]=(0,a.useState)("");(0,a.useEffect)(()=>{L()},[]);let L=async()=>{try{g(!0),f(null);let e=await p();F(e);let s=await n.x1.wallets.getByUser(e);if(s.success&&s.data){t(s.data);let e=s.data._id||s.data.id;await S(e)}else await D(e)}catch(e){if(e.response?.status===404){let e=await p();await D(e)}else e.message?.includes("not authenticated")?f("Please log in to access your wallet."):(f("Failed to load wallet. Please check your connection and try again."),console.error("Error loading wallet:",e))}finally{g(!1)}},D=async e=>{try{let e=await n.x1.wallets.create({currency:"VND"});if(e.success&&e.data){t(e.data);let s=e.data._id||e.data.id;await S(s),(0,m.showToast)({type:"success",title:"Wallet created successfully",message:"Your wallet is now ready to use"})}else f("Failed to create wallet")}catch(e){console.error("Error creating wallet:",e),f("Failed to create wallet. Please try again.")}},S=async e=>{try{let t=await n.x1.wallets.getTransactions(e);t.success&&t.data&&l(t.data)}catch(e){console.error("Error loading transactions:",e),(0,m.showToast)({type:"error",title:"Failed to load transactions",message:"Please try refreshing the page"})}},W=async(s,r)=>{if(e)try{let a=e._id||e.id,l=await n.x1.wallets.addFunds(a,{amount:s,description:r});l.success&&l.data&&(t(l.data),await S(a),j(!1),(0,m.showToast)({type:"success",title:"Funds added successfully",message:`${s.toLocaleString()} VND has been added to your wallet`}))}catch(e){f("Failed to add funds"),console.error("Error adding funds:",e),(0,m.showToast)({type:"error",title:"Failed to add funds",message:"Please try again later"})}},P=async(s,r)=>{if(e)try{let a=e._id||e.id,l=await n.x1.wallets.withdrawFunds(a,{amount:s,description:r});l.success&&l.data&&(t(l.data),await S(a),v(!1),(0,m.showToast)({type:"success",title:"Withdrawal processed successfully",message:`${s.toLocaleString()} VND has been withdrawn from your wallet`}))}catch(e){f("Failed to withdraw funds"),console.error("Error withdrawing funds:",e),(0,m.showToast)({type:"error",title:"Failed to withdraw funds",message:"Please try again later"})}},q=async(s,r,a)=>{if(e)try{let l=e._id||e.id,i=await n.x1.wallets.transferFunds(l,{toUserId:s,amount:r,description:a});if(i.success&&i.data){t(i.data);let e=i.data._id||i.data.id;await S(e),k(!1),(0,m.showToast)({type:"success",title:"Transfer completed successfully",message:`${r.toLocaleString()} VND has been transferred to user ${s}`})}}catch(e){f("Failed to transfer funds"),console.error("Error transferring funds:",e),(0,m.showToast)({type:"error",title:"Failed to transfer funds",message:"Please try again later"})}},_=()=>{L()};return h?r.jsx(u.Z,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading wallet..."})]})})}):y?r.jsx(u.Z,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("p",{className:"text-gray-600 mb-4",children:y}),r.jsx("button",{onClick:_,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Try Again"})]})})}):e?r.jsx(u.Z,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"E-Wallet"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your digital wallet and transactions"}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["User ID: ",C]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsx(i,{wallet:e,onDeposit:()=>j(!0),onWithdraw:()=>v(!0),onTransfer:()=>k(!0),onViewHistory:()=>{}})}),r.jsx("div",{className:"lg:col-span-2",children:r.jsx(o,{transactions:s,walletId:e._id||e.id,onRefresh:()=>S(e._id||e.id)})})]}),r.jsx(c.Z,{isOpen:b,onClose:()=>j(!1),onSubmit:W,currency:e.currency}),r.jsx(d.Z,{isOpen:w,onClose:()=>v(!1),onSubmit:P,currency:e.currency,balance:e.balance}),r.jsx(x,{isOpen:N,onClose:()=>k(!1),onSubmit:q,currency:e.currency,balance:e.balance})]})})}):r.jsx(u.Z,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-600 text-xl mb-4",children:"No Wallet Found"}),r.jsx("button",{onClick:_,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Create Wallet"})]})})})}},35178:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n,p6:()=>i,xG:()=>l});var r=s(54690),a=s(68184);function n(...e){return(0,a.m6)((0,r.W)(e))}function l(e,t){if(null==e||isNaN(e))return"0.00";let s="string"==typeof e?parseFloat(e):e;try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}catch(e){return`${t.toUpperCase()} ${s.toFixed(2)}`}}function i(e,t={}){try{let s=new Date(e);if(isNaN(s.getTime()))return"Invalid Date";let r={year:"numeric",month:"short",day:"numeric",...t};return s.toLocaleDateString("en-US",r)}catch(e){return"Invalid Date"}}},23371:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>c,dynamic:()=>o});var r=s(71481);let a=(0,r.createProxy)(String.raw`D:\repo\xscan\frontend\src\app\wallet\page.tsx`),{__esModule:n,$$typeof:l}=a,i=a.default,o=(0,r.createProxy)(String.raw`D:\repo\xscan\frontend\src\app\wallet\page.tsx#dynamic`),c=i}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[3499,9003,5070,1934,1707,5773,7525],()=>s(97465));module.exports=r})();