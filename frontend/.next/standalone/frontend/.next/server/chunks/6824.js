"use strict";exports.id=6824,exports.ids=[6824],exports.modules={96824:(e,r,t)=>{t.d(r,{p:()=>a});var o=t(54714),s=t(77580);let l={primaryColor:"#3B82F6",secondaryColor:"#1E40AF",backgroundColor:"#FFFFFF",textColor:"#1F2937"};function a({initialData:e,onSubmit:r,isLoading:t=!1,submitButtonText:a="Save Changes"}){let[i,n]=(0,s.useState)({title:"",description:"",customUrl:"",isActive:!0,allowAnonymous:!0,theme:l,...e}),[d,c]=(0,s.useState)({}),[m,u]=(0,s.useState)(null),[x,h]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=setTimeout(async()=>{if(!i.customUrl||i.customUrl.length<3){u(null);return}h(!0);try{let e=await fetch(`/api/donation-links/check-url?url=${encodeURIComponent(i.customUrl)}`),r=await e.json();u(r.available)}catch(e){u(null)}finally{h(!1)}},500);return()=>clearTimeout(e)},[i.customUrl]);let g=()=>{let e={};return i.title.trim()||(e.title="Title is required"),i.customUrl.trim()?i.customUrl.length<3?e.customUrl="Custom URL must be at least 3 characters long":/^[a-zA-Z0-9-]+$/.test(i.customUrl)?!1===m&&(e.customUrl="This URL is already taken"):e.customUrl="Custom URL can only contain letters, numbers, and hyphens":e.customUrl="Custom URL is required",i.description&&i.description.length>500&&(e.description="Description must be less than 500 characters"),c(e),0===Object.keys(e).length},p=(e,r)=>{n(t=>({...t,[e]:r})),d[e]&&c(r=>({...r,[e]:""}))},b=(e,r)=>{n(t=>({...t,theme:{...t.theme,[e]:r}}))};return(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g()&&r(i)},className:"space-y-6",children:[(0,o.jsxs)("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),o.jsx("input",{type:"text",id:"title",value:i.title,onChange:e=>p("title",e.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${d.title?"border-red-300":"border-gray-300"}`,placeholder:"e.g., Support My Gaming Stream"}),d.title&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.title})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{id:"description",value:i.description,onChange:e=>p("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Tell your audience why they should support you..."}),(0,o.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:[i.description?.length||0,"/500 characters"]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"customUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom URL *"}),(0,o.jsxs)("div",{className:"flex",children:[o.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"/"}),o.jsx("input",{type:"text",id:"customUrl",value:i.customUrl,onChange:e=>p("customUrl",e.target.value),className:`flex-1 px-3 py-2 border rounded-r-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${d.customUrl?"border-red-300":"border-gray-300"}`,placeholder:"my-stream"})]}),(0,o.jsxs)("div",{className:"mt-1 flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[x&&(0,o.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-500 mr-2"}),"Checking availability..."]}),!0===m&&(0,o.jsxs)("div",{className:"flex items-center text-sm text-green-600",children:[o.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"URL available"]}),!1===m&&(0,o.jsxs)("div",{className:"flex items-center text-sm text-red-600",children:[o.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"URL taken"]})]}),o.jsx("button",{type:"button",onClick:()=>{let e=Math.random().toString(36).substring(2,8);n(r=>({...r,customUrl:e}))},className:"text-sm text-indigo-600 hover:text-indigo-500",children:"Generate random"})]}),d.customUrl&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.customUrl}),(0,o.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Your donation page will be available at: ",(0,o.jsxs)("code",{className:"bg-gray-100 px-1 py-0.5 rounded text-xs",children:["/donate/",i.customUrl||"your-url"]})]})]})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Settings"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:i.isActive,onChange:e=>p("isActive",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Active (donation page is live and accepting donations)"})]}),(0,o.jsxs)("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"allowAnonymous",checked:i.allowAnonymous,onChange:e=>p("allowAnonymous",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"allowAnonymous",className:"ml-2 block text-sm text-gray-900",children:"Allow anonymous donations"})]})]})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Theme Customization"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"primaryColor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Color"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"color",id:"primaryColor",value:i.theme.primaryColor,onChange:e=>b("primaryColor",e.target.value),className:"h-10 w-16 border border-gray-300 rounded cursor-pointer"}),o.jsx("input",{type:"text",value:i.theme.primaryColor,onChange:e=>b("primaryColor",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"#3B82F6"})]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"secondaryColor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Secondary Color"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"color",id:"secondaryColor",value:i.theme.secondaryColor,onChange:e=>b("secondaryColor",e.target.value),className:"h-10 w-16 border border-gray-300 rounded cursor-pointer"}),o.jsx("input",{type:"text",value:i.theme.secondaryColor,onChange:e=>b("secondaryColor",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"#1E40AF"})]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"backgroundColor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Background Color"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"color",id:"backgroundColor",value:i.theme.backgroundColor,onChange:e=>b("backgroundColor",e.target.value),className:"h-10 w-16 border border-gray-300 rounded cursor-pointer"}),o.jsx("input",{type:"text",value:i.theme.backgroundColor,onChange:e=>b("backgroundColor",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"#FFFFFF"})]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"textColor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Text Color"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"color",id:"textColor",value:i.theme.textColor,onChange:e=>b("textColor",e.target.value),className:"h-10 w-16 border border-gray-300 rounded cursor-pointer"}),o.jsx("input",{type:"text",value:i.theme.textColor,onChange:e=>b("textColor",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"#1F2937"})]})]})]}),(0,o.jsxs)("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Theme Preview"}),o.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:i.theme.backgroundColor,color:i.theme.textColor},children:(0,o.jsxs)("div",{className:"space-y-2",children:[o.jsx("div",{className:"px-3 py-2 rounded text-center font-medium",style:{backgroundColor:i.theme.primaryColor,color:"#FFFFFF"},children:"Primary Button"}),o.jsx("div",{className:"px-3 py-2 rounded text-center font-medium",style:{backgroundColor:i.theme.secondaryColor,color:"#FFFFFF"},children:"Secondary Button"}),o.jsx("p",{className:"text-sm",children:"Sample text with your chosen colors"})]})})]})]}),o.jsx("div",{className:"pt-6 border-t border-gray-200",children:o.jsx("button",{type:"submit",disabled:t||x,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t?(0,o.jsxs)("div",{className:"flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):a})})]})}}};