(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5566],{18393:function(e,r,s){Promise.resolve().then(s.bind(s,86242))},86242:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return d}});var a=s(37821),n=s(58078),t=s(46179),i=s(61414),l=s(30189),o=s(54377);function d(){let e=(0,t.useRouter)(),{user:r,isAuthenticated:s,refreshUser:d}=(0,i.qr)(),[c,m]=(0,n.useState)(!0),[u,x]=(0,n.useState)(!1),[h,g]=(0,n.useState)(null),[p,f]=(0,n.useState)(null),[y,b]=(0,n.useState)({username:"",displayName:"",email:"",platform:"",channelUrl:"",description:"",monthlyViewers:0,contentCategory:"",reasonForApplying:""}),j=async()=>{try{let e=(0,l.hV)();if(!e)return;let r=await fetch("/api/streamer-applications/my-application",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(r.ok){let e=await r.json();f(e)}}catch(e){console.error("Error checking existing application:",e)}};(0,n.useEffect)(()=>{(async()=>{if(!s){e.push("/login");return}if((null==r?void 0:r.role)!=="donor"){e.push("/dashboard");return}await j(),((null==r?void 0:r.username)||(null==r?void 0:r.email)||(null==r?void 0:r.name))&&b(e=>({...e,username:r.username||e.username,email:r.email||e.email,displayName:r.name||e.displayName})),m(!1)})()},[s,r,e]),(0,n.useEffect)(()=>{(null==p?void 0:p.status)==="approved"&&(null==r?void 0:r.role)==="donor"&&d()},[null==p?void 0:p.status,null==r?void 0:r.role,d]),(0,n.useEffect)(()=>{(null==r?void 0:r.role)==="streamer"&&e.push("/dashboard")},[null==r?void 0:r.role,e]);let v=e=>{let{name:r,value:s}=e.target;b(e=>({...e,[r]:s}))},N=async e=>{e.preventDefault(),x(!0),g(null);try{let e=(0,l.hV)();if(!e)throw Error("Authentication required");let r=await fetch("/api/streamer-registration",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(y)}),s=await r.json();if(!r.ok)throw Error(s.message||"Failed to submit registration");g({type:"success",text:"Registration submitted successfully! An admin will review your application and you will be notified of the decision."}),await j(),b({username:"",displayName:"",email:"",platform:"",channelUrl:"",description:"",monthlyViewers:0,contentCategory:"",reasonForApplying:""})}catch(e){g({type:"error",text:e instanceof Error?e.message:"Failed to submit registration"})}finally{x(!1)}};return c?(0,a.jsx)(o.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})})}):(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Register as Streamer"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Apply to become a streamer and start receiving donations from your audience."})]}),h&&(0,a.jsx)("div",{className:"mb-6 p-4 rounded-lg ".concat("success"===h.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:h.text}),p&&(0,a.jsxs)("div",{className:"mb-6 p-6 rounded-lg border-2 border-gray-200 bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Your Streamer Application"}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium border ".concat((e=>{switch(e){case"pending":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"approved":return"bg-green-50 border-green-200 text-green-800";case"rejected":return"bg-red-50 border-red-200 text-red-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})(p.status)),children:(e=>{switch(e){case"pending":return"Pending Approval";case"approved":return"Approved";case"rejected":return"Rejected";default:return"Unknown"}})(p.status)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Username:"}),(0,a.jsx)("p",{className:"text-gray-900",children:p.username})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Platform:"}),(0,a.jsx)("p",{className:"text-gray-900 capitalize",children:p.platform})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Channel URL:"}),(0,a.jsx)("p",{className:"text-gray-900 break-all",children:p.channelUrl})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Submitted:"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(p.createdAt).toLocaleDateString()})]})]}),"pending"===p.status&&(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Application Under Review"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,a.jsx)("p",{children:"Your streamer application is currently being reviewed by our admin team. You will be notified once a decision has been made."})})]})]})}),"approved"===p.status&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Application Approved!"}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-green-700",children:[(0,a.jsx)("p",{children:'Congratulations! Your streamer application has been approved. Your role has been updated to "streamer" and you will be redirected to your dashboard shortly.'}),(0,a.jsx)("p",{className:"mt-2 font-medium",children:"You can now access your streamer dashboard and start receiving donations!"})]})]})]})}),"rejected"===p.status&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Application Rejected"}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-red-700",children:[(0,a.jsx)("p",{children:"Unfortunately, your streamer application has been rejected. You can submit a new application if you believe there has been a mistake or if your circumstances have changed."}),p.reviewNotes&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"font-medium",children:"Review Notes:"}),(0,a.jsx)("p",{className:"mt-1",children:p.reviewNotes})]})]})]})]})}),"rejected"===p.status&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("button",{onClick:()=>f(null),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Submit New Application"})})]}),!p&&(0,a.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:["Username *",(0,a.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:"(Auto-filled from your account)"})]}),(0,a.jsx)("input",{type:"text",id:"username",name:"username",value:y.username,onChange:v,required:!0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700 cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your username"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:["Display Name *",(0,a.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:"(Auto-filled from your account)"})]}),(0,a.jsx)("input",{type:"text",id:"displayName",name:"displayName",value:y.displayName,onChange:v,required:!0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700 cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your display name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["Email *",(0,a.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:"(Auto-filled from your account)"})]}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",value:y.email,onChange:v,required:!0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700 cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your email"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"platform",className:"block text-sm font-medium text-gray-700 mb-1",children:"Streaming Platform *"}),(0,a.jsxs)("select",{id:"platform",name:"platform",value:y.platform,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,a.jsx)("option",{value:"",children:"Select platform"}),(0,a.jsx)("option",{value:"twitch",children:"Twitch"}),(0,a.jsx)("option",{value:"youtube",children:"YouTube"}),(0,a.jsx)("option",{value:"kick",children:"Kick"}),(0,a.jsx)("option",{value:"facebook",children:"Facebook Gaming"}),(0,a.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{htmlFor:"channelUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"Channel URL *"}),(0,a.jsx)("input",{type:"url",id:"channelUrl",name:"channelUrl",value:y.channelUrl,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://twitch.tv/yourchannel"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Content Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Channel Description *"}),(0,a.jsx)("textarea",{id:"description",name:"description",value:y.description,onChange:v,required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe your channel and content..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"contentCategory",className:"block text-sm font-medium text-gray-700 mb-1",children:"Content Category *"}),(0,a.jsxs)("select",{id:"contentCategory",name:"contentCategory",value:y.contentCategory,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,a.jsx)("option",{value:"",children:"Select category"}),(0,a.jsx)("option",{value:"gaming",children:"Gaming"}),(0,a.jsx)("option",{value:"just-chatting",children:"Just Chatting"}),(0,a.jsx)("option",{value:"music",children:"Music"}),(0,a.jsx)("option",{value:"art",children:"Art & Creative"}),(0,a.jsx)("option",{value:"education",children:"Education"}),(0,a.jsx)("option",{value:"lifestyle",children:"Lifestyle"}),(0,a.jsx)("option",{value:"sports",children:"Sports"}),(0,a.jsx)("option",{value:"other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"monthlyViewers",className:"block text-sm font-medium text-gray-700 mb-1",children:"Average Monthly Viewers *"}),(0,a.jsx)("input",{type:"number",id:"monthlyViewers",name:"monthlyViewers",value:y.monthlyViewers,onChange:e=>b(r=>({...r,monthlyViewers:parseInt(e.target.value)||0})),required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your average monthly viewers"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Application Details"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"reasonForApplying",className:"block text-sm font-medium text-gray-700 mb-1",children:"Why do you want to become a streamer? *"}),(0,a.jsx)("textarea",{id:"reasonForApplying",name:"reasonForApplying",value:y.reasonForApplying,onChange:v,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Tell us about your goals, why you want to receive donations, and how you plan to use this platform..."})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>e.push("/dashboard"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Submitting...":"Submit Application"})]})]})]})})}},54377:function(e,r,s){"use strict";s.d(r,{Z:function(){return i}});var a=s(37821);s(58078);var n=s(61414),t=s(64944);function i(e){let{children:r}=e,{sidebarOpen:s,toggleSidebar:i}=(0,n.HB)();return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:[(0,a.jsx)(t.Header,{}),(0,a.jsx)("main",{className:"relative",children:r})]})}}},function(e){e.O(0,[4885,4952,5052,189,4944,7115,141,1744],function(){return e(e.s=18393)}),_N_E=e.O()}]);