(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5793],{87057:function(e,n,s){Promise.resolve().then(s.bind(s,82545))},82545:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return i},dynamic:function(){return a}});var t=s(37821),l=s(58078),o=s(61414),r=s(30189);let a="force-dynamic";function i(){let{user:e,isAuthenticated:n}=(0,o.qr)(),{isAuthenticating:s}=(0,o.tN)(),[a,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(null);(0,l.useEffect)(()=>{i((0,r.hV)())},[]);let h=async()=>{try{let e=await fetch("/api/auth/profile",{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(e.ok){let n=await e.json();d(n)}else d({error:"HTTP ".concat(e.status,": ").concat(e.statusText)})}catch(e){d({error:e instanceof Error?e.message:"Unknown error"})}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Donation Auth Test Page"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Authentication State"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"isAuthenticating:"})," ",s?"true":"false"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"isAuthenticated:"})," ",n?"true":"false"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"User:"})," ",e?JSON.stringify(e,null,2):"null"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"User Role:"})," ",(null==e?void 0:e.role)||"none"]})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Token Information"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Stored Token:"})," ",a?"".concat(a.substring(0,20),"..."):"none"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Token Length:"})," ",(null==a?void 0:a.length)||0]})]}),(0,t.jsx)("button",{onClick:h,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Test Profile API"}),(0,t.jsx)("button",{onClick:()=>{let e="mock-token-for-testing";document.cookie="auth-token=".concat(e,"; path=/; max-age=").concat(86400,"; SameSite=Lax"),localStorage.setItem("auth-token",e),i(e),window.location.reload()},className:"mt-4 ml-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Simulate Auth"})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow md:col-span-2",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Profile API Response"}),(0,t.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-xs overflow-auto",children:c?JSON.stringify(c,null,2):"No response yet"})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow md:col-span-2",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),(0,t.jsxs)("div",{className:"space-x-4",children:[(0,t.jsx)("a",{href:"/donation-links/create",className:"inline-block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Try Donation Links Create"}),(0,t.jsx)("a",{href:"/dashboard/donation-links",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Try Donation Links Dashboard"})]})]})]})]})})}}},function(e){e.O(0,[4885,4952,189,1414,7115,141,1744],function(){return e(e.s=87057)}),_N_E=e.O()}]);