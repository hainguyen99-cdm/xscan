(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{64686:function(e,t,r){Promise.resolve().then(r.bind(r,95801))},95801:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d},dynamic:function(){return l}});var a=r(37821),s=r(38397),n=r.n(s),o=r(58078),c=r(2155);let l="force-dynamic",i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,[r,a]=(0,o.useState)(e),[s,n]=(0,o.useState)(!1),c=(0,o.useRef)(),l=(0,o.useRef)(),i=(0,o.useRef)(e);return(0,o.useEffect)(()=>{if(e!==i.current){n(!0),i.current=r,l.current=performance.now();let s=r=>{if(!l.current)return;let o=Math.min((r-l.current)/t,1);a(Math.round(i.current+(e-i.current)*(1-Math.pow(1-o,3)))),o<1?c.current=requestAnimationFrame(s):(a(e),n(!1))};c.current=requestAnimationFrame(s)}return()=>{c.current&&cancelAnimationFrame(c.current)}},[e,t]),{displayValue:r,isAnimating:s}};function d(e){let{params:t}=e,[r,s]=(0,o.useState)(null),[l,d]=(0,o.useState)(!0),[x,f]=(0,o.useState)(null),[m,u]=(0,o.useState)("dark"),[p,b]=(0,o.useState)(!1),{displayValue:y,isAnimating:h}=i((null==r?void 0:r.totalAmount)||0,2e3);(0,o.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("theme"),r="true"===e.get("showStats");t&&u(t),r&&b(r)},[]),(0,o.useEffect)(()=>{let e=async()=>{try{d(!0),f(null);let e=c.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001",r=await fetch("".concat(e,"/api/widget-public/bank-total/").concat(t.streamerId,"?format=json&showStats=").concat(p));if(!r.ok)throw Error("Failed to fetch stats: ".concat(r.statusText));let a=await r.json();if(a.success)s(a.data);else throw Error("Failed to load bank donation stats")}catch(e){console.error("Error fetching bank donation stats:",e),f(e instanceof Error?e.message:"Unknown error")}finally{d(!1)}};e();let r=setInterval(e,3e4);return()=>clearInterval(r)},[t.streamerId,p]);let g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"VND";return"VND"===t?new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0}).format(e):new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},w=(()=>{let e={dark:{cardBackground:"transparent",border:"none",shadow:"none",hoverShadow:"none",primaryColor:"#ffffff",textPrimary:"#ffffff",textSecondary:"#d1d5db",statBackground:"transparent",borderColor:"transparent",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)"},light:{cardBackground:"transparent",border:"none",shadow:"none",hoverShadow:"none",primaryColor:"#000000",textPrimary:"#000000",textSecondary:"#4b5563",statBackground:"transparent",borderColor:"transparent",textShadow:"0 1px 2px rgba(255, 255, 255, 0.8)"},transparent:{cardBackground:"transparent",border:"none",shadow:"none",hoverShadow:"none",primaryColor:"#ffffff",textPrimary:"#ffffff",textSecondary:"#d1d5db",statBackground:"transparent",borderColor:"transparent",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)"}};return e[m]||e.dark})();return l?(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-transparent",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-32",style:{color:w.textSecondary},children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 rounded-full animate-spin",style:{borderColor:w.borderColor,borderTopColor:w.primaryColor}})})}):x?(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-transparent",children:(0,a.jsxs)("div",{className:"text-center p-6 rounded-lg",style:{background:"rgba(239, 68, 68, 0.1)",border:"2px solid #ef4444",color:"#ef4444"},children:[(0,a.jsx)("div",{className:"text-lg font-semibold mb-2",children:"Widget Error"}),(0,a.jsx)("div",{className:"text-sm",children:x})]})}):r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{id:"ce7fcf38a26db6e4",children:"@-webkit-keyframes slideUpFade{0%{-webkit-transform:translatey(20px);transform:translatey(20px);opacity:.7}100%{-webkit-transform:translatey(0);transform:translatey(0);opacity:1}}@-moz-keyframes slideUpFade{0%{-moz-transform:translatey(20px);transform:translatey(20px);opacity:.7}100%{-moz-transform:translatey(0);transform:translatey(0);opacity:1}}@-o-keyframes slideUpFade{0%{-o-transform:translatey(20px);transform:translatey(20px);opacity:.7}100%{-o-transform:translatey(0);transform:translatey(0);opacity:1}}@keyframes slideUpFade{0%{-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px);opacity:.7}100%{-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0);opacity:1}}@-webkit-keyframes numberGlow{0%{text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 10px rgba(59,130,246,.3)}50%{text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 20px rgba(59,130,246,.6)}100%{text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 10px rgba(59,130,246,.3)}}@-moz-keyframes numberGlow{0%{text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 10px rgba(59,130,246,.3)}50%{text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 20px rgba(59,130,246,.6)}100%{text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 10px rgba(59,130,246,.3)}}@-o-keyframes numberGlow{0%{text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 10px rgba(59,130,246,.3)}50%{text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 20px rgba(59,130,246,.6)}100%{text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 10px rgba(59,130,246,.3)}}@keyframes numberGlow{0%{text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 10px rgba(59,130,246,.3)}50%{text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 20px rgba(59,130,246,.6)}100%{text-shadow:0 2px 4px rgba(0,0,0,.8),0 0 10px rgba(59,130,246,.3)}}.animated-number.jsx-ce7fcf38a26db6e4{-webkit-animation:numberGlow 2s ease-in-out;-moz-animation:numberGlow 2s ease-in-out;-o-animation:numberGlow 2s ease-in-out;animation:numberGlow 2s ease-in-out}"}),(0,a.jsx)("div",{className:"jsx-ce7fcf38a26db6e4 w-full h-full bg-transparent flex items-center justify-center p-4",children:(0,a.jsxs)("div",{style:{background:w.cardBackground,border:w.border,boxShadow:w.shadow,minWidth:"300px",maxWidth:"500px"},className:"jsx-ce7fcf38a26db6e4 text-center p-6",children:[(0,a.jsx)("div",{style:{color:w.primaryColor,textShadow:w.textShadow},className:"jsx-ce7fcf38a26db6e4 text-lg font-semibold mb-4 uppercase tracking-wide",children:"Tá»”NG DONATE"}),(0,a.jsx)("div",{style:{color:w.primaryColor,textShadow:w.textShadow,transform:h?"translateY(10px)":"translateY(0)",opacity:h?.8:1},className:"jsx-ce7fcf38a26db6e4 "+"text-4xl font-bold mb-2 transition-all duration-500 ".concat(h?"animated-number":""),children:g(y,r.currency)}),(0,a.jsx)("div",{style:{color:w.textSecondary},className:"jsx-ce7fcf38a26db6e4 text-sm mb-4",children:r.currency}),p&&(0,a.jsxs)("div",{className:"jsx-ce7fcf38a26db6e4 grid grid-cols-2 md:grid-cols-3 gap-4 mt-6",children:[(0,a.jsxs)("div",{style:{background:w.statBackground},className:"jsx-ce7fcf38a26db6e4 p-3 text-center",children:[(0,a.jsx)("div",{style:{color:w.primaryColor},className:"jsx-ce7fcf38a26db6e4 text-lg font-semibold mb-1",children:r.transactionCount}),(0,a.jsx)("div",{style:{color:w.textSecondary},className:"jsx-ce7fcf38a26db6e4 text-xs uppercase tracking-wide",children:"Transactions"})]}),(0,a.jsxs)("div",{style:{background:w.statBackground},className:"jsx-ce7fcf38a26db6e4 p-3 text-center",children:[(0,a.jsx)("div",{style:{color:w.primaryColor},className:"jsx-ce7fcf38a26db6e4 text-lg font-semibold mb-1",children:g(r.averageDonation||0,r.currency)}),(0,a.jsx)("div",{style:{color:w.textSecondary},className:"jsx-ce7fcf38a26db6e4 text-xs uppercase tracking-wide",children:"Average"})]}),(0,a.jsxs)("div",{style:{background:w.statBackground},className:"jsx-ce7fcf38a26db6e4 p-3 text-center",children:[(0,a.jsx)("div",{style:{color:w.primaryColor},className:"jsx-ce7fcf38a26db6e4 text-lg font-semibold mb-1",children:g(r.todayDonations||0,r.currency)}),(0,a.jsx)("div",{style:{color:w.textSecondary},className:"jsx-ce7fcf38a26db6e4 text-xs uppercase tracking-wide",children:"Today"})]}),(0,a.jsxs)("div",{style:{background:w.statBackground},className:"jsx-ce7fcf38a26db6e4 p-3 text-center",children:[(0,a.jsx)("div",{style:{color:w.primaryColor},className:"jsx-ce7fcf38a26db6e4 text-lg font-semibold mb-1",children:g(r.thisWeekDonations||0,r.currency)}),(0,a.jsx)("div",{style:{color:w.textSecondary},className:"jsx-ce7fcf38a26db6e4 text-xs uppercase tracking-wide",children:"This Week"})]}),(0,a.jsxs)("div",{style:{background:w.statBackground},className:"jsx-ce7fcf38a26db6e4 p-3 text-center",children:[(0,a.jsx)("div",{style:{color:w.primaryColor},className:"jsx-ce7fcf38a26db6e4 text-lg font-semibold mb-1",children:g(r.thisMonthDonations||0,r.currency)}),(0,a.jsx)("div",{style:{color:w.textSecondary},className:"jsx-ce7fcf38a26db6e4 text-xs uppercase tracking-wide",children:"This Month"})]})]}),!1]})})]}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-transparent",children:(0,a.jsx)("div",{style:{color:w.textSecondary},children:"No data available"})})}}},function(e){e.O(0,[3426,7115,141,1744],function(){return e(e.s=64686)}),_N_E=e.O()}]);