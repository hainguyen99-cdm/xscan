(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3597],{81995:function(e,t,s){Promise.resolve().then(s.bind(s,21173))},21173:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p},dynamic:function(){return h}});var r=s(37821),a=s(58078),n=s(30189),l=s(25659);function i(e){var t,s;let{wallet:a,onDeposit:n,onWithdraw:i,onTransfer:c,onViewHistory:o}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Wallet Balance"}),(0,r.jsx)("div",{className:"text-4xl font-bold text-green-600",children:(t=a.balance,s=a.currency,(0,l.xG)(t,s))}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Available for transactions"})]}),(0,r.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,r.jsxs)("button",{onClick:n,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors duration-200 flex items-center justify-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Funds"]}),(0,r.jsxs)("button",{onClick:i,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})}),"Withdraw Funds"]}),(0,r.jsxs)("button",{onClick:c,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Transfer Funds"]})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Wallet ID:"}),(0,r.jsx)("p",{className:"font-mono text-gray-900 truncate",children:a.id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Currency:"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:a.currency})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(a.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:a.isActive?"Active":"Inactive"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Created:"}),(0,r.jsx)("p",{className:"text-gray-900",children:new Date(a.createdAt).toLocaleDateString()})]})]}),a.totalDeposits>0||a.totalWithdrawals>0||a.totalFees>0&&(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("span",{className:"text-gray-600 block",children:"Total Deposits"}),(0,r.jsx)("span",{className:"font-semibold text-green-600",children:(0,l.xG)(a.totalDeposits,a.currency)})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("span",{className:"text-gray-600 block",children:"Total Withdrawals"}),(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:(0,l.xG)(a.totalWithdrawals,a.currency)})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("span",{className:"text-gray-600 block",children:"Total Fees"}),(0,r.jsx)("span",{className:"font-semibold text-red-600",children:(0,l.xG)(a.totalFees,a.currency)})]})]})})]})]})}function c(e){let{transactions:t,walletId:s,onRefresh:n}=e,[i,c]=(0,a.useState)(t),[o,d]=(0,a.useState)("all"),[x,u]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=t;if("credit"===o?e=e.filter(e=>"deposit"===e.type||"refund"===e.type):"debit"===o&&(e=e.filter(e=>"withdrawal"===e.type||"fee"===e.type||"transfer"===e.type)),x){let t=x.toLowerCase();e=e.filter(e=>e.description.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)||e.reference&&e.reference.toLowerCase().includes(t)||e.type.toLowerCase().includes(t))}c(e)},[t,o,x]);let m=e=>{switch(e){case"deposit":return(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})});case"withdrawal":return(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})});case"transfer":return(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})});case"fee":return(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})});case"refund":return(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})});default:return(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},h=e=>{switch(e){case"deposit":case"refund":return"text-green-600 bg-green-100";case"withdrawal":case"fee":return"text-red-600 bg-red-100";case"transfer":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},g=e=>{switch(e){case"completed":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"failed":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},p=(e,t)=>(0,l.xG)(e,t),y=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["All transactions for wallet ",s]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[(0,r.jsx)("button",{onClick:()=>d("all"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 ".concat("all"===o?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"All"}),(0,r.jsx)("button",{onClick:()=>d("credit"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 ".concat("credit"===o?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Credits"}),(0,r.jsx)("button",{onClick:()=>d("debit"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 ".concat("debit"===o?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Debits"})]}),(0,r.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200",title:"Refresh transactions",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("input",{type:"text",placeholder:"Search transactions...",value:x,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})]}),0===i.length?(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No transactions found"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:x||"all"!==o?"Try adjusting your search or filter criteria.":"Get started by adding funds to your wallet."})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 rounded-full ".concat(h(e.type)),children:m(e.type)}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 capitalize",children:e.type}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.description}),e.relatedWalletId&&(0,r.jsxs)("div",{className:"text-xs text-gray-400",children:["To: ",e.relatedWalletId]})]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:p(e.amount,e.currency)}),e.fee&&e.fee>0&&(0,r.jsxs)("div",{className:"text-xs text-red-600",children:["Fee: ",p(e.fee,e.currency)]})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(g(e.status)),children:e.status})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y(e.createdAt)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.reference?(0,r.jsx)("span",{className:"font-mono text-xs bg-gray-100 px-2 py-1 rounded",children:e.reference}):(0,r.jsx)("span",{className:"text-gray-400",children:"-"})})]},e.id))})]})}),(0,r.jsx)("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",i.length," of ",t.length," transactions"]})})]})}var o=s(21921),d=s(94992);function x(e){let{isOpen:t,onClose:s,onSubmit:n,currency:l,balance:i,isProcessing:c=!1}=e,[o,d]=(0,a.useState)(""),[x,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),g=async e=>{if(e.preventDefault(),!o.trim()||!x||0>=parseFloat(x))return;let t=parseFloat(x);if(t>i){alert("Insufficient funds");return}try{await n(o.trim(),t,m||void 0),p()}catch(e){console.error("Error transferring funds:",e)}},p=()=>{d(""),u(""),h(""),s()};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Transfer Funds"}),(0,r.jsx)("button",{onClick:p,disabled:c,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 disabled:opacity-50",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:g,className:"px-6 py-4",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"mb-2 text-sm text-gray-600",children:["Available Balance: ",(0,r.jsxs)("span",{className:"font-semibold",children:["USD"===l?"$":"",i.toFixed(2)," ",l]})]}),(0,r.jsx)("label",{htmlFor:"toUserId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination User ID"}),(0,r.jsx)("input",{type:"text",id:"toUserId",value:o,onChange:e=>d(e.target.value),placeholder:"Enter user ID to transfer to",disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:bg-gray-100",required:!0})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"USD"===l?"$":""})}),(0,r.jsx)("input",{type:"number",id:"amount",value:x,onChange:e=>u(e.target.value),placeholder:"0.00",min:"0.01",max:i,step:"0.01",disabled:c,className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:bg-gray-100",required:!0})]}),parseFloat(x)>i&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"Amount exceeds available balance"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),(0,r.jsx)("textarea",{id:"description",value:m,onChange:e=>h(e.target.value),placeholder:"Enter transfer description",rows:3,disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none disabled:opacity-50 disabled:bg-gray-100"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:p,disabled:c,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:c||!o.trim()||!x||parseFloat(x)>i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200 flex items-center justify-center",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Transfer Funds"})]})]})]})}):null}var u=s(54377),m=s(83899);let h="force-dynamic",g=async()=>{let{validateAuthToken:e}=await Promise.resolve().then(s.bind(s,30189)),{isValid:t,user:r}=await e();if(!t||!r)throw Error("User not authenticated. Please log in to access your wallet.");return r.id};function p(){let[e,t]=(0,a.useState)(null),[s,l]=(0,a.useState)([]),[h,p]=(0,a.useState)(!0),[y,f]=(0,a.useState)(null),[b,w]=(0,a.useState)(!1),[j,v]=(0,a.useState)(!1),[N,k]=(0,a.useState)(!1),[C,F]=(0,a.useState)("");(0,a.useEffect)(()=>{L()},[]);let L=async()=>{try{p(!0),f(null);let e=await g();F(e);let s=await n.x1.wallets.getByUser(e);if(s.success&&s.data){t(s.data);let e=s.data._id||s.data.id;await T(e)}else await S(e)}catch(t){var e,s;if((null===(e=t.response)||void 0===e?void 0:e.status)===404){let e=await g();await S(e)}else(null===(s=t.message)||void 0===s?void 0:s.includes("not authenticated"))?(f("Please log in to access your wallet."),window.location.href="/login"):(f("Failed to load wallet. Please check your connection and try again."),console.error("Error loading wallet:",t))}finally{p(!1)}},S=async e=>{try{let e=await n.x1.wallets.create({currency:"VND"});if(e.success&&e.data){t(e.data);let s=e.data._id||e.data.id;await T(s),(0,m.showToast)({type:"success",title:"Wallet created successfully",message:"Your wallet is now ready to use"})}else f("Failed to create wallet")}catch(e){console.error("Error creating wallet:",e),f("Failed to create wallet. Please try again.")}},T=async e=>{try{let t=await n.x1.wallets.getTransactions(e);t.success&&t.data&&l(t.data)}catch(e){console.error("Error loading transactions:",e),(0,m.showToast)({type:"error",title:"Failed to load transactions",message:"Please try refreshing the page"})}},D=async(s,r)=>{if(e)try{let a=e._id||e.id,l=await n.x1.wallets.addFunds(a,{amount:s,description:r});l.success&&l.data&&(t(l.data),await T(a),w(!1),(0,m.showToast)({type:"success",title:"Funds added successfully",message:"".concat(s.toLocaleString()," VND has been added to your wallet")}))}catch(e){f("Failed to add funds"),console.error("Error adding funds:",e),(0,m.showToast)({type:"error",title:"Failed to add funds",message:"Please try again later"})}},W=async(s,r)=>{if(e)try{let a=e._id||e.id,l=await n.x1.wallets.withdrawFunds(a,{amount:s,description:r});l.success&&l.data&&(t(l.data),await T(a),v(!1),(0,m.showToast)({type:"success",title:"Withdrawal processed successfully",message:"".concat(s.toLocaleString()," VND has been withdrawn from your wallet")}))}catch(e){f("Failed to withdraw funds"),console.error("Error withdrawing funds:",e),(0,m.showToast)({type:"error",title:"Failed to withdraw funds",message:"Please try again later"})}},M=async(s,r,a)=>{if(e)try{let l=e._id||e.id,i=await n.x1.wallets.transferFunds(l,{toUserId:s,amount:r,description:a});if(i.success&&i.data){t(i.data);let e=i.data._id||i.data.id;await T(e),k(!1),(0,m.showToast)({type:"success",title:"Transfer completed successfully",message:"".concat(r.toLocaleString()," VND has been transferred to user ").concat(s)})}}catch(e){f("Failed to transfer funds"),console.error("Error transferring funds:",e),(0,m.showToast)({type:"error",title:"Failed to transfer funds",message:"Please try again later"})}},E=()=>{L()};return h?(0,r.jsx)(u.Z,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading wallet..."})]})})}):y?(0,r.jsx)(u.Z,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:y}),(0,r.jsx)("button",{onClick:E,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Try Again"})]})})}):e?(0,r.jsx)(u.Z,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"E-Wallet"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage your digital wallet and transactions"}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["User ID: ",C]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(i,{wallet:e,onDeposit:()=>w(!0),onWithdraw:()=>v(!0),onTransfer:()=>k(!0),onViewHistory:()=>{}})}),(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsx)(c,{transactions:s,walletId:e._id||e.id,onRefresh:()=>T(e._id||e.id)})})]}),(0,r.jsx)(o.Z,{isOpen:b,onClose:()=>w(!1),onSubmit:D,currency:e.currency}),(0,r.jsx)(d.Z,{isOpen:j,onClose:()=>v(!1),onSubmit:W,currency:e.currency,balance:e.balance}),(0,r.jsx)(x,{isOpen:N,onClose:()=>k(!1),onSubmit:M,currency:e.currency,balance:e.balance})]})})}):(0,r.jsx)(u.Z,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-gray-600 text-xl mb-4",children:"No Wallet Found"}),(0,r.jsx)("button",{onClick:E,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Create Wallet"})]})})})}},83899:function(e,t,s){"use strict";s.r(t),s.d(t,{ToastContainer:function(){return i},showToast:function(){return c}});var r=s(37821),a=s(58078),n=s(40457);function l(e){let{toast:t,onRemove:s}=e;return(0,a.useEffect)(()=>{let e=setTimeout(()=>{s(t.id)},t.duration||5e3);return()=>clearTimeout(e)},[t.id,t.duration,s]),(0,r.jsx)("div",{className:"".concat((()=>{switch(t.type){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})()," border rounded-lg p-4 shadow-lg max-w-sm w-full transition-all duration-300 ease-in-out transform translate-x-0 opacity-100"),children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"text-lg",children:(()=>{switch(t.type){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";default:return"ℹ️"}})()}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:t.title}),t.message&&(0,r.jsx)("p",{className:"text-sm mt-1 opacity-90",children:t.message})]}),(0,r.jsx)("button",{onClick:()=>s(t.id),className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]})})}function i(){let[e,t]=(0,a.useState)([]),s=e=>{t(t=>t.filter(t=>t.id!==e))},i=e=>{let s=Math.random().toString(36).substr(2,9);t(t=>[...t,{...e,id:s}])};return(0,a.useEffect)(()=>(window.showToast=i,()=>{delete window.showToast}),[]),(0,n.createPortal)((0,r.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(e=>(0,r.jsx)(l,{toast:e,onRemove:s},e.id))}),document.body)}let c=e=>{window.showToast&&window.showToast(e)}},25659:function(e,t,s){"use strict";s.d(t,{cn:function(){return n},p6:function(){return i},xG:function(){return l}});var r=s(97683),a=s(188);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}function l(e,t){if(null==e||isNaN(e))return"0.00";let s="string"==typeof e?parseFloat(e):e;try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}catch(e){return"".concat(t.toUpperCase()," ").concat(s.toFixed(2))}}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let s=new Date(e);if(isNaN(s.getTime()))return"Invalid Date";let r={year:"numeric",month:"short",day:"numeric",...t};return s.toLocaleDateString("en-US",r)}catch(e){return"Invalid Date"}}}},function(e){e.O(0,[4885,4952,5052,3939,189,1414,4944,8692,7115,141,1744],function(){return e(e.s=81995)}),_N_E=e.O()}]);