(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{5785:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var a=r(58078);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:c,...u},m)=>(0,a.createElement)("svg",{ref:m,...d,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:o("lucide",s),...!i&&!l(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(i)?i:[i]])),u=(e,t)=>{let r=(0,a.forwardRef)(({className:r,...s},l)=>(0,a.createElement)(c,{ref:l,iconNode:t,className:o(`lucide-${n(i(e))}`,`lucide-${e}`,r),...s}));return r.displayName=i(e),r}},57566:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(5785).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},52080:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(5785).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7672:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(5785).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},52882:function(e,t,r){Promise.resolve().then(r.bind(r,91691))},91691:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(37821),n=r(58078),s=r(46179),i=r(96871),o=r.n(i),l=r(61414),d=r(53572),c=r(9827),u=r(18407),m=r(5537),f=r(25659);let h=n.forwardRef((e,t)=>{let{className:r,variant:n="default",...s}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,f.cn)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}[n],r),...s})});h.displayName="Alert",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h5",{ref:t,className:(0,f.cn)("mb-1 font-medium leading-none tracking-tight",r),...n})}).displayName="AlertTitle";let g=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,f.cn)("text-sm [&_p]:leading-relaxed",r),...n})});g.displayName="AlertDescription";var p=r(7672),x=r(57566),y=r(5785);let b=(0,y.Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),v=(0,y.Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var w=r(52080);function N(){let[e,t]=(0,n.useState)({email:"",password:"",rememberMe:!1}),[r,i]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1),[N,k]=(0,n.useState)(""),{login:j}=(0,l.tN)(),A=(0,s.useRouter)(),E=e=>{let{name:r,value:a,type:n,checked:s}=e.target;t(e=>({...e,[r]:"checkbox"===n?s:a}))},S=async t=>{t.preventDefault(),k(""),y(!0);try{await j(e.email,e.password),A.push("/dashboard")}catch(e){k(e.message||"Login failed. Please try again.")}finally{y(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsxs)(m.Zb,{className:"shadow-xl border-0",children:[(0,a.jsxs)(m.Ol,{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(p.Z,{className:"w-8 h-8 text-white"})}),(0,a.jsx)(m.ll,{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),(0,a.jsx)(m.SZ,{className:"text-gray-600",children:"Sign in to your account to continue"})]}),(0,a.jsxs)(m.aY,{className:"space-y-6",children:[N&&(0,a.jsxs)(h,{variant:"destructive",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),(0,a.jsx)(g,{children:N})]}),(0,a.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u._,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email Address"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.I,{id:"email",name:"email",type:"email",placeholder:"Enter your email",value:e.email,onChange:E,required:!0,className:"pl-10 pr-4 py-3 border-gray-300 focus:border-blue-500 focus:ring-blue-500",disabled:f}),(0,a.jsx)(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u._,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.I,{id:"password",name:"password",type:r?"text":"password",placeholder:"Enter your password",value:e.password,onChange:E,required:!0,className:"pl-10 pr-12 py-3 border-gray-300 focus:border-blue-500 focus:ring-blue-500",disabled:f}),(0,a.jsx)(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("button",{type:"button",onClick:()=>i(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:f,children:r?(0,a.jsx)(v,{className:"w-4 h-4"}):(0,a.jsx)(w.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",checked:e.rememberMe,onChange:E,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:f}),(0,a.jsx)(u._,{htmlFor:"rememberMe",className:"text-sm text-gray-600",children:"Remember me"})]}),(0,a.jsx)(o(),{href:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-800 hover:underline",children:"Forgot password?"})]}),(0,a.jsx)(d.z,{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white py-3 px-4 rounded-lg font-medium transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Signing in..."})]}):"Sign In"})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,a.jsx)(o(),{href:"/register",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline",children:"Sign up"})]})})]})]})})})}},53572:function(e,t,r){"use strict";r.d(t,{z:function(){return i}});var a=r(37821),n=r(58078),s=r(25659);let i=n.forwardRef((e,t)=>{let{className:r,variant:n="default",size:i="default",...o}=e;return(0,a.jsx)("button",{className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"}[n],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[i],r),ref:t,...o})});i.displayName="Button"},5537:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return l}});var a=r(37821),n=r(58078),s=r(25659);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},9827:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(37821),n=r(58078),s=r(25659);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},18407:function(e,t,r){"use strict";r.d(t,{_:function(){return i}});var a=r(37821),n=r(58078),s=r(25659);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("label",{ref:t,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...n})});i.displayName="Label"},25659:function(e,t,r){"use strict";r.d(t,{cn:function(){return s},p6:function(){return o},xG:function(){return i}});var a=r(97683),n=r(188);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}function i(e,t){if(null==e||isNaN(e))return"0.00";let r="string"==typeof e?parseFloat(e):e;try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2,maximumFractionDigits:2}).format(r)}catch(e){return"".concat(t.toUpperCase()," ").concat(r.toFixed(2))}}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=new Date(e);if(isNaN(r.getTime()))return"Invalid Date";let a={year:"numeric",month:"short",day:"numeric",...t};return r.toLocaleDateString("en-US",a)}catch(e){return"Invalid Date"}}},61414:function(e,t,r){"use strict";r.d(t,{HB:function(){return d},qr:function(){return o},tN:function(){return l}});var a=r(8433),n=r(31421),s=r(30189);let i={user:null,isAuthenticated:!1,wallet:null,transactions:[],donations:[],donationLinks:[],recentDonations:[],obsSettings:null,dashboardStats:null,isLoading:!1,error:null},o=(0,a.Ue)()((0,n.mW)((0,n.tJ)((e,t)=>({...i,setUser:t=>e({user:t,isAuthenticated:!!t}),setAuthenticated:t=>e({isAuthenticated:t}),refreshUser:async()=>{try{let{isValid:t,user:r}=await (0,s.validateAuthToken)();t&&r&&e({user:r,isAuthenticated:!0})}catch(e){console.error("Failed to refresh user data:",e)}},updateUserRole:r=>{let{user:a}=t();a&&e({user:{...a,role:r}})},initializeAuth:async()=>{try{if(console.log("Initializing authentication..."),(0,s.pw)()){console.log("Token is expired, clearing auth state"),(0,s.H6)(),e({user:null,isAuthenticated:!1});return}let{isValid:t,user:r}=await (0,s.validateAuthToken)();console.log("Token validation result:",{isValid:t,user:r?"exists":"null"}),t&&r?(console.log("Setting authenticated user:",r.name),e({user:r,isAuthenticated:!0})):(console.log("Token invalid, clearing auth state"),(0,s.H6)(),e({user:null,isAuthenticated:!1}))}catch(t){console.error("Authentication initialization error:",t),(0,s.H6)(),e({user:null,isAuthenticated:!1})}},setWallet:t=>e({wallet:t}),updateWalletBalance:r=>{let{wallet:a}=t();a&&e({wallet:{...a,balance:a.balance+r}})},addTransaction:r=>{let{transactions:a}=t();e({transactions:[r,...a]})},setTransactions:t=>e({transactions:t}),addDonation:r=>{let{donations:a,recentDonations:n}=t();e({donations:[r,...a],recentDonations:[r,...n.slice(0,9)]})},setDonations:t=>e({donations:t}),addDonationLink:r=>{let{donationLinks:a}=t();e({donationLinks:[r,...a||[]]})},updateDonationLink:(r,a)=>{let{donationLinks:n}=t();e({donationLinks:(n||[]).map(e=>e.id===r?{...e,...a}:e)})},removeDonationLink:r=>{let{donationLinks:a}=t();e({donationLinks:(a||[]).filter(e=>e.id!==r)})},setDonationLinks:t=>e({donationLinks:t||[]}),setOBSSettings:t=>e({obsSettings:t}),updateOBSSettings:r=>{let{obsSettings:a}=t();a&&e({obsSettings:{...a,...r}})},setDashboardStats:t=>e({dashboardStats:t}),setLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),clearError:()=>e({error:null}),reset:()=>e(i)}),{name:"auth-store",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,wallet:e.wallet,transactions:e.transactions,donations:e.donations,donationLinks:e.donationLinks,obsSettings:e.obsSettings})}))),l=(0,a.Ue)()((0,n.mW)((0,n.tJ)(e=>({isAuthenticating:!1,authError:null,login:async(t,r)=>{e({isAuthenticating:!0,authError:null});try{let e=await s.x1.auth.login(t,r);if(e&&e.access_token&&e.user)(0,s.uB)(e.access_token),o.getState().setUser(e.user),o.getState().setAuthenticated(!0);else throw Error("Invalid response format")}catch(r){var a,n;let t=(null===(n=r.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.message)||r.message||"Login failed";throw e({authError:t}),Error(t)}finally{e({isAuthenticating:!1})}},register:async t=>{e({isAuthenticating:!0,authError:null});try{let e=t.name.trim().split(" "),r=e[0]||"",a=e.slice(1).join(" ")||"";if(r&&!a&&(a="User"),r.length<2)throw Error("First name must be at least 2 characters long");if(a.length<2)throw Error("Last name must be at least 2 characters long");let n={email:t.email,password:t.password,firstName:r,lastName:a,role:t.role},i=await s.x1.auth.register(n.email,n.password,n.firstName,n.lastName,n.role);if(i&&i.access_token&&i.user)(0,s.uB)(i.access_token),o.getState().setUser(i.user),o.getState().setAuthenticated(!0);else throw Error("Registration failed")}catch(n){var r,a;let t=(null===(a=n.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||n.message||"Registration failed";throw e({authError:t}),Error(t)}finally{e({isAuthenticating:!1})}},logout:()=>{s.x1.auth.logout().catch(console.error),(0,s.H6)(),o.getState().reset(),e({isAuthenticating:!1,authError:null})},forgotPassword:async t=>{e({isAuthenticating:!0,authError:null});try{await new Promise(e=>setTimeout(e,1e3))}catch(n){var r,a;let t=(null===(a=n.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||n.message||"Failed to send reset email";throw e({authError:t}),Error(t)}finally{e({isAuthenticating:!1})}},resetPassword:async(t,r)=>{e({isAuthenticating:!0,authError:null});try{await new Promise(e=>setTimeout(e,1e3))}catch(r){var a,n;let t=(null===(n=r.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.message)||r.message||"Failed to reset password";throw e({authError:t}),Error(t)}finally{e({isAuthenticating:!1})}},verifyEmail:async t=>{e({isAuthenticating:!0,authError:null});try{await new Promise(e=>setTimeout(e,1e3))}catch(n){var r,a;let t=(null===(a=n.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||n.message||"Failed to verify email";throw e({authError:t}),Error(t)}finally{e({isAuthenticating:!1})}}}),{name:"auth-store",partialize:e=>({isAuthenticating:e.isAuthenticating,authError:e.authError})}))),d=(0,a.Ue)()((0,n.mW)((0,n.tJ)(e=>({sidebarOpen:!1,theme:"light",notifications:[],toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen})),setTheme:t=>e({theme:t}),addNotification:t=>e(e=>({notifications:[{...t,id:Date.now().toString(),timestamp:new Date},...e.notifications]})),removeNotification:t=>e(e=>({notifications:e.notifications.filter(e=>e.id!==t)})),clearNotifications:()=>e({notifications:[]})}),{name:"ui-store",partialize:e=>({theme:e.theme})})))}},function(e){e.O(0,[4885,4952,5052,3939,189,7115,141,1744],function(){return e(e.s=52882)}),_N_E=e.O()}]);