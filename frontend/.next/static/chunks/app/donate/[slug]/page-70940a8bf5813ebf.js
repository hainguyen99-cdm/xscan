(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5157],{5785:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(58078);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),o=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:o,iconNode:c,...u},m)=>(0,n.createElement)("svg",{ref:m,...d,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:i("lucide",s),...!o&&!l(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(o)?o:[o]])),u=(e,t)=>{let r=(0,n.forwardRef)(({className:r,...s},l)=>(0,n.createElement)(c,{ref:l,iconNode:t,className:i(`lucide-${a(o(e))}`,`lucide-${e}`,r),...s}));return r.displayName=o(e),r}},25498:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(5785).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},60099:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(5785).Z)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},35809:function(e,t,r){Promise.resolve().then(r.bind(r,20311))},20311:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(37821),a=r(58078),s=r(46179),o=r(53572),i=r(9827),l=r(5537),d=r(73938),c=r(83899),u=r(54377),m=r(25498),f=r(60099);let h=[5e4,1e5,25e4,5e5,1e6,25e5,5e6];function x(){var e;let t=(0,s.useParams)(),r=(0,s.useRouter)(),[x,g]=(0,a.useState)(null),[p,y]=(0,a.useState)(!0),[v,b]=(0,a.useState)({amount:0,currency:"VND",message:"",isAnonymous:!1,paymentMethod:"wallet"}),[N,w]=(0,a.useState)(""),[j,k]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{let e=t.slug;if(!e){(0,c.showToast)({type:"error",title:"Invalid URL",message:"Donation link not found.",duration:5e3}),r.push("/donate-for-streamers");return}try{var n,a,s;y(!0);let t=await fetch("/api/donate/".concat(e));if(!t.ok){if(404===t.status){(0,c.showToast)({type:"error",title:"Donation Link Not Found",message:"The donation link you are looking for could not be found.",duration:5e3}),r.push("/donate-for-streamers");return}throw Error("Failed to fetch donation link")}let o=await t.json();if(!o.success||!o.data)throw Error(o.message||"Failed to fetch donation link");let i=o.data;if(!i.isActive){(0,c.showToast)({type:"error",title:"Donation Link Inactive",message:"This donation link is currently inactive.",duration:5e3}),r.push("/donate-for-streamers");return}let l={id:(null===(n=i.streamerId)||void 0===n?void 0:n._id)||i._id,name:i.streamerId?"".concat(i.streamerId.firstName||""," ").concat(i.streamerId.lastName||"").trim()||i.streamerId.username||i.title:i.title||"Unknown Streamer",username:(null===(a=i.streamerId)||void 0===a?void 0:a.username)||i.slug||i.customUrl,avatar:null===(s=i.streamerId)||void 0===s?void 0:s.profilePicture,totalDonations:i.totalAmount||0,isLive:!1,category:"general",followers:i.followers||0,streamTitle:void 0,game:void 0,donationLink:i};g(l)}catch(e){console.error("Error fetching donation link:",e),(0,c.showToast)({type:"error",title:"Error",message:"Failed to load donation link. Please try again.",duration:5e3}),r.push("/donate-for-streamers")}finally{y(!1)}})()},[t.slug,r]);let C=e=>{v.amount===e?b(e=>({...e,amount:0})):b(t=>({...t,amount:e})),w("")},T=e=>{w(e);let t=parseFloat(e)||0;b(e=>({...e,amount:t}))},D=async e=>{if(e.preventDefault(),v.amount<1e4){(0,c.showToast)({type:"error",title:"Invalid Amount",message:"Minimum donation amount is 10,000 VND.",duration:5e3});return}if(v.isAnonymous&&!(null==x?void 0:x.donationLink.allowAnonymous)){(0,c.showToast)({type:"error",title:"Anonymous Donations Not Allowed",message:"This streamer does not allow anonymous donations.",duration:5e3});return}k(!0);try{let e=await fetch("/api/donations/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({donationLinkId:(null==x?void 0:x.donationLink._id)||(null==x?void 0:x.donationLink.id),streamerId:null==x?void 0:x.id,amount:v.amount,currency:v.currency,message:v.message,isAnonymous:v.isAnonymous,paymentMethod:v.paymentMethod})});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to process donation")}await e.json(),(0,c.showToast)({type:"success",title:"Donation Successful!",message:"Thank you for your ".concat(v.amount.toLocaleString()," VND donation to ").concat(null==x?void 0:x.name,"!"),duration:5e3}),b({amount:0,currency:"VND",message:"",isAnonymous:!1,paymentMethod:"wallet"}),w("")}catch(t){console.error("Donation error:",t);let e=t instanceof Error?t.message:"There was an error processing your donation. Please try again.";(0,c.showToast)({type:"error",title:"Donation Failed",message:e,duration:5e3})}finally{k(!1)}};return p?(0,n.jsx)(u.Z,{children:(0,n.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,n.jsx)(d.T,{size:"lg"})})}):x?(0,n.jsx)(u.Z,{children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,n.jsxs)(o.z,{variant:"outline",onClick:()=>r.push("/donate-for-streamers"),className:"mb-6",children:[(0,n.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Back to Streamers"]}),(0,n.jsx)(l.Zb,{className:"mb-8",children:(0,n.jsxs)(l.Ol,{className:"text-center",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,n.jsx)("div",{className:"h-20 w-20 rounded-full bg-gradient-to-r from-indigo-600 to-cyan-500 flex items-center justify-center text-white font-bold text-2xl mr-4",children:x.name.charAt(0).toUpperCase()}),(0,n.jsxs)("div",{children:[(0,n.jsx)(l.ll,{className:"text-3xl",children:x.name}),(0,n.jsxs)(l.SZ,{className:"text-lg",children:["@",x.username]})]})]}),x.isLive&&(0,n.jsxs)("div",{className:"inline-flex items-center px-4 py-2 bg-red-100 text-red-800 rounded-full mb-4",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-2 animate-pulse"}),"LIVE NOW"]}),x.isLive&&x.streamTitle&&(0,n.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[(0,n.jsx)("p",{className:"text-red-800 font-medium mb-1",children:"Currently Streaming:"}),(0,n.jsx)("p",{className:"text-red-700",children:x.streamTitle}),x.game&&(0,n.jsxs)("p",{className:"text-red-600 text-sm mt-1",children:["\uD83C\uDFAE ",x.game]})]}),x.donationLink.description&&(0,n.jsx)("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:(0,n.jsx)("p",{className:"text-gray-700",children:x.donationLink.description})}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:(e=x.followers)>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}),(0,n.jsx)("div",{className:"text-gray-600",children:"Followers"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[x.totalDonations.toLocaleString()," VND"]}),(0,n.jsx)("div",{className:"text-gray-600",children:"Total Donations"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:x.category}),(0,n.jsx)("div",{className:"text-gray-600",children:"Category"})]})]})]})}),(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{className:"text-2xl text-center",children:"Make a Donation"}),(0,n.jsxs)(l.SZ,{className:"text-center",children:["Support ",x.name," and help them continue creating amazing content"]})]}),(0,n.jsx)(l.aY,{children:(0,n.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Donation Amount"}),(0,n.jsx)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:h.map(e=>(0,n.jsxs)(o.z,{type:"button",variant:(v.amount,"outline"),onClick:()=>C(e),className:"h-12 transition-all duration-200 ".concat(v.amount===e?"bg-gradient-to-r from-indigo-600 to-cyan-600 text-white border-indigo-600 shadow-lg transform scale-105":"hover:bg-gray-50 hover:border-gray-400"),children:[e.toLocaleString()," VND"]},e))}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"VND"}),(0,n.jsx)(i.I,{type:"number",placeholder:"Custom amount",value:N,onChange:e=>T(e.target.value),className:"pl-12 h-12",min:"10000",step:"1000"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message (Optional)"}),(0,n.jsx)(i.I,{placeholder:"Leave a message for the streamer...",value:v.message,onChange:e=>b(t=>({...t,message:e.target.value})),className:"h-12"})]}),x.donationLink.allowAnonymous&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",id:"anonymous",checked:v.isAnonymous,onChange:e=>b(t=>({...t,isAnonymous:e.target.checked})),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,n.jsx)("label",{htmlFor:"anonymous",className:"text-sm text-gray-700",children:"Make this donation anonymous"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),(0,n.jsxs)("select",{value:v.paymentMethod,onChange:e=>b(t=>({...t,paymentMethod:e.target.value})),className:"w-full h-12 px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,n.jsx)("option",{value:"wallet",children:"Wallet Balance"}),(0,n.jsx)("option",{value:"bank_transfer",children:"Bank Transfer"}),(0,n.jsx)("option",{value:"stripe",children:"Credit/Debit Card"}),(0,n.jsx)("option",{value:"paypal",children:"PayPal"})]})]}),(0,n.jsx)(o.z,{type:"submit",disabled:j||v.amount<=0,className:"w-full h-12 bg-gradient-to-r from-indigo-600 to-cyan-600 hover:from-indigo-700 hover:to-cyan-700 text-white font-medium text-lg",children:j?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.T,{size:"sm"}),(0,n.jsx)("span",{className:"ml-2",children:"Processing..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z,{className:"h-5 w-5 mr-2"}),"Donate ",v.amount.toLocaleString()," VND"]})})]})})]}),(0,n.jsxs)("div",{className:"mt-8 text-center text-gray-600",children:[(0,n.jsxs)("p",{className:"mb-4",children:["Your donation will be processed securely and ",x.name," will be notified immediately."]}),(0,n.jsxs)("p",{className:"text-sm",children:["Need help? Contact our support team or visit our"," ",(0,n.jsx)(o.z,{variant:"link",className:"p-0 h-auto text-indigo-600",children:"FAQ page"})]})]})]})}):null}},54377:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(37821);r(58078);var a=r(61414),s=r(64944);function o(e){let{children:t}=e,{sidebarOpen:r,toggleSidebar:o}=(0,a.HB)();return(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:[(0,n.jsx)(s.Header,{}),(0,n.jsx)("main",{className:"relative",children:t})]})}},73938:function(e,t,r){"use strict";r.d(t,{T:function(){return a}});var n=r(37821);function a(e){let{size:t="md",className:r=""}=e;return(0,n.jsx)("div",{className:"flex justify-center items-center ".concat(r),children:(0,n.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t]," animate-spin rounded-full border-4 border-gray-200 border-t-blue-600"),role:"status","aria-label":"Loading"})})}},53572:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var n=r(37821),a=r(58078),s=r(25659);let o=a.forwardRef((e,t)=>{let{className:r,variant:a="default",size:o="default",...i}=e;return(0,n.jsx)("button",{className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"}[a],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[o],r),ref:t,...i})});o.displayName="Button"},5537:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return o},aY:function(){return c},ll:function(){return l}});var n=r(37821),a=r(58078),s=r(25659);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},9827:function(e,t,r){"use strict";r.d(t,{I:function(){return o}});var n=r(37821),a=r(58078),s=r(25659);let o=a.forwardRef((e,t)=>{let{className:r,type:a,...o}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...o})});o.displayName="Input"},83899:function(e,t,r){"use strict";r.r(t),r.d(t,{ToastContainer:function(){return i},showToast:function(){return l}});var n=r(37821),a=r(58078),s=r(40457);function o(e){let{toast:t,onRemove:r}=e;return(0,a.useEffect)(()=>{let e=setTimeout(()=>{r(t.id)},t.duration||5e3);return()=>clearTimeout(e)},[t.id,t.duration,r]),(0,n.jsx)("div",{className:"".concat((()=>{switch(t.type){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})()," border rounded-lg p-4 shadow-lg max-w-sm w-full transition-all duration-300 ease-in-out transform translate-x-0 opacity-100"),children:(0,n.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,n.jsx)("span",{className:"text-lg",children:(()=>{switch(t.type){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";default:return"ℹ️"}})()}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"font-medium text-sm",children:t.title}),t.message&&(0,n.jsx)("p",{className:"text-sm mt-1 opacity-90",children:t.message})]}),(0,n.jsx)("button",{onClick:()=>r(t.id),className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]})})}function i(){let[e,t]=(0,a.useState)([]),r=e=>{t(t=>t.filter(t=>t.id!==e))},i=e=>{let r=Math.random().toString(36).substr(2,9);t(t=>[...t,{...e,id:r}])};return(0,a.useEffect)(()=>(window.showToast=i,()=>{delete window.showToast}),[]),(0,s.createPortal)((0,n.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(e=>(0,n.jsx)(o,{toast:e,onRemove:r},e.id))}),document.body)}let l=e=>{window.showToast&&window.showToast(e)}},25659:function(e,t,r){"use strict";r.d(t,{cn:function(){return s},p6:function(){return i},xG:function(){return o}});var n=r(97683),a=r(188);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function o(e,t){if(null==e||isNaN(e))return"0.00";let r="string"==typeof e?parseFloat(e):e;try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2,maximumFractionDigits:2}).format(r)}catch(e){return"".concat(t.toUpperCase()," ").concat(r.toFixed(2))}}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=new Date(e);if(isNaN(r.getTime()))return"Invalid Date";let n={year:"numeric",month:"short",day:"numeric",...t};return r.toLocaleDateString("en-US",n)}catch(e){return"Invalid Date"}}}},function(e){e.O(0,[4885,4952,5052,3939,189,4944,7115,141,1744],function(){return e(e.s=35809)}),_N_E=e.O()}]);