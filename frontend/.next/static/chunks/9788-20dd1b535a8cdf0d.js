"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9788],{39788:function(e,r,t){t.d(r,{p:function(){return a}});var o=t(37821),s=t(58078);let l={primaryColor:"#3B82F6",secondaryColor:"#1E40AF",backgroundColor:"#FFFFFF",textColor:"#1F2937"};function a(e){var r;let{initialData:t,onSubmit:a,isLoading:n=!1,submitButtonText:i="Save Changes"}=e,[d,c]=(0,s.useState)({title:"",description:"",customUrl:"",isActive:!0,allowAnonymous:!0,theme:l,...t}),[m,u]=(0,s.useState)({}),[x,h]=(0,s.useState)(null),[g,p]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=setTimeout(async()=>{if(!d.customUrl||d.customUrl.length<3){h(null);return}p(!0);try{let e=await fetch("/api/donation-links/check-url?url=".concat(encodeURIComponent(d.customUrl))),r=await e.json();h(r.available)}catch(e){h(null)}finally{p(!1)}},500);return()=>clearTimeout(e)},[d.customUrl]);let b=()=>{let e={};return d.title.trim()||(e.title="Title is required"),d.customUrl.trim()?d.customUrl.length<3?e.customUrl="Custom URL must be at least 3 characters long":/^[a-zA-Z0-9-]+$/.test(d.customUrl)?!1===x&&(e.customUrl="This URL is already taken"):e.customUrl="Custom URL can only contain letters, numbers, and hyphens":e.customUrl="Custom URL is required",d.description&&d.description.length>500&&(e.description="Description must be less than 500 characters"),u(e),0===Object.keys(e).length},y=(e,r)=>{c(t=>({...t,[e]:r})),m[e]&&u(r=>({...r,[e]:""}))},f=(e,r)=>{c(t=>({...t,theme:{...t.theme,[e]:r}}))};return(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),b()&&a(d)},className:"space-y-6",children:[(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,o.jsx)("input",{type:"text",id:"title",value:d.title,onChange:e=>y("title",e.target.value),className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ".concat(m.title?"border-red-300":"border-gray-300"),placeholder:"e.g., Support My Gaming Stream"}),m.title&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.title})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,o.jsx)("textarea",{id:"description",value:d.description,onChange:e=>y("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Tell your audience why they should support you..."}),(0,o.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:[(null===(r=d.description)||void 0===r?void 0:r.length)||0,"/500 characters"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"customUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom URL *"}),(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"/"}),(0,o.jsx)("input",{type:"text",id:"customUrl",value:d.customUrl,onChange:e=>y("customUrl",e.target.value),className:"flex-1 px-3 py-2 border rounded-r-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ".concat(m.customUrl?"border-red-300":"border-gray-300"),placeholder:"my-stream"})]}),(0,o.jsxs)("div",{className:"mt-1 flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[g&&(0,o.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-500 mr-2"}),"Checking availability..."]}),!0===x&&(0,o.jsxs)("div",{className:"flex items-center text-sm text-green-600",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"URL available"]}),!1===x&&(0,o.jsxs)("div",{className:"flex items-center text-sm text-red-600",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"URL taken"]})]}),(0,o.jsx)("button",{type:"button",onClick:()=>{let e=Math.random().toString(36).substring(2,8);c(r=>({...r,customUrl:e}))},className:"text-sm text-indigo-600 hover:text-indigo-500",children:"Generate random"})]}),m.customUrl&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.customUrl}),(0,o.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Your donation page will be available at: ",(0,o.jsxs)("code",{className:"bg-gray-100 px-1 py-0.5 rounded text-xs",children:["/donate/",d.customUrl||"your-url"]})]})]})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Settings"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"isActive",checked:d.isActive,onChange:e=>y("isActive",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,o.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Active (donation page is live and accepting donations)"})]}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"allowAnonymous",checked:d.allowAnonymous,onChange:e=>y("allowAnonymous",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,o.jsx)("label",{htmlFor:"allowAnonymous",className:"ml-2 block text-sm text-gray-900",children:"Allow anonymous donations"})]})]})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Theme Customization"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"primaryColor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Color"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"color",id:"primaryColor",value:d.theme.primaryColor,onChange:e=>f("primaryColor",e.target.value),className:"h-10 w-16 border border-gray-300 rounded cursor-pointer"}),(0,o.jsx)("input",{type:"text",value:d.theme.primaryColor,onChange:e=>f("primaryColor",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"#3B82F6"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"secondaryColor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Secondary Color"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"color",id:"secondaryColor",value:d.theme.secondaryColor,onChange:e=>f("secondaryColor",e.target.value),className:"h-10 w-16 border border-gray-300 rounded cursor-pointer"}),(0,o.jsx)("input",{type:"text",value:d.theme.secondaryColor,onChange:e=>f("secondaryColor",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"#1E40AF"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"backgroundColor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Background Color"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"color",id:"backgroundColor",value:d.theme.backgroundColor,onChange:e=>f("backgroundColor",e.target.value),className:"h-10 w-16 border border-gray-300 rounded cursor-pointer"}),(0,o.jsx)("input",{type:"text",value:d.theme.backgroundColor,onChange:e=>f("backgroundColor",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"#FFFFFF"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"textColor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Text Color"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"color",id:"textColor",value:d.theme.textColor,onChange:e=>f("textColor",e.target.value),className:"h-10 w-16 border border-gray-300 rounded cursor-pointer"}),(0,o.jsx)("input",{type:"text",value:d.theme.textColor,onChange:e=>f("textColor",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"#1F2937"})]})]})]}),(0,o.jsxs)("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Theme Preview"}),(0,o.jsx)("div",{className:"p-4 rounded-lg",style:{backgroundColor:d.theme.backgroundColor,color:d.theme.textColor},children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("div",{className:"px-3 py-2 rounded text-center font-medium",style:{backgroundColor:d.theme.primaryColor,color:"#FFFFFF"},children:"Primary Button"}),(0,o.jsx)("div",{className:"px-3 py-2 rounded text-center font-medium",style:{backgroundColor:d.theme.secondaryColor,color:"#FFFFFF"},children:"Secondary Button"}),(0,o.jsx)("p",{className:"text-sm",children:"Sample text with your chosen colors"})]})})]})]}),(0,o.jsx)("div",{className:"pt-6 border-t border-gray-200",children:(0,o.jsx)("button",{type:"submit",disabled:n||g,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):i})})]})}}}]);